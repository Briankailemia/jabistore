/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/stats/route";
exports.ids = ["app/api/admin/stats/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fstats%2Froute&page=%2Fapi%2Fadmin%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fstats%2Froute.js&appDir=%2FUsers%2Fuser%2FDesktop%2FRogueApe%2Fwork%2Fjabistore%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fuser%2FDesktop%2FRogueApe%2Fwork%2Fjabistore&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fstats%2Froute&page=%2Fapi%2Fadmin%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fstats%2Froute.js&appDir=%2FUsers%2Fuser%2FDesktop%2FRogueApe%2Fwork%2Fjabistore%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fuser%2FDesktop%2FRogueApe%2Fwork%2Fjabistore&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_user_Desktop_RogueApe_work_jabistore_src_app_api_admin_stats_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/admin/stats/route.js */ \"(rsc)/./src/app/api/admin/stats/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/stats/route\",\n        pathname: \"/api/admin/stats\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/stats/route\"\n    },\n    resolvedPagePath: \"/Users/user/Desktop/RogueApe/work/jabistore/src/app/api/admin/stats/route.js\",\n    nextConfigOutput,\n    userland: _Users_user_Desktop_RogueApe_work_jabistore_src_app_api_admin_stats_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRnN0YXRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhZG1pbiUyRnN0YXRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWRtaW4lMkZzdGF0cyUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRnVzZXIlMkZEZXNrdG9wJTJGUm9ndWVBcGUlMkZ3b3JrJTJGamFiaXN0b3JlJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnVzZXIlMkZEZXNrdG9wJTJGUm9ndWVBcGUlMkZ3b3JrJTJGamFiaXN0b3JlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUM0QjtBQUN6RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3VzZXIvRGVza3RvcC9Sb2d1ZUFwZS93b3JrL2phYmlzdG9yZS9zcmMvYXBwL2FwaS9hZG1pbi9zdGF0cy9yb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4vc3RhdHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZG1pbi9zdGF0c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWRtaW4vc3RhdHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvdXNlci9EZXNrdG9wL1JvZ3VlQXBlL3dvcmsvamFiaXN0b3JlL3NyYy9hcHAvYXBpL2FkbWluL3N0YXRzL3JvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fstats%2Froute&page=%2Fapi%2Fadmin%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fstats%2Froute.js&appDir=%2FUsers%2Fuser%2FDesktop%2FRogueApe%2Fwork%2Fjabistore%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fuser%2FDesktop%2FRogueApe%2Fwork%2Fjabistore&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/admin/stats/route.js":
/*!******************************************!*\
  !*** ./src/app/api/admin/stats/route.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/next-auth/next/index.js\");\n/* harmony import */ var _lib_authOptions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/authOptions */ \"(rsc)/./src/lib/authOptions.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.js\");\n/* harmony import */ var _lib_apiResponse__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/apiResponse */ \"(rsc)/./src/lib/apiResponse.js\");\n/* harmony import */ var _lib_middleware_rateLimiter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/middleware/rateLimiter */ \"(rsc)/./src/lib/middleware/rateLimiter.js\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./src/lib/logger.js\");\n\n\n\n\n\n\n// GET /api/admin/stats - Get admin dashboard statistics\nconst GET = (0,_lib_apiResponse__WEBPACK_IMPORTED_MODULE_3__.createApiHandler)({\n    rateLimiter: _lib_middleware_rateLimiter__WEBPACK_IMPORTED_MODULE_4__.apiRateLimiter,\n    handler: async (request)=>{\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(_lib_authOptions__WEBPACK_IMPORTED_MODULE_1__.authOptions);\n        if (!session?.user?.id) {\n            return _lib_apiResponse__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.unauthorized();\n        }\n        if (session.user.role !== 'ADMIN') {\n            return _lib_apiResponse__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.forbidden('Admin access required');\n        }\n        const now = new Date();\n        const todayStart = new Date(now.setHours(0, 0, 0, 0));\n        const todayEnd = new Date(now.setHours(23, 59, 59, 999));\n        const lastMonthStart = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n        const lastMonthEnd = new Date(now.getFullYear(), now.getMonth(), 0, 23, 59, 59, 999);\n        const thisMonthStart = new Date(now.getFullYear(), now.getMonth(), 1);\n        const startTime = Date.now();\n        const [totalUsers, newUsersToday, totalProducts, totalCategories, totalBrands, totalOrders, pendingOrders, allOrders, lastMonthOrders, thisMonthOrders, lowStockCount] = await Promise.all([\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.count(),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.count({\n                where: {\n                    createdAt: {\n                        gte: todayStart,\n                        lte: todayEnd\n                    }\n                }\n            }),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.product.count(),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.category.count(),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.brand.count(),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.order.count(),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.order.count({\n                where: {\n                    status: 'PENDING'\n                }\n            }),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.order.findMany({\n                where: {\n                    paymentStatus: 'COMPLETED'\n                },\n                select: {\n                    total: true,\n                    createdAt: true\n                }\n            }),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.order.findMany({\n                where: {\n                    paymentStatus: 'COMPLETED',\n                    createdAt: {\n                        gte: lastMonthStart,\n                        lte: lastMonthEnd\n                    }\n                },\n                select: {\n                    total: true\n                }\n            }),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.order.findMany({\n                where: {\n                    paymentStatus: 'COMPLETED',\n                    createdAt: {\n                        gte: thisMonthStart\n                    }\n                },\n                select: {\n                    total: true\n                }\n            }),\n            _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.product.count({\n                where: {\n                    stock: {\n                        lte: 5\n                    }\n                }\n            })\n        ]);\n        const duration = Date.now() - startTime;\n        const totalRevenue = allOrders.reduce((sum, order)=>sum + (order.total || 0), 0);\n        const lastMonthRevenue = lastMonthOrders.reduce((sum, order)=>sum + (order.total || 0), 0);\n        const thisMonthRevenue = thisMonthOrders.reduce((sum, order)=>sum + (order.total || 0), 0);\n        const revenueGrowth = lastMonthRevenue > 0 ? (thisMonthRevenue - lastMonthRevenue) / lastMonthRevenue * 100 : 0;\n        _lib_logger__WEBPACK_IMPORTED_MODULE_5__[\"default\"].dbQuery('admin.stats', duration, {\n            adminId: session.user.id\n        });\n        _lib_logger__WEBPACK_IMPORTED_MODULE_5__[\"default\"].info('Admin stats fetched', {\n            adminId: session.user.id\n        });\n        return _lib_apiResponse__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.success({\n            totalUsers,\n            newUsersToday,\n            totalProducts,\n            totalCategories,\n            totalBrands,\n            totalOrders,\n            pendingOrders,\n            lowStockProducts: lowStockCount,\n            totalRevenue,\n            revenueGrowth: Math.round(revenueGrowth * 10) / 10,\n            thisMonthRevenue,\n            lastMonthRevenue\n        });\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUQsTUFBTVcsV0FBV3RDLEtBQUtELEdBQUcsS0FBS1U7UUFFOUIsTUFBTThCLGVBQWV0QixVQUFVdUIsTUFBTSxDQUFDLENBQUNDLEtBQUtWLFFBQVVVLE1BQU9WLENBQUFBLE1BQU1LLEtBQUssSUFBSSxJQUFJO1FBQ2hGLE1BQU1NLG1CQUFtQnhCLGdCQUFnQnNCLE1BQU0sQ0FBQyxDQUFDQyxLQUFLVixRQUFVVSxNQUFPVixDQUFBQSxNQUFNSyxLQUFLLElBQUksSUFBSTtRQUMxRixNQUFNTyxtQkFBbUJ4QixnQkFBZ0JxQixNQUFNLENBQUMsQ0FBQ0MsS0FBS1YsUUFBVVUsTUFBT1YsQ0FBQUEsTUFBTUssS0FBSyxJQUFJLElBQUk7UUFFMUYsTUFBTVEsZ0JBQWdCRixtQkFBbUIsSUFDckMsQ0FBRUMsbUJBQW1CRCxnQkFBZSxJQUFLQSxtQkFBb0IsTUFDN0Q7UUFFSnRELDJEQUFjLENBQUMsZUFBZWtELFVBQVU7WUFBRVEsU0FBU3JELFFBQVFDLElBQUksQ0FBQ0MsRUFBRTtRQUFDO1FBQ25FUCx3REFBVyxDQUFDLHVCQUF1QjtZQUFFMEQsU0FBU3JELFFBQVFDLElBQUksQ0FBQ0MsRUFBRTtRQUFDO1FBRTlELE9BQU9WLHlEQUFXQSxDQUFDK0QsT0FBTyxDQUFDO1lBQ3pCdEM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQWlDLGtCQUFrQjdCO1lBQ2xCbUI7WUFDQUssZUFBZU0sS0FBS0MsS0FBSyxDQUFDUCxnQkFBZ0IsTUFBTTtZQUNoREQ7WUFDQUQ7UUFDRjtJQUNGO0FBQ0YsR0FBRSIsInNvdXJjZXMiOlsiL1VzZXJzL3VzZXIvRGVza3RvcC9Sb2d1ZUFwZS93b3JrL2phYmlzdG9yZS9zcmMvYXBwL2FwaS9hZG1pbi9zdGF0cy9yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoL25leHQnXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvbGliL2F1dGhPcHRpb25zJ1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJ1xuaW1wb3J0IHsgQXBpUmVzcG9uc2UsIGNyZWF0ZUFwaUhhbmRsZXIgfSBmcm9tICdAL2xpYi9hcGlSZXNwb25zZSdcbmltcG9ydCB7IGFwaVJhdGVMaW1pdGVyIH0gZnJvbSAnQC9saWIvbWlkZGxld2FyZS9yYXRlTGltaXRlcidcbmltcG9ydCBsb2dnZXIgZnJvbSAnQC9saWIvbG9nZ2VyJ1xuXG4vLyBHRVQgL2FwaS9hZG1pbi9zdGF0cyAtIEdldCBhZG1pbiBkYXNoYm9hcmQgc3RhdGlzdGljc1xuZXhwb3J0IGNvbnN0IEdFVCA9IGNyZWF0ZUFwaUhhbmRsZXIoe1xuICByYXRlTGltaXRlcjogYXBpUmF0ZUxpbWl0ZXIsXG4gIGhhbmRsZXI6IGFzeW5jIChyZXF1ZXN0KSA9PiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXG4gICAgXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyPy5pZCkge1xuICAgICAgcmV0dXJuIEFwaVJlc3BvbnNlLnVuYXV0aG9yaXplZCgpXG4gICAgfVxuXG4gICAgaWYgKHNlc3Npb24udXNlci5yb2xlICE9PSAnQURNSU4nKSB7XG4gICAgICByZXR1cm4gQXBpUmVzcG9uc2UuZm9yYmlkZGVuKCdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnKVxuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICBjb25zdCB0b2RheVN0YXJ0ID0gbmV3IERhdGUobm93LnNldEhvdXJzKDAsIDAsIDAsIDApKVxuICAgIGNvbnN0IHRvZGF5RW5kID0gbmV3IERhdGUobm93LnNldEhvdXJzKDIzLCA1OSwgNTksIDk5OSkpXG4gICAgY29uc3QgbGFzdE1vbnRoU3RhcnQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCkgLSAxLCAxKVxuICAgIGNvbnN0IGxhc3RNb250aEVuZCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgMCwgMjMsIDU5LCA1OSwgOTk5KVxuICAgIGNvbnN0IHRoaXNNb250aFN0YXJ0ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCAxKVxuXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKVxuICAgIGNvbnN0IFtcbiAgICAgIHRvdGFsVXNlcnMsXG4gICAgICBuZXdVc2Vyc1RvZGF5LFxuICAgICAgdG90YWxQcm9kdWN0cyxcbiAgICAgIHRvdGFsQ2F0ZWdvcmllcyxcbiAgICAgIHRvdGFsQnJhbmRzLFxuICAgICAgdG90YWxPcmRlcnMsXG4gICAgICBwZW5kaW5nT3JkZXJzLFxuICAgICAgYWxsT3JkZXJzLFxuICAgICAgbGFzdE1vbnRoT3JkZXJzLFxuICAgICAgdGhpc01vbnRoT3JkZXJzLFxuICAgICAgbG93U3RvY2tDb3VudCxcbiAgICBdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgcHJpc21hLnVzZXIuY291bnQoKSxcbiAgICAgIHByaXNtYS51c2VyLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIGd0ZTogdG9kYXlTdGFydCxcbiAgICAgICAgICAgIGx0ZTogdG9kYXlFbmQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICAgcHJpc21hLnByb2R1Y3QuY291bnQoKSxcbiAgICAgIHByaXNtYS5jYXRlZ29yeS5jb3VudCgpLFxuICAgICAgcHJpc21hLmJyYW5kLmNvdW50KCksXG4gICAgICBwcmlzbWEub3JkZXIuY291bnQoKSxcbiAgICAgIHByaXNtYS5vcmRlci5jb3VudCh7XG4gICAgICAgIHdoZXJlOiB7IHN0YXR1czogJ1BFTkRJTkcnIH0sXG4gICAgICB9KSxcbiAgICAgIHByaXNtYS5vcmRlci5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcGF5bWVudFN0YXR1czogJ0NPTVBMRVRFRCcsXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIHRvdGFsOiB0cnVlLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICAgcHJpc21hLm9yZGVyLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBwYXltZW50U3RhdHVzOiAnQ09NUExFVEVEJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIGd0ZTogbGFzdE1vbnRoU3RhcnQsXG4gICAgICAgICAgICBsdGU6IGxhc3RNb250aEVuZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICB0b3RhbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICAgcHJpc21hLm9yZGVyLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBwYXltZW50U3RhdHVzOiAnQ09NUExFVEVEJyxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICAgIGd0ZTogdGhpc01vbnRoU3RhcnQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgdG90YWw6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICAgIHByaXNtYS5wcm9kdWN0LmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHsgc3RvY2s6IHsgbHRlOiA1IH0gfSxcbiAgICAgIH0pLFxuICAgIF0pXG5cbiAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWVcblxuICAgIGNvbnN0IHRvdGFsUmV2ZW51ZSA9IGFsbE9yZGVycy5yZWR1Y2UoKHN1bSwgb3JkZXIpID0+IHN1bSArIChvcmRlci50b3RhbCB8fCAwKSwgMClcbiAgICBjb25zdCBsYXN0TW9udGhSZXZlbnVlID0gbGFzdE1vbnRoT3JkZXJzLnJlZHVjZSgoc3VtLCBvcmRlcikgPT4gc3VtICsgKG9yZGVyLnRvdGFsIHx8IDApLCAwKVxuICAgIGNvbnN0IHRoaXNNb250aFJldmVudWUgPSB0aGlzTW9udGhPcmRlcnMucmVkdWNlKChzdW0sIG9yZGVyKSA9PiBzdW0gKyAob3JkZXIudG90YWwgfHwgMCksIDApXG5cbiAgICBjb25zdCByZXZlbnVlR3Jvd3RoID0gbGFzdE1vbnRoUmV2ZW51ZSA+IDBcbiAgICAgID8gKCh0aGlzTW9udGhSZXZlbnVlIC0gbGFzdE1vbnRoUmV2ZW51ZSkgLyBsYXN0TW9udGhSZXZlbnVlKSAqIDEwMFxuICAgICAgOiAwXG5cbiAgICBsb2dnZXIuZGJRdWVyeSgnYWRtaW4uc3RhdHMnLCBkdXJhdGlvbiwgeyBhZG1pbklkOiBzZXNzaW9uLnVzZXIuaWQgfSlcbiAgICBsb2dnZXIuaW5mbygnQWRtaW4gc3RhdHMgZmV0Y2hlZCcsIHsgYWRtaW5JZDogc2Vzc2lvbi51c2VyLmlkIH0pXG5cbiAgICByZXR1cm4gQXBpUmVzcG9uc2Uuc3VjY2Vzcyh7XG4gICAgICB0b3RhbFVzZXJzLFxuICAgICAgbmV3VXNlcnNUb2RheSxcbiAgICAgIHRvdGFsUHJvZHVjdHMsXG4gICAgICB0b3RhbENhdGVnb3JpZXMsXG4gICAgICB0b3RhbEJyYW5kcyxcbiAgICAgIHRvdGFsT3JkZXJzLFxuICAgICAgcGVuZGluZ09yZGVycyxcbiAgICAgIGxvd1N0b2NrUHJvZHVjdHM6IGxvd1N0b2NrQ291bnQsXG4gICAgICB0b3RhbFJldmVudWUsXG4gICAgICByZXZlbnVlR3Jvd3RoOiBNYXRoLnJvdW5kKHJldmVudWVHcm93dGggKiAxMCkgLyAxMCxcbiAgICAgIHRoaXNNb250aFJldmVudWUsXG4gICAgICBsYXN0TW9udGhSZXZlbnVlLFxuICAgIH0pXG4gIH0sXG59KVxuXG4iXSwibmFtZXMiOlsiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwicHJpc21hIiwiQXBpUmVzcG9uc2UiLCJjcmVhdGVBcGlIYW5kbGVyIiwiYXBpUmF0ZUxpbWl0ZXIiLCJsb2dnZXIiLCJHRVQiLCJyYXRlTGltaXRlciIsImhhbmRsZXIiLCJyZXF1ZXN0Iiwic2Vzc2lvbiIsInVzZXIiLCJpZCIsInVuYXV0aG9yaXplZCIsInJvbGUiLCJmb3JiaWRkZW4iLCJub3ciLCJEYXRlIiwidG9kYXlTdGFydCIsInNldEhvdXJzIiwidG9kYXlFbmQiLCJsYXN0TW9udGhTdGFydCIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJsYXN0TW9udGhFbmQiLCJ0aGlzTW9udGhTdGFydCIsInN0YXJ0VGltZSIsInRvdGFsVXNlcnMiLCJuZXdVc2Vyc1RvZGF5IiwidG90YWxQcm9kdWN0cyIsInRvdGFsQ2F0ZWdvcmllcyIsInRvdGFsQnJhbmRzIiwidG90YWxPcmRlcnMiLCJwZW5kaW5nT3JkZXJzIiwiYWxsT3JkZXJzIiwibGFzdE1vbnRoT3JkZXJzIiwidGhpc01vbnRoT3JkZXJzIiwibG93U3RvY2tDb3VudCIsIlByb21pc2UiLCJhbGwiLCJjb3VudCIsIndoZXJlIiwiY3JlYXRlZEF0IiwiZ3RlIiwibHRlIiwicHJvZHVjdCIsImNhdGVnb3J5IiwiYnJhbmQiLCJvcmRlciIsInN0YXR1cyIsImZpbmRNYW55IiwicGF5bWVudFN0YXR1cyIsInNlbGVjdCIsInRvdGFsIiwic3RvY2siLCJkdXJhdGlvbiIsInRvdGFsUmV2ZW51ZSIsInJlZHVjZSIsInN1bSIsImxhc3RNb250aFJldmVudWUiLCJ0aGlzTW9udGhSZXZlbnVlIiwicmV2ZW51ZUdyb3d0aCIsImRiUXVlcnkiLCJhZG1pbklkIiwiaW5mbyIsInN1Y2Nlc3MiLCJsb3dTdG9ja1Byb2R1Y3RzIiwiTWF0aCIsInJvdW5kIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/admin/stats/route.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/apiResponse.js":
/*!********************************!*\
  !*** ./src/lib/apiResponse.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiResponse: () => (/* binding */ ApiResponse),\n/* harmony export */   createApiHandler: () => (/* binding */ createApiHandler),\n/* harmony export */   withErrorHandling: () => (/* binding */ withErrorHandling),\n/* harmony export */   withRateLimit: () => (/* binding */ withRateLimit)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/logger */ \"(rsc)/./src/lib/logger.js\");\n/**\n * Standardized API response helpers\n * Ensures consistent response format across all API routes\n */ \n\n/**\n * Standard API response format\n */ class ApiResponse {\n    static success(data, message = 'Success', status = 200) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data,\n            message,\n            error: null\n        }, {\n            status\n        });\n    }\n    static error(message, status = 400, error = null, details = null) {\n        const response = {\n            success: false,\n            data: null,\n            message,\n            error: error || message\n        };\n        if (details) {\n            response.details = details;\n        }\n        // Log error\n        _lib_logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('API Error', new Error(message), {\n            status,\n            details\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status\n        });\n    }\n    static unauthorized(message = 'Unauthorized') {\n        return this.error(message, 401);\n    }\n    static forbidden(message = 'Forbidden') {\n        return this.error(message, 403);\n    }\n    static notFound(message = 'Resource not found') {\n        return this.error(message, 404);\n    }\n    static validationError(errors, message = 'Validation failed') {\n        return this.error(message, 400, 'ValidationError', errors);\n    }\n    static serverError(message = 'Internal server error', error = null) {\n        return this.error(message, 500, error?.message || 'InternalServerError');\n    }\n    static rateLimitExceeded(retryAfter = null) {\n        const response = this.error('Too many requests, please try again later.', 429);\n        if (retryAfter) {\n            response.headers.set('Retry-After', retryAfter.toString());\n        }\n        return response;\n    }\n}\n/**\n * Wrapper for API route handlers with error handling\n */ function withErrorHandling(handler) {\n    return async (request, context)=>{\n        const startTime = Date.now();\n        const method = request.method;\n        const path = new URL(request.url).pathname;\n        try {\n            const response = await handler(request, context);\n            const duration = Date.now() - startTime;\n            // Log successful request\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].apiRequest(method, path, response.status, duration);\n            return response;\n        } catch (error) {\n            const duration = Date.now() - startTime;\n            // Log error\n            _lib_logger__WEBPACK_IMPORTED_MODULE_1__[\"default\"].apiError(method, path, error);\n            // Return appropriate error response\n            if (error.name === 'ZodError') {\n                return ApiResponse.validationError(error.errors.map((err)=>({\n                        path: err.path.join('.'),\n                        message: err.message\n                    })));\n            }\n            if (error.message?.includes('Unauthorized') || error.message?.includes('401')) {\n                return ApiResponse.unauthorized(error.message);\n            }\n            if (error.message?.includes('Forbidden') || error.message?.includes('403')) {\n                return ApiResponse.forbidden(error.message);\n            }\n            return ApiResponse.serverError(error.message || 'An unexpected error occurred', error);\n        }\n    };\n}\n/**\n * Wrapper for API route handlers with rate limiting\n */ function withRateLimit(rateLimiter, handler) {\n    return async (request, context)=>{\n        const rateLimitResult = await rateLimiter(request);\n        if (!rateLimitResult.success) {\n            return ApiResponse.rateLimitExceeded(rateLimitResult.retryAfter);\n        }\n        return handler(request, context);\n    };\n}\n/**\n * Wrapper combining rate limiting, validation, and error handling\n */ function createApiHandler(options = {}) {\n    const { rateLimiter, validator, handler } = options;\n    let wrappedHandler = handler;\n    // Add validation\n    if (validator) {\n        const originalHandler = wrappedHandler;\n        wrappedHandler = async (request, context)=>{\n            const validationResult = await validator(request);\n            if (!validationResult.success) {\n                return ApiResponse.validationError(validationResult.details);\n            }\n            // Attach validated data to request\n            request.validatedData = validationResult.data;\n            return originalHandler(request, context);\n        };\n    }\n    // Add rate limiting\n    if (rateLimiter) {\n        wrappedHandler = withRateLimit(rateLimiter, wrappedHandler);\n    }\n    // Add error handling (always last)\n    wrappedHandler = withErrorHandling(wrappedHandler);\n    return wrappedHandler;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNuQ2dCLFFBQVEyQixhQUFhLEdBQUdELGlCQUFpQi9DLElBQUk7WUFDN0MsT0FBTzhDLGdCQUFnQnpCLFNBQVNDO1FBQ2xDO0lBQ0Y7SUFFQSxvQkFBb0I7SUFDcEIsSUFBSWtCLGFBQWE7UUFDZkssaUJBQWlCTixjQUFjQyxhQUFhSztJQUM5QztJQUVBLG1DQUFtQztJQUNuQ0EsaUJBQWlCMUIsa0JBQWtCMEI7SUFFbkMsT0FBT0E7QUFDVCIsInNvdXJjZXMiOlsiL1VzZXJzL3VzZXIvRGVza3RvcC9Sb2d1ZUFwZS93b3JrL2phYmlzdG9yZS9zcmMvbGliL2FwaVJlc3BvbnNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3RhbmRhcmRpemVkIEFQSSByZXNwb25zZSBoZWxwZXJzXG4gKiBFbnN1cmVzIGNvbnNpc3RlbnQgcmVzcG9uc2UgZm9ybWF0IGFjcm9zcyBhbGwgQVBJIHJvdXRlc1xuICovXG5cbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IGxvZ2dlciBmcm9tICdAL2xpYi9sb2dnZXInXG5cbi8qKlxuICogU3RhbmRhcmQgQVBJIHJlc3BvbnNlIGZvcm1hdFxuICovXG5leHBvcnQgY2xhc3MgQXBpUmVzcG9uc2Uge1xuICBzdGF0aWMgc3VjY2VzcyhkYXRhLCBtZXNzYWdlID0gJ1N1Y2Nlc3MnLCBzdGF0dXMgPSAyMDApIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzIH1cbiAgICApXG4gIH1cblxuICBzdGF0aWMgZXJyb3IobWVzc2FnZSwgc3RhdHVzID0gNDAwLCBlcnJvciA9IG51bGwsIGRldGFpbHMgPSBudWxsKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGRhdGE6IG51bGwsXG4gICAgICBtZXNzYWdlLFxuICAgICAgZXJyb3I6IGVycm9yIHx8IG1lc3NhZ2UsXG4gICAgfVxuXG4gICAgaWYgKGRldGFpbHMpIHtcbiAgICAgIHJlc3BvbnNlLmRldGFpbHMgPSBkZXRhaWxzXG4gICAgfVxuXG4gICAgLy8gTG9nIGVycm9yXG4gICAgbG9nZ2VyLmVycm9yKCdBUEkgRXJyb3InLCBuZXcgRXJyb3IobWVzc2FnZSksIHsgc3RhdHVzLCBkZXRhaWxzIH0pXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UsIHsgc3RhdHVzIH0pXG4gIH1cblxuICBzdGF0aWMgdW5hdXRob3JpemVkKG1lc3NhZ2UgPSAnVW5hdXRob3JpemVkJykge1xuICAgIHJldHVybiB0aGlzLmVycm9yKG1lc3NhZ2UsIDQwMSlcbiAgfVxuXG4gIHN0YXRpYyBmb3JiaWRkZW4obWVzc2FnZSA9ICdGb3JiaWRkZW4nKSB7XG4gICAgcmV0dXJuIHRoaXMuZXJyb3IobWVzc2FnZSwgNDAzKVxuICB9XG5cbiAgc3RhdGljIG5vdEZvdW5kKG1lc3NhZ2UgPSAnUmVzb3VyY2Ugbm90IGZvdW5kJykge1xuICAgIHJldHVybiB0aGlzLmVycm9yKG1lc3NhZ2UsIDQwNClcbiAgfVxuXG4gIHN0YXRpYyB2YWxpZGF0aW9uRXJyb3IoZXJyb3JzLCBtZXNzYWdlID0gJ1ZhbGlkYXRpb24gZmFpbGVkJykge1xuICAgIHJldHVybiB0aGlzLmVycm9yKG1lc3NhZ2UsIDQwMCwgJ1ZhbGlkYXRpb25FcnJvcicsIGVycm9ycylcbiAgfVxuXG4gIHN0YXRpYyBzZXJ2ZXJFcnJvcihtZXNzYWdlID0gJ0ludGVybmFsIHNlcnZlciBlcnJvcicsIGVycm9yID0gbnVsbCkge1xuICAgIHJldHVybiB0aGlzLmVycm9yKG1lc3NhZ2UsIDUwMCwgZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ludGVybmFsU2VydmVyRXJyb3InKVxuICB9XG5cbiAgc3RhdGljIHJhdGVMaW1pdEV4Y2VlZGVkKHJldHJ5QWZ0ZXIgPSBudWxsKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLmVycm9yKCdUb28gbWFueSByZXF1ZXN0cywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLCA0MjkpXG4gICAgaWYgKHJldHJ5QWZ0ZXIpIHtcbiAgICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdSZXRyeS1BZnRlcicsIHJldHJ5QWZ0ZXIudG9TdHJpbmcoKSlcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cbn1cblxuLyoqXG4gKiBXcmFwcGVyIGZvciBBUEkgcm91dGUgaGFuZGxlcnMgd2l0aCBlcnJvciBoYW5kbGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2l0aEVycm9ySGFuZGxpbmcoaGFuZGxlcikge1xuICByZXR1cm4gYXN5bmMgKHJlcXVlc3QsIGNvbnRleHQpID0+IHtcbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG4gICAgY29uc3QgbWV0aG9kID0gcmVxdWVzdC5tZXRob2RcbiAgICBjb25zdCBwYXRoID0gbmV3IFVSTChyZXF1ZXN0LnVybCkucGF0aG5hbWVcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGhhbmRsZXIocmVxdWVzdCwgY29udGV4dClcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuXG4gICAgICAvLyBMb2cgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICBsb2dnZXIuYXBpUmVxdWVzdChtZXRob2QsIHBhdGgsIHJlc3BvbnNlLnN0YXR1cywgZHVyYXRpb24pXG5cbiAgICAgIHJldHVybiByZXNwb25zZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWVcblxuICAgICAgLy8gTG9nIGVycm9yXG4gICAgICBsb2dnZXIuYXBpRXJyb3IobWV0aG9kLCBwYXRoLCBlcnJvcilcblxuICAgICAgLy8gUmV0dXJuIGFwcHJvcHJpYXRlIGVycm9yIHJlc3BvbnNlXG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1pvZEVycm9yJykge1xuICAgICAgICByZXR1cm4gQXBpUmVzcG9uc2UudmFsaWRhdGlvbkVycm9yKFxuICAgICAgICAgIGVycm9yLmVycm9ycy5tYXAoZXJyID0+ICh7XG4gICAgICAgICAgICBwYXRoOiBlcnIucGF0aC5qb2luKCcuJyksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICAgICAgICB9KSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ1VuYXV0aG9yaXplZCcpIHx8IGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCc0MDEnKSkge1xuICAgICAgICByZXR1cm4gQXBpUmVzcG9uc2UudW5hdXRob3JpemVkKGVycm9yLm1lc3NhZ2UpXG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnRm9yYmlkZGVuJykgfHwgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJzQwMycpKSB7XG4gICAgICAgIHJldHVybiBBcGlSZXNwb25zZS5mb3JiaWRkZW4oZXJyb3IubWVzc2FnZSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIEFwaVJlc3BvbnNlLnNlcnZlckVycm9yKFxuICAgICAgICBlcnJvci5tZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJyxcbiAgICAgICAgZXJyb3JcbiAgICAgIClcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBXcmFwcGVyIGZvciBBUEkgcm91dGUgaGFuZGxlcnMgd2l0aCByYXRlIGxpbWl0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoUmF0ZUxpbWl0KHJhdGVMaW1pdGVyLCBoYW5kbGVyKSB7XG4gIHJldHVybiBhc3luYyAocmVxdWVzdCwgY29udGV4dCkgPT4ge1xuICAgIGNvbnN0IHJhdGVMaW1pdFJlc3VsdCA9IGF3YWl0IHJhdGVMaW1pdGVyKHJlcXVlc3QpXG5cbiAgICBpZiAoIXJhdGVMaW1pdFJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gQXBpUmVzcG9uc2UucmF0ZUxpbWl0RXhjZWVkZWQocmF0ZUxpbWl0UmVzdWx0LnJldHJ5QWZ0ZXIpXG4gICAgfVxuXG4gICAgcmV0dXJuIGhhbmRsZXIocmVxdWVzdCwgY29udGV4dClcbiAgfVxufVxuXG4vKipcbiAqIFdyYXBwZXIgY29tYmluaW5nIHJhdGUgbGltaXRpbmcsIHZhbGlkYXRpb24sIGFuZCBlcnJvciBoYW5kbGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXBpSGFuZGxlcihvcHRpb25zID0ge30pIHtcbiAgY29uc3QgeyByYXRlTGltaXRlciwgdmFsaWRhdG9yLCBoYW5kbGVyIH0gPSBvcHRpb25zXG5cbiAgbGV0IHdyYXBwZWRIYW5kbGVyID0gaGFuZGxlclxuXG4gIC8vIEFkZCB2YWxpZGF0aW9uXG4gIGlmICh2YWxpZGF0b3IpIHtcbiAgICBjb25zdCBvcmlnaW5hbEhhbmRsZXIgPSB3cmFwcGVkSGFuZGxlclxuICAgIHdyYXBwZWRIYW5kbGVyID0gYXN5bmMgKHJlcXVlc3QsIGNvbnRleHQpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBhd2FpdCB2YWxpZGF0b3IocmVxdWVzdClcbiAgICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiBBcGlSZXNwb25zZS52YWxpZGF0aW9uRXJyb3IodmFsaWRhdGlvblJlc3VsdC5kZXRhaWxzKVxuICAgICAgfVxuICAgICAgLy8gQXR0YWNoIHZhbGlkYXRlZCBkYXRhIHRvIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QudmFsaWRhdGVkRGF0YSA9IHZhbGlkYXRpb25SZXN1bHQuZGF0YVxuICAgICAgcmV0dXJuIG9yaWdpbmFsSGFuZGxlcihyZXF1ZXN0LCBjb250ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8vIEFkZCByYXRlIGxpbWl0aW5nXG4gIGlmIChyYXRlTGltaXRlcikge1xuICAgIHdyYXBwZWRIYW5kbGVyID0gd2l0aFJhdGVMaW1pdChyYXRlTGltaXRlciwgd3JhcHBlZEhhbmRsZXIpXG4gIH1cblxuICAvLyBBZGQgZXJyb3IgaGFuZGxpbmcgKGFsd2F5cyBsYXN0KVxuICB3cmFwcGVkSGFuZGxlciA9IHdpdGhFcnJvckhhbmRsaW5nKHdyYXBwZWRIYW5kbGVyKVxuXG4gIHJldHVybiB3cmFwcGVkSGFuZGxlclxufVxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwibG9nZ2VyIiwiQXBpUmVzcG9uc2UiLCJzdWNjZXNzIiwiZGF0YSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJkZXRhaWxzIiwicmVzcG9uc2UiLCJFcnJvciIsInVuYXV0aG9yaXplZCIsImZvcmJpZGRlbiIsIm5vdEZvdW5kIiwidmFsaWRhdGlvbkVycm9yIiwiZXJyb3JzIiwic2VydmVyRXJyb3IiLCJyYXRlTGltaXRFeGNlZWRlZCIsInJldHJ5QWZ0ZXIiLCJoZWFkZXJzIiwic2V0IiwidG9TdHJpbmciLCJ3aXRoRXJyb3JIYW5kbGluZyIsImhhbmRsZXIiLCJyZXF1ZXN0IiwiY29udGV4dCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJtZXRob2QiLCJwYXRoIiwiVVJMIiwidXJsIiwicGF0aG5hbWUiLCJkdXJhdGlvbiIsImFwaVJlcXVlc3QiLCJhcGlFcnJvciIsIm5hbWUiLCJtYXAiLCJlcnIiLCJqb2luIiwiaW5jbHVkZXMiLCJ3aXRoUmF0ZUxpbWl0IiwicmF0ZUxpbWl0ZXIiLCJyYXRlTGltaXRSZXN1bHQiLCJjcmVhdGVBcGlIYW5kbGVyIiwib3B0aW9ucyIsInZhbGlkYXRvciIsIndyYXBwZWRIYW5kbGVyIiwib3JpZ2luYWxIYW5kbGVyIiwidmFsaWRhdGlvblJlc3VsdCIsInZhbGlkYXRlZERhdGEiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/apiResponse.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/authOptions.js":
/*!********************************!*\
  !*** ./src/lib/authOptions.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"(rsc)/./node_modules/@next-auth/prisma-adapter/dist/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.js\");\n\n\n\n\n\nfunction buildProviders() {\n    const providers = [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: 'credentials',\n            credentials: {\n                email: {\n                    label: 'Email',\n                    type: 'email'\n                },\n                password: {\n                    label: 'Password',\n                    type: 'password'\n                }\n            },\n            async authorize (credentials) {\n                try {\n                    if (!credentials?.email || !credentials?.password) {\n                        console.error('Missing credentials');\n                        return null;\n                    }\n                    // Normalize email to lowercase for case-insensitive lookup\n                    const normalizedEmail = credentials.email.toLowerCase().trim();\n                    const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma.user.findUnique({\n                        where: {\n                            email: normalizedEmail\n                        }\n                    });\n                    if (!user) {\n                        console.error(`User not found: ${normalizedEmail}`);\n                        return null;\n                    }\n                    if (!user.password) {\n                        console.error('User has no password (OAuth account)');\n                        return null;\n                    }\n                    const isPasswordValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"].compare(credentials.password, user.password);\n                    if (!isPasswordValid) {\n                        console.error('Invalid password');\n                        return null;\n                    }\n                    return {\n                        id: user.id,\n                        email: user.email,\n                        name: user.name,\n                        role: user.role,\n                        image: user.avatar\n                    };\n                } catch (error) {\n                    console.error('Authorization error:', error);\n                    return null;\n                }\n            }\n        })\n    ];\n    if (process.env.GOOGLE_CLIENT_ID && process.env.GOOGLE_CLIENT_SECRET) {\n        providers.push((0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n            authorization: {\n                params: {\n                    prompt: 'consent',\n                    access_type: 'offline',\n                    response_type: 'code'\n                }\n            }\n        }));\n    } else {\n        console.warn('Google OAuth not configured: GOOGLE_CLIENT_ID or GOOGLE_CLIENT_SECRET missing');\n    }\n    return providers;\n}\nconst authOptions = {\n    // Only use adapter for OAuth providers, not for credentials\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_2__.PrismaAdapter)(_lib_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma),\n    providers: buildProviders(),\n    pages: {\n        signIn: '/auth/signin'\n    },\n    session: {\n        strategy: 'jwt',\n        maxAge: 24 * 60 * 60,\n        updateAge: 60 * 60\n    },\n    jwt: {\n        maxAge: 24 * 60 * 60\n    },\n    callbacks: {\n        async signIn ({ user, account, profile }) {\n            // Allow all sign-ins\n            return true;\n        },\n        async jwt ({ token, user, account }) {\n            // Initial sign in\n            if (user) {\n                token.role = user.role || token.role || 'USER';\n                token.avatar = user.image || token.avatar || null;\n                token.email = user.email;\n            } else if (!token.role && token.sub) {\n                try {\n                    const dbUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_4__.prisma.user.findUnique({\n                        where: {\n                            id: token.sub\n                        }\n                    });\n                    if (dbUser) {\n                        token.role = dbUser.role;\n                        token.avatar = dbUser.avatar;\n                        token.email = dbUser.email;\n                    }\n                } catch (error) {\n                    console.error('Error fetching user for token:', error);\n                }\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                session.user.id = token.sub;\n                session.user.role = token.role || 'USER';\n                session.user.image = token.avatar ?? session.user.image ?? null;\n                session.user.email = token.email ?? session.user.email;\n                // Ensure user ID is always present\n                if (!session.user.id && token.sub) {\n                    session.user.id = token.sub;\n                }\n            }\n            return session;\n        }\n    },\n    secret: process.env.NEXTAUTH_SECRET || 'dilitech-dev-secret-key-2024',\n    debug: \"development\" === 'development'\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUM7Z0JBQ25DLElBQUksQ0FBQ29DLFFBQVExQixJQUFJLENBQUNLLEVBQUUsSUFBSTZCLE1BQU1DLEdBQUcsRUFBRTtvQkFDakNULFFBQVExQixJQUFJLENBQUNLLEVBQUUsR0FBRzZCLE1BQU1DLEdBQUc7Z0JBQzdCO1lBQ0Y7WUFFQSxPQUFPVDtRQUNUO0lBQ0Y7SUFDQVcsUUFBUTVCLFFBQVFDLEdBQUcsQ0FBQzRCLGVBQWUsSUFBSTtJQUN2Q0MsT0FBTzlCLGtCQUF5QjtBQUNsQyxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvdXNlci9EZXNrdG9wL1JvZ3VlQXBlL3dvcmsvamFiaXN0b3JlL3NyYy9saWIvYXV0aE9wdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscydcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSdcbmltcG9ydCB7IFByaXNtYUFkYXB0ZXIgfSBmcm9tICdAbmV4dC1hdXRoL3ByaXNtYS1hZGFwdGVyJ1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcydcblxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJ1xuXG5mdW5jdGlvbiBidWlsZFByb3ZpZGVycygpIHtcbiAgY29uc3QgcHJvdmlkZXJzID0gW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogJ2NyZWRlbnRpYWxzJyxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiAnRW1haWwnLCB0eXBlOiAnZW1haWwnIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiAnUGFzc3dvcmQnLCB0eXBlOiAncGFzc3dvcmQnIH0sXG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwgfHwgIWNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWlzc2luZyBjcmVkZW50aWFscycpXG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE5vcm1hbGl6ZSBlbWFpbCB0byBsb3dlcmNhc2UgZm9yIGNhc2UtaW5zZW5zaXRpdmUgbG9va3VwXG4gICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEVtYWlsID0gY3JlZGVudGlhbHMuZW1haWwudG9Mb3dlckNhc2UoKS50cmltKClcblxuICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7IGVtYWlsOiBub3JtYWxpemVkRW1haWwgfSxcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBVc2VyIG5vdCBmb3VuZDogJHtub3JtYWxpemVkRW1haWx9YClcbiAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCF1c2VyLnBhc3N3b3JkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVc2VyIGhhcyBubyBwYXNzd29yZCAoT0F1dGggYWNjb3VudCknKVxuICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBpc1Bhc3N3b3JkVmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShjcmVkZW50aWFscy5wYXNzd29yZCwgdXNlci5wYXNzd29yZClcbiAgICAgICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBwYXNzd29yZCcpXG4gICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICAgICAgaW1hZ2U6IHVzZXIuYXZhdGFyLFxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdBdXRob3JpemF0aW9uIGVycm9yOicsIGVycm9yKVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSksXG4gIF1cblxuICBpZiAocHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCAmJiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCkge1xuICAgIHByb3ZpZGVycy5wdXNoKFxuICAgICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCxcbiAgICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCxcbiAgICAgICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgcHJvbXB0OiAnY29uc2VudCcsXG4gICAgICAgICAgICBhY2Nlc3NfdHlwZTogJ29mZmxpbmUnLFxuICAgICAgICAgICAgcmVzcG9uc2VfdHlwZTogJ2NvZGUnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICApXG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKCdHb29nbGUgT0F1dGggbm90IGNvbmZpZ3VyZWQ6IEdPT0dMRV9DTElFTlRfSUQgb3IgR09PR0xFX0NMSUVOVF9TRUNSRVQgbWlzc2luZycpXG4gIH1cblxuICByZXR1cm4gcHJvdmlkZXJzXG59XG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9ucyA9IHtcbiAgLy8gT25seSB1c2UgYWRhcHRlciBmb3IgT0F1dGggcHJvdmlkZXJzLCBub3QgZm9yIGNyZWRlbnRpYWxzXG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIocHJpc21hKSxcbiAgcHJvdmlkZXJzOiBidWlsZFByb3ZpZGVycygpLFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogJy9hdXRoL3NpZ25pbicsXG4gIH0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogJ2p3dCcsXG4gICAgbWF4QWdlOiAyNCAqIDYwICogNjAsXG4gICAgdXBkYXRlQWdlOiA2MCAqIDYwLFxuICB9LFxuICBqd3Q6IHtcbiAgICBtYXhBZ2U6IDI0ICogNjAgKiA2MCxcbiAgfSxcbiAgY2FsbGJhY2tzOiB7XG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSB9KSB7XG4gICAgICAvLyBBbGxvdyBhbGwgc2lnbi1pbnNcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSxcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciwgYWNjb3VudCB9KSB7XG4gICAgICAvLyBJbml0aWFsIHNpZ24gaW5cbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLnJvbGUgPSB1c2VyLnJvbGUgfHwgdG9rZW4ucm9sZSB8fCAnVVNFUidcbiAgICAgICAgdG9rZW4uYXZhdGFyID0gdXNlci5pbWFnZSB8fCB0b2tlbi5hdmF0YXIgfHwgbnVsbFxuICAgICAgICB0b2tlbi5lbWFpbCA9IHVzZXIuZW1haWxcbiAgICAgIH0gXG4gICAgICAvLyBSZWZyZXNoIHRva2VuIGRhdGEgZnJvbSBkYXRhYmFzZSBpZiBuZWVkZWRcbiAgICAgIGVsc2UgaWYgKCF0b2tlbi5yb2xlICYmIHRva2VuLnN1Yikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRiVXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdG9rZW4uc3ViIH0gfSlcbiAgICAgICAgICBpZiAoZGJVc2VyKSB7XG4gICAgICAgICAgICB0b2tlbi5yb2xlID0gZGJVc2VyLnJvbGVcbiAgICAgICAgICAgIHRva2VuLmF2YXRhciA9IGRiVXNlci5hdmF0YXJcbiAgICAgICAgICAgIHRva2VuLmVtYWlsID0gZGJVc2VyLmVtYWlsXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHVzZXIgZm9yIHRva2VuOicsIGVycm9yKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0b2tlblxuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGlmICh0b2tlbiAmJiBzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uc3ViXG4gICAgICAgIHNlc3Npb24udXNlci5yb2xlID0gdG9rZW4ucm9sZSB8fCAnVVNFUidcbiAgICAgICAgc2Vzc2lvbi51c2VyLmltYWdlID0gdG9rZW4uYXZhdGFyID8/IHNlc3Npb24udXNlci5pbWFnZSA/PyBudWxsXG4gICAgICAgIHNlc3Npb24udXNlci5lbWFpbCA9IHRva2VuLmVtYWlsID8/IHNlc3Npb24udXNlci5lbWFpbFxuICAgICAgICBcbiAgICAgICAgLy8gRW5zdXJlIHVzZXIgSUQgaXMgYWx3YXlzIHByZXNlbnRcbiAgICAgICAgaWYgKCFzZXNzaW9uLnVzZXIuaWQgJiYgdG9rZW4uc3ViKSB7XG4gICAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uc3ViXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHNlc3Npb25cbiAgICB9LFxuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCB8fCAnZGlsaXRlY2gtZGV2LXNlY3JldC1rZXktMjAyNCcsXG4gIGRlYnVnOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jyxcbn1cbiJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiR29vZ2xlUHJvdmlkZXIiLCJQcmlzbWFBZGFwdGVyIiwiYmNyeXB0IiwicHJpc21hIiwiYnVpbGRQcm92aWRlcnMiLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiY29uc29sZSIsImVycm9yIiwibm9ybWFsaXplZEVtYWlsIiwidG9Mb3dlckNhc2UiLCJ0cmltIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlzUGFzc3dvcmRWYWxpZCIsImNvbXBhcmUiLCJpZCIsInJvbGUiLCJpbWFnZSIsImF2YXRhciIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJwdXNoIiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJhdXRob3JpemF0aW9uIiwicGFyYW1zIiwicHJvbXB0IiwiYWNjZXNzX3R5cGUiLCJyZXNwb25zZV90eXBlIiwid2FybiIsImF1dGhPcHRpb25zIiwiYWRhcHRlciIsInBhZ2VzIiwic2lnbkluIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwibWF4QWdlIiwidXBkYXRlQWdlIiwiand0IiwiY2FsbGJhY2tzIiwiYWNjb3VudCIsInByb2ZpbGUiLCJ0b2tlbiIsInN1YiIsImRiVXNlciIsInNlY3JldCIsIk5FWFRBVVRIX1NFQ1JFVCIsImRlYnVnIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/authOptions.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/logger.js":
/*!***************************!*\
  !*** ./src/lib/logger.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiError: () => (/* binding */ apiError),\n/* harmony export */   apiRequest: () => (/* binding */ apiRequest),\n/* harmony export */   dbError: () => (/* binding */ dbError),\n/* harmony export */   dbQuery: () => (/* binding */ dbQuery),\n/* harmony export */   debug: () => (/* binding */ debug),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   error: () => (/* binding */ error),\n/* harmony export */   info: () => (/* binding */ info),\n/* harmony export */   warn: () => (/* binding */ warn)\n/* harmony export */ });\n/**\n * Centralized logging utility\n * Replaces console.log/error/warn with proper logging\n */ const isDevelopment = \"development\" === 'development';\nconst isProduction = \"development\" === 'production';\nclass Logger {\n    constructor(){\n        this.logLevel = process.env.LOG_LEVEL || (isDevelopment ? 'debug' : 'info');\n    }\n    shouldLog(level) {\n        const levels = {\n            debug: 0,\n            info: 1,\n            warn: 2,\n            error: 3\n        };\n        return levels[level] >= levels[this.logLevel];\n    }\n    formatMessage(level, message, data = null) {\n        const timestamp = new Date().toISOString();\n        const prefix = `[${timestamp}] [${level.toUpperCase()}]`;\n        if (data) {\n            return {\n                timestamp,\n                level,\n                message,\n                data\n            };\n        }\n        return {\n            timestamp,\n            level,\n            message\n        };\n    }\n    debug(message, data = null) {\n        if (!this.shouldLog('debug')) return;\n        if (isDevelopment) {\n            console.debug(this.formatMessage('debug', message, data));\n        }\n    }\n    info(message, data = null) {\n        if (!this.shouldLog('info')) return;\n        if (isDevelopment) {\n            console.info(this.formatMessage('info', message, data));\n        } else {\n            // In production, send to logging service (e.g., Sentry, LogRocket)\n            // For now, we'll use console but structured\n            console.info(JSON.stringify(this.formatMessage('info', message, data)));\n        }\n    }\n    warn(message, data = null) {\n        if (!this.shouldLog('warn')) return;\n        const formatted = this.formatMessage('warn', message, data);\n        if (isDevelopment) {\n            console.warn(formatted);\n        } else {\n            console.warn(JSON.stringify(formatted));\n        // TODO: Send to error tracking service\n        }\n    }\n    error(message, error = null, data = null) {\n        if (!this.shouldLog('error')) return;\n        const formatted = {\n            ...this.formatMessage('error', message, data),\n            error: error ? {\n                message: error.message,\n                stack: error.stack,\n                name: error.name\n            } : null\n        };\n        if (isDevelopment) {\n            console.error(formatted);\n        } else {\n            console.error(JSON.stringify(formatted));\n        // TODO: Send to error tracking service (Sentry, etc.)\n        }\n    }\n    // API-specific logging\n    apiRequest(method, path, status, duration, userId = null) {\n        this.info('API Request', {\n            method,\n            path,\n            status,\n            duration: `${duration}ms`,\n            userId\n        });\n    }\n    apiError(method, path, error, userId = null) {\n        this.error('API Error', error, {\n            method,\n            path,\n            userId\n        });\n    }\n    // Database-specific logging\n    dbQuery(query, duration, params = null) {\n        if (isDevelopment && this.shouldLog('debug')) {\n            this.debug('Database Query', {\n                query: query.substring(0, 100),\n                duration: `${duration}ms`,\n                params\n            });\n        }\n    }\n    dbError(query, error) {\n        this.error('Database Error', error, {\n            query: query.substring(0, 100)\n        });\n    }\n}\n// Create singleton instance\nconst logger = new Logger();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (logger);\n// Export convenience methods\nconst { debug, info, warn, error, apiRequest, apiError, dbQuery, dbError } = logger;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVDLFNBQVMsSUFBSSxFQUFFO1FBQ3hELElBQUksQ0FBQ3RCLElBQUksQ0FBQyxlQUFlO1lBQ3ZCa0I7WUFDQUM7WUFDQUM7WUFDQUMsVUFBVSxHQUFHQSxTQUFTLEVBQUUsQ0FBQztZQUN6QkM7UUFDRjtJQUNGO0lBRUFDLFNBQVNMLE1BQU0sRUFBRUMsSUFBSSxFQUFFakIsS0FBSyxFQUFFb0IsU0FBUyxJQUFJLEVBQUU7UUFDM0MsSUFBSSxDQUFDcEIsS0FBSyxDQUFDLGFBQWFBLE9BQU87WUFDN0JnQjtZQUNBQztZQUNBRztRQUNGO0lBQ0Y7SUFFQSw0QkFBNEI7SUFDNUJFLFFBQVFDLEtBQUssRUFBRUosUUFBUSxFQUFFSyxTQUFTLElBQUksRUFBRTtRQUN0QyxJQUFJdEMsaUJBQWlCLElBQUksQ0FBQ1EsU0FBUyxDQUFDLFVBQVU7WUFDNUMsSUFBSSxDQUFDRyxLQUFLLENBQUMsa0JBQWtCO2dCQUMzQjBCLE9BQU9BLE1BQU1FLFNBQVMsQ0FBQyxHQUFHO2dCQUMxQk4sVUFBVSxHQUFHQSxTQUFTLEVBQUUsQ0FBQztnQkFDekJLO1lBQ0Y7UUFDRjtJQUNGO0lBRUFFLFFBQVFILEtBQUssRUFBRXZCLEtBQUssRUFBRTtRQUNwQixJQUFJLENBQUNBLEtBQUssQ0FBQyxrQkFBa0JBLE9BQU87WUFDbEN1QixPQUFPQSxNQUFNRSxTQUFTLENBQUMsR0FBRztRQUM1QjtJQUNGO0FBQ0Y7QUFFQSw0QkFBNEI7QUFDNUIsTUFBTUUsU0FBUyxJQUFJdEM7QUFFbkIsaUVBQWVzQyxNQUFNQSxFQUFBO0FBRXJCLDZCQUE2QjtBQUN0QixNQUFNLEVBQUU5QixLQUFLLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVlLFVBQVUsRUFBRU0sUUFBUSxFQUFFQyxPQUFPLEVBQUVJLE9BQU8sRUFBRSxHQUFHQyxPQUFNIiwic291cmNlcyI6WyIvVXNlcnMvdXNlci9EZXNrdG9wL1JvZ3VlQXBlL3dvcmsvamFiaXN0b3JlL3NyYy9saWIvbG9nZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2VudHJhbGl6ZWQgbG9nZ2luZyB1dGlsaXR5XG4gKiBSZXBsYWNlcyBjb25zb2xlLmxvZy9lcnJvci93YXJuIHdpdGggcHJvcGVyIGxvZ2dpbmdcbiAqL1xuXG5jb25zdCBpc0RldmVsb3BtZW50ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCdcbmNvbnN0IGlzUHJvZHVjdGlvbiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbidcblxuY2xhc3MgTG9nZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5sb2dMZXZlbCA9IHByb2Nlc3MuZW52LkxPR19MRVZFTCB8fCAoaXNEZXZlbG9wbWVudCA/ICdkZWJ1ZycgOiAnaW5mbycpXG4gIH1cblxuICBzaG91bGRMb2cobGV2ZWwpIHtcbiAgICBjb25zdCBsZXZlbHMgPSB7IGRlYnVnOiAwLCBpbmZvOiAxLCB3YXJuOiAyLCBlcnJvcjogMyB9XG4gICAgcmV0dXJuIGxldmVsc1tsZXZlbF0gPj0gbGV2ZWxzW3RoaXMubG9nTGV2ZWxdXG4gIH1cblxuICBmb3JtYXRNZXNzYWdlKGxldmVsLCBtZXNzYWdlLCBkYXRhID0gbnVsbCkge1xuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIGNvbnN0IHByZWZpeCA9IGBbJHt0aW1lc3RhbXB9XSBbJHtsZXZlbC50b1VwcGVyQ2FzZSgpfV1gXG4gICAgXG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHJldHVybiB7IHRpbWVzdGFtcCwgbGV2ZWwsIG1lc3NhZ2UsIGRhdGEgfVxuICAgIH1cbiAgICByZXR1cm4geyB0aW1lc3RhbXAsIGxldmVsLCBtZXNzYWdlIH1cbiAgfVxuXG4gIGRlYnVnKG1lc3NhZ2UsIGRhdGEgPSBudWxsKSB7XG4gICAgaWYgKCF0aGlzLnNob3VsZExvZygnZGVidWcnKSkgcmV0dXJuXG4gICAgXG4gICAgaWYgKGlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcodGhpcy5mb3JtYXRNZXNzYWdlKCdkZWJ1ZycsIG1lc3NhZ2UsIGRhdGEpKVxuICAgIH1cbiAgfVxuXG4gIGluZm8obWVzc2FnZSwgZGF0YSA9IG51bGwpIHtcbiAgICBpZiAoIXRoaXMuc2hvdWxkTG9nKCdpbmZvJykpIHJldHVyblxuICAgIFxuICAgIGlmIChpc0RldmVsb3BtZW50KSB7XG4gICAgICBjb25zb2xlLmluZm8odGhpcy5mb3JtYXRNZXNzYWdlKCdpbmZvJywgbWVzc2FnZSwgZGF0YSkpXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEluIHByb2R1Y3Rpb24sIHNlbmQgdG8gbG9nZ2luZyBzZXJ2aWNlIChlLmcuLCBTZW50cnksIExvZ1JvY2tldClcbiAgICAgIC8vIEZvciBub3csIHdlJ2xsIHVzZSBjb25zb2xlIGJ1dCBzdHJ1Y3R1cmVkXG4gICAgICBjb25zb2xlLmluZm8oSlNPTi5zdHJpbmdpZnkodGhpcy5mb3JtYXRNZXNzYWdlKCdpbmZvJywgbWVzc2FnZSwgZGF0YSkpKVxuICAgIH1cbiAgfVxuXG4gIHdhcm4obWVzc2FnZSwgZGF0YSA9IG51bGwpIHtcbiAgICBpZiAoIXRoaXMuc2hvdWxkTG9nKCd3YXJuJykpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0TWVzc2FnZSgnd2FybicsIG1lc3NhZ2UsIGRhdGEpXG4gICAgXG4gICAgaWYgKGlzRGV2ZWxvcG1lbnQpIHtcbiAgICAgIGNvbnNvbGUud2Fybihmb3JtYXR0ZWQpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihKU09OLnN0cmluZ2lmeShmb3JtYXR0ZWQpKVxuICAgICAgLy8gVE9ETzogU2VuZCB0byBlcnJvciB0cmFja2luZyBzZXJ2aWNlXG4gICAgfVxuICB9XG5cbiAgZXJyb3IobWVzc2FnZSwgZXJyb3IgPSBudWxsLCBkYXRhID0gbnVsbCkge1xuICAgIGlmICghdGhpcy5zaG91bGRMb2coJ2Vycm9yJykpIHJldHVyblxuICAgIFxuICAgIGNvbnN0IGZvcm1hdHRlZCA9IHtcbiAgICAgIC4uLnRoaXMuZm9ybWF0TWVzc2FnZSgnZXJyb3InLCBtZXNzYWdlLCBkYXRhKSxcbiAgICAgIGVycm9yOiBlcnJvciA/IHtcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgICBuYW1lOiBlcnJvci5uYW1lLFxuICAgICAgfSA6IG51bGwsXG4gICAgfVxuICAgIFxuICAgIGlmIChpc0RldmVsb3BtZW50KSB7XG4gICAgICBjb25zb2xlLmVycm9yKGZvcm1hdHRlZClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihKU09OLnN0cmluZ2lmeShmb3JtYXR0ZWQpKVxuICAgICAgLy8gVE9ETzogU2VuZCB0byBlcnJvciB0cmFja2luZyBzZXJ2aWNlIChTZW50cnksIGV0Yy4pXG4gICAgfVxuICB9XG5cbiAgLy8gQVBJLXNwZWNpZmljIGxvZ2dpbmdcbiAgYXBpUmVxdWVzdChtZXRob2QsIHBhdGgsIHN0YXR1cywgZHVyYXRpb24sIHVzZXJJZCA9IG51bGwpIHtcbiAgICB0aGlzLmluZm8oJ0FQSSBSZXF1ZXN0Jywge1xuICAgICAgbWV0aG9kLFxuICAgICAgcGF0aCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGR1cmF0aW9uOiBgJHtkdXJhdGlvbn1tc2AsXG4gICAgICB1c2VySWQsXG4gICAgfSlcbiAgfVxuXG4gIGFwaUVycm9yKG1ldGhvZCwgcGF0aCwgZXJyb3IsIHVzZXJJZCA9IG51bGwpIHtcbiAgICB0aGlzLmVycm9yKCdBUEkgRXJyb3InLCBlcnJvciwge1xuICAgICAgbWV0aG9kLFxuICAgICAgcGF0aCxcbiAgICAgIHVzZXJJZCxcbiAgICB9KVxuICB9XG5cbiAgLy8gRGF0YWJhc2Utc3BlY2lmaWMgbG9nZ2luZ1xuICBkYlF1ZXJ5KHF1ZXJ5LCBkdXJhdGlvbiwgcGFyYW1zID0gbnVsbCkge1xuICAgIGlmIChpc0RldmVsb3BtZW50ICYmIHRoaXMuc2hvdWxkTG9nKCdkZWJ1ZycpKSB7XG4gICAgICB0aGlzLmRlYnVnKCdEYXRhYmFzZSBRdWVyeScsIHtcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LnN1YnN0cmluZygwLCAxMDApLCAvLyBUcnVuY2F0ZSBsb25nIHF1ZXJpZXNcbiAgICAgICAgZHVyYXRpb246IGAke2R1cmF0aW9ufW1zYCxcbiAgICAgICAgcGFyYW1zLFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBkYkVycm9yKHF1ZXJ5LCBlcnJvcikge1xuICAgIHRoaXMuZXJyb3IoJ0RhdGFiYXNlIEVycm9yJywgZXJyb3IsIHtcbiAgICAgIHF1ZXJ5OiBxdWVyeS5zdWJzdHJpbmcoMCwgMTAwKSxcbiAgICB9KVxuICB9XG59XG5cbi8vIENyZWF0ZSBzaW5nbGV0b24gaW5zdGFuY2VcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoKVxuXG5leHBvcnQgZGVmYXVsdCBsb2dnZXJcblxuLy8gRXhwb3J0IGNvbnZlbmllbmNlIG1ldGhvZHNcbmV4cG9ydCBjb25zdCB7IGRlYnVnLCBpbmZvLCB3YXJuLCBlcnJvciwgYXBpUmVxdWVzdCwgYXBpRXJyb3IsIGRiUXVlcnksIGRiRXJyb3IgfSA9IGxvZ2dlclxuXG4iXSwibmFtZXMiOlsiaXNEZXZlbG9wbWVudCIsInByb2Nlc3MiLCJpc1Byb2R1Y3Rpb24iLCJMb2dnZXIiLCJjb25zdHJ1Y3RvciIsImxvZ0xldmVsIiwiZW52IiwiTE9HX0xFVkVMIiwic2hvdWxkTG9nIiwibGV2ZWwiLCJsZXZlbHMiLCJkZWJ1ZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJmb3JtYXRNZXNzYWdlIiwibWVzc2FnZSIsImRhdGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwcmVmaXgiLCJ0b1VwcGVyQ2FzZSIsImNvbnNvbGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZm9ybWF0dGVkIiwic3RhY2siLCJuYW1lIiwiYXBpUmVxdWVzdCIsIm1ldGhvZCIsInBhdGgiLCJzdGF0dXMiLCJkdXJhdGlvbiIsInVzZXJJZCIsImFwaUVycm9yIiwiZGJRdWVyeSIsInF1ZXJ5IiwicGFyYW1zIiwic3Vic3RyaW5nIiwiZGJFcnJvciIsImxvZ2dlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/logger.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/middleware/rateLimiter.js":
/*!*******************************************!*\
  !*** ./src/lib/middleware/rateLimiter.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiRateLimiter: () => (/* binding */ apiRateLimiter),\n/* harmony export */   authRateLimiter: () => (/* binding */ authRateLimiter),\n/* harmony export */   createRateLimiter: () => (/* binding */ createRateLimiter),\n/* harmony export */   paymentRateLimiter: () => (/* binding */ paymentRateLimiter)\n/* harmony export */ });\n/**\n * Rate limiting middleware for API routes\n * Prevents abuse and DDoS attacks\n */ // In-memory store (use Redis in production)\nconst requestStore = new Map();\n// Clean up old entries every 5 minutes\nsetInterval(()=>{\n    const now = Date.now();\n    for (const [key, value] of requestStore.entries()){\n        if (now - value.resetTime > 0) {\n            requestStore.delete(key);\n        }\n    }\n}, 5 * 60 * 1000);\nfunction createRateLimiter(options = {}) {\n    const { windowMs = 15 * 60 * 1000, max = 100, message = 'Too many requests, please try again later.', skipSuccessfulRequests = false, skipFailedRequests = false } = options;\n    return async (request)=>{\n        // Get client IP\n        const forwarded = request.headers.get('x-forwarded-for');\n        const realIp = request.headers.get('x-real-ip');\n        const ip = forwarded?.split(',')[0] || realIp || 'unknown';\n        const key = `rate_limit:${ip}`;\n        const now = Date.now();\n        const record = requestStore.get(key);\n        if (record) {\n            if (now < record.resetTime) {\n                // Still in the window\n                record.count++;\n                if (record.count > max) {\n                    return {\n                        success: false,\n                        error: message,\n                        retryAfter: Math.ceil((record.resetTime - now) / 1000),\n                        status: 429\n                    };\n                }\n            } else {\n                // Window expired, reset\n                record.count = 1;\n                record.resetTime = now + windowMs;\n            }\n        } else {\n            // First request\n            requestStore.set(key, {\n                count: 1,\n                resetTime: now + windowMs\n            });\n        }\n        return {\n            success: true\n        };\n    };\n}\n// Pre-configured rate limiters\nconst apiRateLimiter = createRateLimiter({\n    windowMs: 15 * 60 * 1000,\n    max: 100\n});\nconst authRateLimiter = createRateLimiter({\n    windowMs: 15 * 60 * 1000,\n    max: 5,\n    message: 'Too many login attempts, please try again later.'\n});\nconst paymentRateLimiter = createRateLimiter({\n    windowMs: 60 * 1000,\n    max: 3,\n    message: 'Too many payment attempts, please wait a moment.'\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21pZGRsZXdhcmUvcmF0ZUxpbWl0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Q0FHQyxHQUVELDRDQUE0QztBQUM1QyxNQUFNQSxlQUFlLElBQUlDO0FBRXpCLHVDQUF1QztBQUN2Q0MsWUFBWTtJQUNWLE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7SUFDcEIsS0FBSyxNQUFNLENBQUNFLEtBQUtDLE1BQU0sSUFBSU4sYUFBYU8sT0FBTyxHQUFJO1FBQ2pELElBQUlKLE1BQU1HLE1BQU1FLFNBQVMsR0FBRyxHQUFHO1lBQzdCUixhQUFhUyxNQUFNLENBQUNKO1FBQ3RCO0lBQ0Y7QUFDRixHQUFHLElBQUksS0FBSztBQUVMLFNBQVNLLGtCQUFrQkMsVUFBVSxDQUFDLENBQUM7SUFDNUMsTUFBTSxFQUNKQyxXQUFXLEtBQUssS0FBSyxJQUFJLEVBQ3pCQyxNQUFNLEdBQUcsRUFDVEMsVUFBVSw0Q0FBNEMsRUFDdERDLHlCQUF5QixLQUFLLEVBQzlCQyxxQkFBcUIsS0FBSyxFQUMzQixHQUFHTDtJQUVKLE9BQU8sT0FBT007UUFDWixnQkFBZ0I7UUFDaEIsTUFBTUMsWUFBWUQsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7UUFDdEMsTUFBTUMsU0FBU0osUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7UUFDbkMsTUFBTUUsS0FBS0osV0FBV0ssTUFBTSxJQUFJLENBQUMsRUFBRSxJQUFJRixVQUFVO1FBRWpELE1BQU1oQixNQUFNLENBQUMsV0FBVyxFQUFFaUIsSUFBSTtRQUM5QixNQUFNbkIsTUFBTUMsS0FBS0QsR0FBRztRQUNwQixNQUFNcUIsU0FBU3hCLGFBQWFvQixHQUFHLENBQUNmO1FBRWhDLElBQUltQixRQUFRO1lBQ1YsSUFBSXJCLE1BQU1xQixPQUFPaEIsU0FBUyxFQUFFO2dCQUMxQixzQkFBc0I7Z0JBQ3RCZ0IsT0FBT0MsS0FBSztnQkFFWixJQUFJRCxPQUFPQyxLQUFLLEdBQUdaLEtBQUs7b0JBQ3RCLE9BQU87d0JBQ0xhLFNBQVM7d0JBQ1RDLE9BQU9iO3dCQUNQYyxZQUFZQyxLQUFLQyxJQUFJLENBQUMsQ0FBQ04sT0FBT2hCLFNBQVMsR0FBR0wsR0FBRSxJQUFLO3dCQUNqRDRCLFFBQVE7b0JBQ1Y7Z0JBQ0Y7WUFDRixPQUFPO2dCQUNMLHdCQUF3QjtnQkFDeEJQLE9BQU9DLEtBQUssR0FBRztnQkFDZkQsT0FBT2hCLFNBQVMsR0FBR0wsTUFBTVM7WUFDM0I7UUFDRixPQUFPO1lBQ0wsZ0JBQWdCO1lBQ2hCWixhQUFhZ0MsR0FBRyxDQUFDM0IsS0FBSztnQkFDcEJvQixPQUFPO2dCQUNQakIsV0FBV0wsTUFBTVM7WUFDbkI7UUFDRjtRQUVBLE9BQU87WUFBRWMsU0FBUztRQUFLO0lBQ3pCO0FBQ0Y7QUFFQSwrQkFBK0I7QUFDeEIsTUFBTU8saUJBQWlCdkIsa0JBQWtCO0lBQzlDRSxVQUFVLEtBQUssS0FBSztJQUNwQkMsS0FBSztBQUNQLEdBQUU7QUFFSyxNQUFNcUIsa0JBQWtCeEIsa0JBQWtCO0lBQy9DRSxVQUFVLEtBQUssS0FBSztJQUNwQkMsS0FBSztJQUNMQyxTQUFTO0FBQ1gsR0FBRTtBQUVLLE1BQU1xQixxQkFBcUJ6QixrQkFBa0I7SUFDbERFLFVBQVUsS0FBSztJQUNmQyxLQUFLO0lBQ0xDLFNBQVM7QUFDWCxHQUFFIiwic291cmNlcyI6WyIvVXNlcnMvdXNlci9EZXNrdG9wL1JvZ3VlQXBlL3dvcmsvamFiaXN0b3JlL3NyYy9saWIvbWlkZGxld2FyZS9yYXRlTGltaXRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJhdGUgbGltaXRpbmcgbWlkZGxld2FyZSBmb3IgQVBJIHJvdXRlc1xuICogUHJldmVudHMgYWJ1c2UgYW5kIEREb1MgYXR0YWNrc1xuICovXG5cbi8vIEluLW1lbW9yeSBzdG9yZSAodXNlIFJlZGlzIGluIHByb2R1Y3Rpb24pXG5jb25zdCByZXF1ZXN0U3RvcmUgPSBuZXcgTWFwKClcblxuLy8gQ2xlYW4gdXAgb2xkIGVudHJpZXMgZXZlcnkgNSBtaW51dGVzXG5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgcmVxdWVzdFN0b3JlLmVudHJpZXMoKSkge1xuICAgIGlmIChub3cgLSB2YWx1ZS5yZXNldFRpbWUgPiAwKSB7XG4gICAgICByZXF1ZXN0U3RvcmUuZGVsZXRlKGtleSlcbiAgICB9XG4gIH1cbn0sIDUgKiA2MCAqIDEwMDApXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSYXRlTGltaXRlcihvcHRpb25zID0ge30pIHtcbiAgY29uc3Qge1xuICAgIHdpbmRvd01zID0gMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0ZXNcbiAgICBtYXggPSAxMDAsIC8vIGxpbWl0IGVhY2ggSVAgdG8gMTAwIHJlcXVlc3RzIHBlciB3aW5kb3dNc1xuICAgIG1lc3NhZ2UgPSAnVG9vIG1hbnkgcmVxdWVzdHMsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICBza2lwU3VjY2Vzc2Z1bFJlcXVlc3RzID0gZmFsc2UsXG4gICAgc2tpcEZhaWxlZFJlcXVlc3RzID0gZmFsc2UsXG4gIH0gPSBvcHRpb25zXG5cbiAgcmV0dXJuIGFzeW5jIChyZXF1ZXN0KSA9PiB7XG4gICAgLy8gR2V0IGNsaWVudCBJUFxuICAgIGNvbnN0IGZvcndhcmRlZCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpXG4gICAgY29uc3QgcmVhbElwID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1yZWFsLWlwJylcbiAgICBjb25zdCBpcCA9IGZvcndhcmRlZD8uc3BsaXQoJywnKVswXSB8fCByZWFsSXAgfHwgJ3Vua25vd24nXG5cbiAgICBjb25zdCBrZXkgPSBgcmF0ZV9saW1pdDoke2lwfWBcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpXG4gICAgY29uc3QgcmVjb3JkID0gcmVxdWVzdFN0b3JlLmdldChrZXkpXG5cbiAgICBpZiAocmVjb3JkKSB7XG4gICAgICBpZiAobm93IDwgcmVjb3JkLnJlc2V0VGltZSkge1xuICAgICAgICAvLyBTdGlsbCBpbiB0aGUgd2luZG93XG4gICAgICAgIHJlY29yZC5jb3VudCsrXG4gICAgICAgIFxuICAgICAgICBpZiAocmVjb3JkLmNvdW50ID4gbWF4KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IG1lc3NhZ2UsXG4gICAgICAgICAgICByZXRyeUFmdGVyOiBNYXRoLmNlaWwoKHJlY29yZC5yZXNldFRpbWUgLSBub3cpIC8gMTAwMCksXG4gICAgICAgICAgICBzdGF0dXM6IDQyOSxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFdpbmRvdyBleHBpcmVkLCByZXNldFxuICAgICAgICByZWNvcmQuY291bnQgPSAxXG4gICAgICAgIHJlY29yZC5yZXNldFRpbWUgPSBub3cgKyB3aW5kb3dNc1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGaXJzdCByZXF1ZXN0XG4gICAgICByZXF1ZXN0U3RvcmUuc2V0KGtleSwge1xuICAgICAgICBjb3VudDogMSxcbiAgICAgICAgcmVzZXRUaW1lOiBub3cgKyB3aW5kb3dNcyxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gIH1cbn1cblxuLy8gUHJlLWNvbmZpZ3VyZWQgcmF0ZSBsaW1pdGVyc1xuZXhwb3J0IGNvbnN0IGFwaVJhdGVMaW1pdGVyID0gY3JlYXRlUmF0ZUxpbWl0ZXIoe1xuICB3aW5kb3dNczogMTUgKiA2MCAqIDEwMDAsIC8vIDE1IG1pbnV0ZXNcbiAgbWF4OiAxMDAsIC8vIDEwMCByZXF1ZXN0cyBwZXIgMTUgbWludXRlc1xufSlcblxuZXhwb3J0IGNvbnN0IGF1dGhSYXRlTGltaXRlciA9IGNyZWF0ZVJhdGVMaW1pdGVyKHtcbiAgd2luZG93TXM6IDE1ICogNjAgKiAxMDAwLCAvLyAxNSBtaW51dGVzXG4gIG1heDogNSwgLy8gNSBsb2dpbiBhdHRlbXB0cyBwZXIgMTUgbWludXRlc1xuICBtZXNzYWdlOiAnVG9vIG1hbnkgbG9naW4gYXR0ZW1wdHMsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbn0pXG5cbmV4cG9ydCBjb25zdCBwYXltZW50UmF0ZUxpbWl0ZXIgPSBjcmVhdGVSYXRlTGltaXRlcih7XG4gIHdpbmRvd01zOiA2MCAqIDEwMDAsIC8vIDEgbWludXRlXG4gIG1heDogMywgLy8gMyBwYXltZW50IGF0dGVtcHRzIHBlciBtaW51dGVcbiAgbWVzc2FnZTogJ1RvbyBtYW55IHBheW1lbnQgYXR0ZW1wdHMsIHBsZWFzZSB3YWl0IGEgbW9tZW50LicsXG59KVxuXG4iXSwibmFtZXMiOlsicmVxdWVzdFN0b3JlIiwiTWFwIiwic2V0SW50ZXJ2YWwiLCJub3ciLCJEYXRlIiwia2V5IiwidmFsdWUiLCJlbnRyaWVzIiwicmVzZXRUaW1lIiwiZGVsZXRlIiwiY3JlYXRlUmF0ZUxpbWl0ZXIiLCJvcHRpb25zIiwid2luZG93TXMiLCJtYXgiLCJtZXNzYWdlIiwic2tpcFN1Y2Nlc3NmdWxSZXF1ZXN0cyIsInNraXBGYWlsZWRSZXF1ZXN0cyIsInJlcXVlc3QiLCJmb3J3YXJkZWQiLCJoZWFkZXJzIiwiZ2V0IiwicmVhbElwIiwiaXAiLCJzcGxpdCIsInJlY29yZCIsImNvdW50Iiwic3VjY2VzcyIsImVycm9yIiwicmV0cnlBZnRlciIsIk1hdGgiLCJjZWlsIiwic3RhdHVzIiwic2V0IiwiYXBpUmF0ZUxpbWl0ZXIiLCJhdXRoUmF0ZUxpbWl0ZXIiLCJwYXltZW50UmF0ZUxpbWl0ZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/middleware/rateLimiter.js\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.js":
/*!***************************!*\
  !*** ./src/lib/prisma.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectDB: () => (/* binding */ connectDB),\n/* harmony export */   disconnectDB: () => (/* binding */ disconnectDB),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\n// Enhanced Prisma client with performance optimizations\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        'query',\n        'info',\n        'warn',\n        'error'\n    ] : 0,\n    datasources: {\n        db: {\n            url: process.env.DATABASE_URL\n        }\n    }\n});\nif (true) globalForPrisma.prisma = prisma;\n// Connection management\nasync function connectDB() {\n    try {\n        await prisma.$connect();\n        console.log(' Database connected successfully');\n    } catch (error) {\n        console.error(' Database connection failed:', error);\n        throw error;\n    }\n}\nasync function disconnectDB() {\n    try {\n        await prisma.$disconnect();\n        console.log(' Database disconnected successfully');\n    } catch (error) {\n        console.error(' Database disconnection failed:', error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBRXhCLHdEQUF3RDtBQUNqRCxNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBS0MsS0FBc0MsR0FBRztRQUFDO1FBQVM7UUFBUTtRQUFRO0tBQVEsR0FBRyxDQUFTO0lBQzVGQyxhQUFhO1FBQ1hDLElBQUk7WUFDRkMsS0FBS0gsUUFBUUksR0FBRyxDQUFDQyxZQUFZO1FBQy9CO0lBQ0Y7QUFDRixHQUFFO0FBRUosSUFBSUwsSUFBcUMsRUFBRUosZ0JBQWdCRSxNQUFNLEdBQUdBO0FBRXBFLHdCQUF3QjtBQUNqQixlQUFlUTtJQUNwQixJQUFJO1FBQ0YsTUFBTVIsT0FBT1MsUUFBUTtRQUNyQkMsUUFBUVQsR0FBRyxDQUFDO0lBQ2QsRUFBRSxPQUFPVSxPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQyxpQ0FBaUNBO1FBQy9DLE1BQU1BO0lBQ1I7QUFDRjtBQUVPLGVBQWVDO0lBQ3BCLElBQUk7UUFDRixNQUFNWixPQUFPYSxXQUFXO1FBQ3hCSCxRQUFRVCxHQUFHLENBQUM7SUFDZCxFQUFFLE9BQU9VLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLG9DQUFvQ0E7SUFDcEQ7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3VzZXIvRGVza3RvcC9Sb2d1ZUFwZS93b3JrL2phYmlzdG9yZS9zcmMvbGliL3ByaXNtYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpc1xuXG4vLyBFbmhhbmNlZCBQcmlzbWEgY2xpZW50IHdpdGggcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uc1xuZXhwb3J0IGNvbnN0IHByaXNtYSA9XG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPz9cbiAgbmV3IFByaXNtYUNsaWVudCh7XG4gICAgbG9nOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IFsncXVlcnknLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJ10gOiBbJ2Vycm9yJ10sXG4gICAgZGF0YXNvdXJjZXM6IHtcbiAgICAgIGRiOiB7XG4gICAgICAgIHVybDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMLFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYVxuXG4vLyBDb25uZWN0aW9uIG1hbmFnZW1lbnRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0REIoKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgcHJpc21hLiRjb25uZWN0KClcbiAgICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHknKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaXNjb25uZWN0REIoKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgcHJpc21hLiRkaXNjb25uZWN0KClcbiAgICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIGRpc2Nvbm5lY3RlZCBzdWNjZXNzZnVsbHknKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBEYXRhYmFzZSBkaXNjb25uZWN0aW9uIGZhaWxlZDonLCBlcnJvcilcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIiwiZGF0YXNvdXJjZXMiLCJkYiIsInVybCIsImVudiIsIkRBVEFCQVNFX1VSTCIsImNvbm5lY3REQiIsIiRjb25uZWN0IiwiY29uc29sZSIsImVycm9yIiwiZGlzY29ubmVjdERCIiwiJGRpc2Nvbm5lY3QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/@next-auth","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/@panva","vendor-chunks/oidc-token-hash"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fadmin%2Fstats%2Froute&page=%2Fapi%2Fadmin%2Fstats%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fstats%2Froute.js&appDir=%2FUsers%2Fuser%2FDesktop%2FRogueApe%2Fwork%2Fjabistore%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fuser%2FDesktop%2FRogueApe%2Fwork%2Fjabistore&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();