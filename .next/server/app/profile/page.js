(()=>{var e={};e.id=6636,e.ids=[6636],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},38828:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=t(70260),a=t(28203),l=t(25155),i=t.n(l),d=t(67292),n={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let o=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,65187)),"/Users/user/Desktop/RogueApe/work/jabistore/src/app/profile/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,62804)),"/Users/user/Desktop/RogueApe/work/jabistore/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/user/Desktop/RogueApe/work/jabistore/src/app/profile/page.js"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},80925:(e,s,t)=>{Promise.resolve().then(t.bind(t,65187))},76189:(e,s,t)=>{Promise.resolve().then(t.bind(t,34719))},34719:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(45512),a=t(58009),l=t(28531),i=t.n(l),d=t(90993),n=t(80513),o=t(79420),c=t(9031),x=t(42701);function m(){let{data:e,status:s}=(0,d.useSession)(),{data:t,loading:l,removeFromWishlist:m}=(0,n.nU)(),{data:h,loading:u}=(0,n.h)(),[p,g]=(0,a.useState)("overview"),[b,y]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),[f,v]=(0,a.useState)(""),[w,A]=(0,a.useState)(""),[C,k]=(0,a.useState)([]),[S,E]=(0,a.useState)(!1),[D,P]=(0,a.useState)(""),[L,R]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",country:"",zipCode:""}),M=Array.isArray(h)?h.length:0,K=Array.isArray(h)?h.reduce((e,s)=>"COMPLETED"===s.paymentStatus&&"number"==typeof s.total?e+s.total:e,0):0,I=Array.isArray(t)?t.length:0,B=e=>{R({...L,[e.target.name]:e.target.value})},$=async()=>{v(""),A(""),N(!0);try{let e=[L.firstName,L.lastName].filter(Boolean).join(" ").trim(),s=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({name:e||void 0,phone:L.phone||null})}),t=await s.json().catch(()=>({}));if(!s.ok||!t?.success){v(t?.message||"Failed to update profile");return}let r=t.data?.user||{},a=(r.name||e).split(" ").filter(Boolean);R(e=>({...e,firstName:a[0]||"",lastName:a.slice(1).join(" ")||"",email:r.email||e.email,phone:r.phone||""})),A("Profile updated successfully"),y(!1)}catch(e){console.error("Failed to update profile",e),v("Failed to update profile")}finally{N(!1)}};return"loading"===s?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(o.k,{size:"lg"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})})}):e?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50 to-white",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"relative overflow-hidden rounded-[36px] border-2 border-gray-200 bg-gradient-to-br from-blue-50 via-white to-blue-100 p-8 mb-8 shadow-lg",children:[(0,r.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,r.jsx)("div",{className:"absolute -top-24 left-10 h-72 w-72 rounded-full bg-blue-300/30 blur-3xl"}),(0,r.jsx)("div",{className:"absolute -bottom-32 right-0 h-80 w-80 rounded-full bg-indigo-300/25 blur-3xl"})]}),(0,r.jsxs)("div",{className:"relative z-10 flex items-center space-x-6",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-blue-900 rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:(0,r.jsx)("span",{className:"text-3xl font-black text-white",children:L.firstName?.[0]||e.user.email?.[0]?.toUpperCase()||"U"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-black mb-2 text-gray-900",children:L.firstName&&L.lastName?`${L.firstName} ${L.lastName}`:e.user.name||e.user.email}),(0,r.jsx)("p",{className:"text-gray-600 mb-1 font-medium",children:e.user.email}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,r.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded-full font-bold",children:"ADMIN"===e.user.role?"\uD83D\uDC51 Admin":"\uD83D\uDC64 Customer"}),(0,r.jsx)("span",{className:"bg-gray-100 text-gray-900 px-3 py-1 rounded-full font-bold border-2 border-gray-200",children:"Member since 2024"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-3xl shadow-lg border-2 border-gray-200 mb-8",children:[(0,r.jsx)("div",{className:"border-b-2 border-gray-100",children:(0,r.jsx)("nav",{className:"-mb-px flex space-x-8 px-6 overflow-x-auto",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"personal",label:"Personal Info",icon:"\uD83D\uDC64"},{id:"orders",label:"Order History",icon:"\uD83D\uDCE6"},{id:"reservations",label:"Reservations",icon:"\uD83D\uDCC5"},{id:"wishlist",label:"Wishlist",icon:"❤️"},{id:"settings",label:"Settings",icon:"⚙️"}].map(e=>(0,r.jsxs)("button",{onClick:()=>g(e.id),className:`py-4 px-1 border-b-2 font-bold text-sm flex items-center space-x-2 whitespace-nowrap transition-colors ${p===e.id?"border-blue-900 text-blue-900 bg-blue-50":"border-transparent text-gray-600 hover:text-blue-900 hover:border-blue-300"}`,children:[(0,r.jsx)("span",{children:e.icon}),(0,r.jsx)("span",{children:e.label})]},e.id))})}),(0,r.jsxs)("div",{className:"p-6",children:[f&&(0,r.jsx)("div",{className:"mb-4 rounded-md bg-red-50 border border-red-200 px-4 py-3 text-sm text-red-700",children:f}),"reservations"===p&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"My Reservations"})}),D&&(0,r.jsx)("div",{className:"rounded-md bg-red-50 border border-red-200 px-4 py-3 text-sm text-red-700",children:D}),S?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)(o.k,{})}):C&&C.length>0?(0,r.jsx)("div",{className:"space-y-4",children:C.map(e=>{let s=new Date(e.reservedFor),t=!(s.getTime()<Date.now())&&"CANCELLED"!==e.status&&"COMPLETED"!==e.status&&"NO_SHOW"!==e.status;return(0,r.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:e.guestName}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Party of ",e.partySize]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:s.toLocaleString("en-KE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.table?.name?`Table ${e.table.name}`:"No specific table assigned"}),e.notes&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Notes: ",e.notes]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 justify-between md:justify-end",children:[(0,r.jsx)("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium
                                ${"CONFIRMED"===e.status?"bg-green-100 text-green-800":""}
                                ${"PENDING"===e.status?"bg-yellow-100 text-yellow-800":""}
                                ${"SEATED"===e.status?"bg-blue-100 text-blue-800":""}
                                ${"COMPLETED"===e.status?"bg-gray-100 text-gray-800":""}
                                ${"CANCELLED"===e.status?"bg-red-100 text-red-800":""}
                                ${"NO_SHOW"===e.status?"bg-orange-100 text-orange-800":""}
                              `.trim(),children:e.status}),t&&(0,r.jsx)("button",{onClick:()=>handleCancelReservation(e.id),className:"text-sm font-medium text-red-600 hover:text-red-700 border border-red-200 px-3 py-1.5 rounded-lg bg-white hover:bg-red-50 disabled:opacity-60 disabled:cursor-not-allowed",disabled:S,children:"Cancel"})]})]},e.id)})}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCC5"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reservations yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any upcoming reservations."})]})]}),w&&(0,r.jsx)("div",{className:"mb-4 rounded-md bg-green-50 border border-green-200 px-4 py-3 text-sm text-green-700",children:w}),"overview"===p&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Account Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 font-bold mb-1",children:"Total Orders"}),(0,r.jsx)("p",{className:"text-3xl font-black text-blue-900",children:u?"–":M})]}),(0,r.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCE6"})]})}),(0,r.jsx)("div",{className:"bg-white border-2 border-emerald-200 rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 font-bold mb-1",children:"Total Spent"}),(0,r.jsx)("p",{className:"text-3xl font-black text-emerald-900",children:u?"–":(0,x.L)(K)})]}),(0,r.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCB0"})]})}),(0,r.jsx)("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600 font-bold mb-1",children:"Wishlist Items"}),(0,r.jsx)("p",{className:"text-3xl font-black text-blue-900",children:l?"–":I})]}),(0,r.jsx)("div",{className:"text-4xl",children:"❤️"})]})})]}),(0,r.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 shadow-md",children:[(0,r.jsx)("h3",{className:"text-lg font-black text-gray-900 mb-4",children:"Recent Activity"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-emerald-600 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-gray-900 font-medium",children:"Order #FH-2024-001 delivered successfully"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"2 days ago"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-900 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-gray-900 font-medium",children:"Added Smart Home Hub to wishlist"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"5 days ago"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-900 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-gray-900 font-medium",children:"Profile updated"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"1 week ago"})]})]})]})]}),"personal"===p&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Personal Information"}),(0,r.jsx)("button",{onClick:()=>y(!b),className:"bg-blue-900 text-white px-4 py-2 rounded-xl hover:bg-blue-800 transition-colors font-bold shadow-md hover:shadow-lg",children:b?"Cancel":"Edit"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),b?(0,r.jsx)("input",{type:"text",name:"firstName",value:L.firstName,onChange:B,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,r.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:L.firstName||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),b?(0,r.jsx)("input",{type:"text",name:"lastName",value:L.lastName,onChange:B,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,r.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:L.lastName||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,r.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:L.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),b?(0,r.jsx)("input",{type:"tel",name:"phone",value:L.phone,onChange:B,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,r.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:L.phone||"Not provided"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),b?(0,r.jsx)("input",{type:"text",name:"address",value:L.address,onChange:B,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,r.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:L.address||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),b?(0,r.jsx)("input",{type:"text",name:"city",value:L.city,onChange:B,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,r.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:L.city||"Not provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),b?(0,r.jsx)("input",{type:"text",name:"country",value:L.country,onChange:B,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,r.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:L.country||"Not provided"})]})]}),b&&(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:$,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl hover:bg-emerald-700 transition-colors font-bold shadow-md hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed",disabled:j,children:j?"Saving...":"Save Changes"}),(0,r.jsx)("button",{onClick:()=>y(!1),className:"bg-gray-100 text-gray-900 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors font-bold border-2 border-gray-300",children:"Cancel"})]})]}),"orders"===p&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Order History"}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:u?(0,r.jsx)("div",{className:"flex justify-center py-8",children:(0,r.jsx)(o.k,{})}):h&&h.length>0?(0,r.jsx)("div",{className:"space-y-6",children:h.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-semibold text-lg text-gray-900",children:["Order #",e.id.slice(-8)]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Placed on ",new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Payment: ","mpesa"===e.paymentMethod?"M-Pesa":e.paymentMethod||"N/A"]}),(0,r.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${"COMPLETED"===e.paymentStatus?"bg-green-100 text-green-800":"PENDING"===e.paymentStatus?"bg-yellow-100 text-yellow-800":"FAILED"===e.paymentStatus?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.paymentStatus||"PENDING"}),e.mpesaReceiptNumber&&(0,r.jsxs)("span",{className:"text-xs text-green-600 font-mono",children:["Receipt: ",e.mpesaReceiptNumber]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-bold text-xl text-gray-900",children:["KSh ",e.total?.toLocaleString()||"0"]}),(0,r.jsx)("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${"DELIVERED"===e.status?"bg-green-100 text-green-800":"SHIPPED"===e.status?"bg-blue-100 text-blue-800":"PROCESSING"===e.status?"bg-yellow-100 text-yellow-800":"PENDING"===e.status?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:e.status})]})]}),e.shippingAddress&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Shipping Address"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[e.shippingAddress.firstName," ",e.shippingAddress.lastName,(0,r.jsx)("br",{}),e.shippingAddress.address,(0,r.jsx)("br",{}),e.shippingAddress.city,", ",e.shippingAddress.state," ",e.shippingAddress.zipCode,(0,r.jsx)("br",{}),e.shippingAddress.country]})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,r.jsxs)("h4",{className:"font-medium text-gray-900",children:["Items (",e.items?.length||0,")"]}),e.items?.map(e=>r.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"w-16 h-16 bg-white rounded-lg overflow-hidden border",children:r.jsx(c.OptimizedImage,{src:e.product?.images?.[0]?.url||"/placeholder-product.jpg",alt:e.product?.name||"Product",width:64,height:64,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.product?.name||"Unknown Product"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[e.product?.brand?.name," • ",e.product?.category?.name]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",e.quantity," \xd7 KSh ",e.price?.toLocaleString()||"0"]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-semibold text-gray-900",children:["KSh ",((e.price||0)*e.quantity).toLocaleString()]})})]},e.id))]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["KSh ",(e.items?.reduce((e,s)=>e+s.price*s.quantity,0)||0).toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,r.jsx)("span",{className:"text-gray-900",children:"KSh 500"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Tax (16%)"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["KSh ",Math.round(.16*(e.total||0)/1.16).toLocaleString()]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-semibold text-lg border-t pt-2",children:[(0,r.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,r.jsxs)("span",{className:"text-gray-900",children:["KSh ",e.total?.toLocaleString()||"0"]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(i(),{href:`/orders/${e.id}`,className:"bg-blue-900 text-white px-4 py-2 rounded-xl hover:bg-blue-800 transition-colors text-sm font-bold shadow-md hover:shadow-lg",children:"Track Order"}),(0,r.jsx)("button",{className:"border-2 border-blue-900 text-blue-900 px-4 py-2 rounded-xl hover:bg-blue-50 transition-colors text-sm font-bold",children:"Reorder Items"})]}),"DELIVERED"===e.status&&(0,r.jsx)("button",{className:"text-blue-900 hover:text-blue-700 text-sm font-bold",children:"Leave Review"})]})]})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Start shopping to see your order history here"}),(0,r.jsx)(i(),{href:"/products",className:"bg-blue-900 text-white px-6 py-3 rounded-xl hover:bg-blue-800 transition-colors font-bold shadow-lg hover:shadow-xl",children:"Browse Products"})]})})]}),"wishlist"===p&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"My Wishlist"}),l?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(o.k,{size:"lg"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading wishlist..."})]}):t&&t.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,r.jsx)(c.OptimizedImage,{src:e.product?.images?.[0]?.url,alt:e.product?.name,width:200,height:200,className:"w-full aspect-square object-cover rounded-lg mb-4"}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:e.product?.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.product?.brand?.name}),(0,r.jsx)("div",{className:"flex items-center space-x-2 mb-4",children:e.product?.originalPrice&&e.product?.originalPrice>e.product?.price?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-lg font-black text-blue-900",children:(0,x.L)(e.product?.price)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 line-through",children:(0,x.L)(e.product?.originalPrice)})]}):(0,r.jsx)("span",{className:"text-lg font-black text-blue-900",children:(0,x.L)(e.product?.price)})}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(i(),{href:`/products/${e.product?.slug}`,className:"flex-1 bg-blue-900 text-white py-2 px-4 rounded-xl hover:bg-blue-800 transition-colors text-sm text-center font-bold shadow-md hover:shadow-lg",children:"View Product"}),(0,r.jsx)("button",{onClick:()=>m(e.id),className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,r.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Your wishlist is empty"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Start adding products you love to your wishlist."}),(0,r.jsx)(i(),{href:"/products",className:"mt-6 inline-block bg-blue-900 text-white px-6 py-3 rounded-xl hover:bg-blue-800 transition-all duration-200 font-bold shadow-lg hover:shadow-xl",children:"Browse Products"})]})]}),"settings"===p&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Account Settings"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notifications"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"Email Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Receive order updates and promotions"})]}),(0,r.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-900 focus:ring-blue-900",defaultChecked:!0})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"SMS Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Receive shipping updates via SMS"})]}),(0,r.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Privacy"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"Profile Visibility"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Make your profile visible to other users"})]}),(0,r.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"Data Analytics"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Help improve our services with usage data"})]}),(0,r.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-900 focus:ring-blue-900",defaultChecked:!0})]})]})]}),(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-4",children:"Danger Zone"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-sm text-red-600",children:"This action cannot be undone. All your data will be permanently deleted."})]})]})]})]})]})]})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50 to-white",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"text-center py-12 bg-white rounded-3xl border-2 border-gray-200 shadow-xl",children:[(0,r.jsx)("h3",{className:"text-lg font-black text-gray-900 mb-2",children:"Please sign in"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4 font-medium",children:"You need to be signed in to view your profile."}),(0,r.jsx)(i(),{href:"/auth/signin",className:"bg-blue-900 text-white px-6 py-3 rounded-xl hover:bg-blue-800 transition-all duration-200 font-bold shadow-lg hover:shadow-xl",children:"Sign In"})]})})})}},9031:(e,s,t)=>{"use strict";t.d(s,{A:()=>d,OptimizedImage:()=>i});var r=t(45512),a=t(45103),l=t(58009);let i=({src:e,alt:s,width:t,height:i,className:d="",priority:n=!1,placeholder:o="blur",...c})=>{let[x,m]=(0,l.useState)(!0),[h,u]=(0,l.useState)(!1),p="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==",g=()=>{m(!1)},b=()=>{u(!0),m(!1)};return h?(0,r.jsx)("div",{className:`bg-gray-200 flex items-center justify-center ${d}`,style:{width:t||"100%",height:i||"auto",aspectRatio:t&&i?`${t}/${i}`:void 0},children:(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:"Image unavailable"})}):t&&i?(0,r.jsxs)("div",{className:`relative ${d}`,style:{width:"100%",aspectRatio:`${t}/${i}`},children:[(0,r.jsx)(a.default,{src:e,alt:s,fill:!0,priority:n,placeholder:o,blurDataURL:p,onLoad:g,onError:b,className:`transition-opacity duration-300 object-cover ${x?"opacity-0":"opacity-100"}`,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...c}),x&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):t&&!i?(0,r.jsxs)("div",{className:`relative ${d}`,style:{width:"100%",aspectRatio:"1"},children:[(0,r.jsx)(a.default,{src:e,alt:s,fill:!0,priority:n,placeholder:o,blurDataURL:p,onLoad:g,onError:b,className:`transition-opacity duration-300 object-cover ${x?"opacity-0":"opacity-100"}`,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...c}),x&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):(0,r.jsxs)("div",{className:`relative ${d}`,children:[(0,r.jsx)(a.default,{src:e,alt:s,width:800,height:600,priority:n,placeholder:o,blurDataURL:p,onLoad:g,onError:b,className:`transition-opacity duration-300 w-full h-auto ${x?"opacity-0":"opacity-100"}`,style:{width:"auto",height:"auto"},...c}),x&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]})},d=i},42701:(e,s,t)=>{"use strict";t.d(s,{L:()=>r});let r=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(Number(e)||0)},65187:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/user/Desktop/RogueApe/work/jabistore/src/app/profile/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/user/Desktop/RogueApe/work/jabistore/src/app/profile/page.js","default")},70440:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(88077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[5994,2732,7254,8077,4880],()=>t(38828));module.exports=r})();