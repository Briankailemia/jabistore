(()=>{var e={};e.id=4005,e.ids=[4005],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},21004:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=r(70260),s=r(28203),i=r(25155),l=r.n(i),o=r(67292),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let d=["",{children:["cart",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,14168)),"/Users/user/Desktop/RogueApe/work/jabistore/src/app/cart/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,62804)),"/Users/user/Desktop/RogueApe/work/jabistore/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/user/Desktop/RogueApe/work/jabistore/src/app/cart/page.js"],x={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/cart/page",pathname:"/cart",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},21812:(e,t,r)=>{Promise.resolve().then(r.bind(r,14168))},58196:(e,t,r)=>{Promise.resolve().then(r.bind(r,83660))},83660:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(45512),s=r(28531),i=r.n(s),l=r(58009),o=r(90993),n=r(44082),d=r(4512);r(46317);var c=r(9007),x=r(79420),u=r(9031),m=r(80513),h=r(42701);function p(){let{data:e,status:t}=(0,o.useSession)(),{data:r,loading:s,error:p,updateCartItem:g,removeFromCart:y,clearCart:f}=(0,m._$)(),A=(0,l.useMemo)(()=>{let e=(r||[]).reduce((e,t)=>e+Number(t.product?.price||0)*Number(t.quantity||0),0),t=e>75?0:12.99,a=.085*e;return{subtotal:e,shipping:t,tax:a,total:e+t+a}},[r]),v=async(e,t)=>{if(t<=0){await y(e);return}await g(e,t)},j=async e=>{await y(e)},w=async()=>{await f()};return"loading"===t||s?(0,a.jsx)("div",{className:"min-h-[60vh] flex items-center justify-center bg-gradient-to-br from-white via-blue-50 to-white",children:(0,a.jsx)(x.k,{size:"lg",color:"blue",text:"Loading your cart"})}):e?p?(0,a.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center px-4 bg-gradient-to-br from-white via-blue-50 to-white",children:(0,a.jsxs)(d.default,{className:"max-w-lg text-center space-y-4 bg-white border-2 border-gray-200 shadow-xl",children:[(0,a.jsx)("h2",{className:"text-2xl font-black text-gray-900",children:"We could not load your cart"}),(0,a.jsx)("p",{className:"text-gray-600",children:p})]})}):r&&0!==r.length?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50 to-white space-y-10 pb-20",children:[(0,a.jsxs)("section",{className:"relative overflow-hidden rounded-[36px] border-2 border-gray-200 bg-gradient-to-br from-blue-50 via-white to-blue-100 px-6 py-16 sm:px-10 shadow-lg mx-4",children:[(0,a.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,a.jsx)("div",{className:"absolute -top-24 left-10 h-72 w-72 rounded-full bg-blue-300/30 blur-3xl"}),(0,a.jsx)("div",{className:"absolute -bottom-32 right-0 h-80 w-80 rounded-full bg-indigo-300/25 blur-3xl"})]}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)(c.A,{variant:"glow",className:"inline-flex text-blue-900 bg-blue-100 border-blue-200 mb-4",children:"Cart"}),(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-black tracking-tight text-gray-900 mt-3",children:"Review your picks"}),(0,a.jsx)("p",{className:"text-gray-600 mt-3 text-lg",children:"Quantities update in real time and taxes adapt to your shipping address."})]})]}),(0,a.jsx)("section",{className:"px-4",children:(0,a.jsxs)("div",{className:"grid gap-8 lg:grid-cols-[minmax(0,1.6fr)_minmax(0,0.8fr)]",children:[(0,a.jsxs)(d.default,{className:"p-0 bg-white border-2 border-gray-200 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b-2 border-gray-100 px-6 py-5 bg-gray-50",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-gray-500 font-bold",children:"Cart items"}),(0,a.jsxs)("h2",{className:"text-2xl font-black text-gray-900 mt-1",children:[r.length," device",1===r.length?"":"s"]})]}),(0,a.jsx)("button",{onClick:w,className:"text-sm text-red-600 hover:text-red-700 font-bold transition-colors",children:"Clear cart"})]}),(0,a.jsx)("div",{className:"divide-y-2 divide-gray-100",children:r.map(e=>(0,a.jsxs)("article",{className:"flex flex-col gap-4 px-6 py-5 sm:flex-row sm:items-center hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("div",{className:"h-24 w-24 flex-shrink-0 overflow-hidden rounded-xl border-2 border-gray-200 bg-gray-100",children:(0,a.jsx)(u.OptimizedImage,{src:e.product?.images?.[0]?.url||"/placeholder-product.jpg",alt:e.product?.name||"Product",width:96,height:96,className:"h-full w-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-1",children:[(0,a.jsx)(i(),{href:`/products/${e.product?.slug||e.product?.id}`,className:"text-lg font-black text-gray-900 hover:text-blue-900 transition-colors block",children:e.product?.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:e.product?.brand?.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.product?.category?.name}),(0,a.jsx)("p",{className:"text-base font-black text-blue-900 mt-2",children:(0,h.L)(e.product?.price)})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>v(e.id,e.quantity-1),className:"h-10 w-10 rounded-xl border-2 border-gray-300 text-gray-700 hover:border-blue-900 hover:text-blue-900 hover:bg-blue-50 font-bold transition-colors","aria-label":"Decrease quantity",children:"âˆ’"}),(0,a.jsx)("span",{className:"w-12 text-center text-gray-900 font-black text-lg",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>v(e.id,e.quantity+1),className:"h-10 w-10 rounded-xl border-2 border-gray-300 text-gray-700 hover:border-blue-900 hover:text-blue-900 hover:bg-blue-50 font-bold transition-colors","aria-label":"Increase quantity",children:"+"})]}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"text-sm text-red-600 hover:text-red-700 font-bold transition-colors",children:"Remove"})]})]},e.id))})]}),(0,a.jsxs)(d.default,{className:"space-y-6 bg-white border-2 border-gray-200 shadow-lg sticky top-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-gray-500 font-bold",children:"Order summary"}),(0,a.jsx)("h2",{className:"text-2xl font-black text-gray-900 mt-2",children:"Ready for checkout"})]}),(0,a.jsxs)("div",{className:"space-y-3 text-sm text-gray-700",children:[(0,a.jsx)(b,{label:"Subtotal",value:(0,h.L)(A.subtotal)}),(0,a.jsx)(b,{label:"Shipping",value:0===A.shipping?"Free":(0,h.L)(A.shipping)}),(0,a.jsx)(b,{label:"Tax",value:(0,h.L)(A.tax)}),(0,a.jsxs)("div",{className:"border-t-2 border-gray-200 pt-3 text-base font-black text-gray-900 flex justify-between",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsx)("span",{className:"text-blue-900",children:(0,h.L)(A.total)})]})]}),(0,a.jsx)(i(),{href:"/checkout",className:(0,n.buttonClasses)({variant:"primary",className:"w-full text-center font-bold"}),children:"Go to checkout"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Stripe + M-Pesa supported. Taxes recalculate when you confirm your delivery address."})]})]})})]}):(0,a.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center px-4 bg-gradient-to-br from-white via-blue-50 to-white",children:(0,a.jsxs)(d.default,{className:"max-w-xl text-center space-y-4 bg-white border-2 border-gray-200 shadow-xl",children:[(0,a.jsx)(c.A,{variant:"glow",className:"mx-auto w-fit bg-blue-50 text-blue-900 border-blue-200",children:"Cart"}),(0,a.jsx)("h2",{className:"text-3xl font-black text-gray-900",children:"Your cart is waiting"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Save devices to this space from any page and we will sync them across desktop and mobile."}),(0,a.jsx)(i(),{href:"/products",className:(0,n.buttonClasses)({variant:"primary",className:"w-full sm:w-auto mx-auto"}),children:"Browse products"})]})}):(0,a.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center px-4 bg-gradient-to-br from-white via-blue-50 to-white",children:(0,a.jsxs)(d.default,{className:"max-w-lg text-center space-y-4 bg-white border-2 border-gray-200 shadow-xl",children:[(0,a.jsx)("h2",{className:"text-2xl font-black text-gray-900",children:"Sign in to view your cart"}),(0,a.jsx)("p",{className:"text-gray-600",children:"We keep every item synced to your Dilitech ID."}),(0,a.jsx)(i(),{href:"/auth/signin",className:(0,n.buttonClasses)({variant:"primary",size:"md",className:"w-full"}),children:"Sign in"})]})})}function b({label:e,value:t}){return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:e}),(0,a.jsx)("span",{className:"font-black text-gray-900",children:t})]})}},9031:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,OptimizedImage:()=>l});var a=r(45512),s=r(45103),i=r(58009);let l=({src:e,alt:t,width:r,height:l,className:o="",priority:n=!1,placeholder:d="blur",...c})=>{let[x,u]=(0,i.useState)(!0),[m,h]=(0,i.useState)(!1),p="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==",b=()=>{u(!1)},g=()=>{h(!0),u(!1)};return m?(0,a.jsx)("div",{className:`bg-gray-200 flex items-center justify-center ${o}`,style:{width:r||"100%",height:l||"auto",aspectRatio:r&&l?`${r}/${l}`:void 0},children:(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Image unavailable"})}):r&&l?(0,a.jsxs)("div",{className:`relative ${o}`,style:{width:"100%",aspectRatio:`${r}/${l}`},children:[(0,a.jsx)(s.default,{src:e,alt:t,fill:!0,priority:n,placeholder:d,blurDataURL:p,onLoad:b,onError:g,className:`transition-opacity duration-300 object-cover ${x?"opacity-0":"opacity-100"}`,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...c}),x&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):r&&!l?(0,a.jsxs)("div",{className:`relative ${o}`,style:{width:"100%",aspectRatio:"1"},children:[(0,a.jsx)(s.default,{src:e,alt:t,fill:!0,priority:n,placeholder:d,blurDataURL:p,onLoad:b,onError:g,className:`transition-opacity duration-300 object-cover ${x?"opacity-0":"opacity-100"}`,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...c}),x&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):(0,a.jsxs)("div",{className:`relative ${o}`,children:[(0,a.jsx)(s.default,{src:e,alt:t,width:800,height:600,priority:n,placeholder:d,blurDataURL:p,onLoad:b,onError:g,className:`transition-opacity duration-300 w-full h-auto ${x?"opacity-0":"opacity-100"}`,style:{width:"auto",height:"auto"},...c}),x&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]})},o=l},4512:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(45512),s=r(10099);let i={default:"bg-white border border-gray-200 text-gray-900",muted:"bg-gray-50 border border-gray-200 text-gray-900",translucent:"bg-white/80 backdrop-blur-sm border border-gray-200 text-gray-900",gradient:"bg-gradient-to-br from-white to-gray-50 border border-gray-200 text-gray-900",outline:"bg-white border-2 border-gray-300 text-gray-900"};function l({className:e,children:t,padding:r="p-6",variant:l="default",...o}){return(0,a.jsx)("div",{className:(0,s.cn)("relative rounded-2xl shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden",i[l]||i.default,r,e),...o,children:t})}},46317:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var a=r(45512),s=r(10099),i=r(9007);function l({eyebrow:e,eyebrowVariant:t="outline",title:r,description:l,align:o="center",className:n}){return(0,a.jsxs)("div",{className:(0,s.cn)("space-y-4 relative","center"===o?"text-center max-w-3xl mx-auto":"",n),children:[(0,a.jsx)("div",{className:"absolute inset-x-0 -top-4 hidden sm:block",children:(0,a.jsx)("div",{className:"h-px bg-gradient-to-r from-transparent via-blue-600/40 to-transparent"})}),e&&(0,a.jsx)(i.A,{variant:t,className:(0,s.cn)("tracking-[0.3em] text-xs font-bold","center"===o&&"mx-auto"),children:e}),r&&(0,a.jsx)("h2",{className:(0,s.cn)("text-3xl md:text-5xl font-black text-gray-900 leading-tight","center"===o&&"mx-auto"),children:r}),l&&(0,a.jsx)("p",{className:"text-gray-600 text-base md:text-lg leading-relaxed max-w-2xl mx-auto",children:l})]})}},42701:(e,t,r)=>{"use strict";r.d(t,{L:()=>a});let a=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(Number(e)||0)},14168:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/user/Desktop/RogueApe/work/jabistore/src/app/cart/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/user/Desktop/RogueApe/work/jabistore/src/app/cart/page.js","default")},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(88077);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[5994,2732,7254,8077,4880],()=>r(21004));module.exports=a})();