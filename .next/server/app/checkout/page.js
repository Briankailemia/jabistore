(()=>{var e={};e.id=8279,e.ids=[8279],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},9660:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var t=r(70260),a=r(28203),l=r(25155),o=r.n(l),i=r(67292),n={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);r.d(s,n);let d=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,57734)),"/Users/user/Desktop/RogueApe/work/jabistore/src/app/checkout/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,62804)),"/Users/user/Desktop/RogueApe/work/jabistore/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/user/Desktop/RogueApe/work/jabistore/src/app/checkout/page.js"],m={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},98210:(e,s,r)=>{Promise.resolve().then(r.bind(r,57734))},16362:(e,s,r)=>{Promise.resolve().then(r.bind(r,62084))},62084:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>g});var t=r(45512),a=r(58009),l=r(28531),o=r.n(l),i=r(90993),n=r(80513),d=r(79420),c=r(69529);function m({step:e}){let s=[{number:1,title:"Shipping",icon:"\uD83D\uDE9A"},{number:2,title:"Payment",icon:"\uD83D\uDCB3"},{number:3,title:"Review",icon:"âœ“"}];return(0,t.jsx)("div",{className:"mb-8 lg:mb-12",children:(0,t.jsx)("div",{className:"flex items-center justify-between max-w-2xl",children:s.map((r,a)=>(0,t.jsxs)("div",{className:"flex items-center flex-1",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,t.jsxs)("div",{className:`relative flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300 ${e>=r.number?"bg-blue-900 border-blue-900 shadow-lg shadow-blue-900/50":"bg-gray-100 border-gray-300"}`,children:[(0,t.jsx)("span",{className:"text-xl",children:r.icon}),e>r.number&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-emerald-600 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}),(0,t.jsx)("span",{className:`mt-3 text-sm font-bold transition-colors ${e>=r.number?"text-blue-900":"text-gray-500"}`,children:r.title})]}),a<s.length-1&&(0,t.jsx)("div",{className:`flex-1 h-0.5 mx-4 transition-all duration-300 ${e>r.number?"bg-blue-900":"bg-gray-300"}`})]},r.number))})})}var u=r(9031),x=r(42701);function h({cartItems:e,subtotal:s,shippingCost:r,tax:a,discount:l,finalTotal:o,freeShipping:i,couponCode:n,appliedCoupon:d,showCouponInput:c,setCouponCode:m,setShowCouponInput:h,validateCoupon:p,removeCoupon:b,couponLoading:g,errors:f}){return(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl border-2 border-gray-200 p-6 lg:p-8 shadow-lg sticky top-8",children:[(0,t.jsx)("h2",{className:"text-xl font-black text-gray-900 mb-6",children:"Order Summary"}),(0,t.jsx)("div",{className:"space-y-4 mb-6 max-h-96 overflow-y-auto",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-start gap-4 p-3 bg-gray-50 rounded-xl border-2 border-gray-200",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 border-2 border-gray-200",children:(0,t.jsx)(u.OptimizedImage,{src:e.product?.images?.[0]?.url||"/placeholder-product.jpg",alt:e.product?.name||"Product",width:64,height:64,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 text-sm mb-1 line-clamp-2",children:e.product?.name}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:["Qty: ",e.quantity]}),(0,t.jsx)("p",{className:"font-black text-blue-900",children:(0,x.L)((e.product?.price||0)*(e.quantity||0))})]})]},e.id))}),!d&&!c&&(0,t.jsxs)("button",{type:"button",onClick:()=>h(!0),className:"w-full mb-4 text-sm text-blue-900 hover:text-blue-700 transition-colors flex items-center justify-center gap-2 font-bold",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Have a coupon code?"]}),c&&!d&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-xl border-2 border-gray-200",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:n,onChange:e=>m(e.target.value),placeholder:"Enter code",className:"flex-1 px-3 py-2 bg-white border-2 border-gray-200 rounded-lg text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-blue-900"}),(0,t.jsx)("button",{onClick:p,disabled:g||!n.trim(),className:"px-4 py-2 bg-blue-900 text-white rounded-lg hover:bg-blue-800 transition-colors text-sm font-bold disabled:opacity-50",children:g?"...":"Apply"})]}),f?.coupon&&(0,t.jsx)("p",{className:"mt-2 text-xs text-red-600 font-medium",children:f.coupon}),(0,t.jsx)("button",{onClick:()=>{h(!1),m("")},className:"mt-2 text-xs text-gray-500 hover:text-gray-700 font-medium",children:"Cancel"})]}),d&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-emerald-50 border-2 border-emerald-300 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-emerald-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{className:"text-sm text-emerald-900 font-bold",children:d.code})]}),(0,t.jsx)("button",{onClick:b,className:"text-emerald-700 hover:text-emerald-900","aria-label":"Remove coupon",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l>0&&(0,t.jsxs)("p",{className:"text-xs text-emerald-900 mt-1 font-bold",children:["You saved ",(0,x.L)(l)]})]}),(0,t.jsxs)("div",{className:"border-t-2 border-gray-200 pt-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Subtotal"}),(0,t.jsx)("span",{className:"text-gray-900 font-black",children:(0,x.L)(s)})]}),l>0&&(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Discount"}),(0,t.jsxs)("span",{className:"text-emerald-700 font-black",children:["-",(0,x.L)(l)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Shipping"}),(0,t.jsx)("span",{className:"text-gray-900 font-black",children:i?(0,t.jsx)("span",{className:"text-emerald-700",children:"Free"}):(0,x.L)(r)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Tax (16%)"}),(0,t.jsx)("span",{className:"text-gray-900 font-black",children:(0,x.L)(a)})]}),(0,t.jsxs)("div",{className:"border-t-2 border-gray-200 pt-3 flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-lg font-black text-gray-900",children:"Total"}),(0,t.jsx)("span",{className:"text-2xl font-black text-blue-900",children:(0,x.L)(o)})]})]}),(0,t.jsx)("div",{className:"mt-6 pt-6 border-t-2 border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-emerald-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,t.jsx)("span",{className:"font-medium",children:"Secure checkout with SSL encryption"})]})}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-emerald-50 rounded-xl border-2 border-emerald-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-emerald-700",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.085"})}),(0,t.jsx)("span",{className:"text-sm font-black text-emerald-900",children:"Need Help?"})]}),(0,t.jsx)("p",{className:"text-xs text-emerald-800 mb-3 font-medium",children:"Chat with us on WhatsApp for instant support"}),(0,t.jsx)("a",{href:"https://wa.me/254709000111?text=Hi, I need help with my checkout",target:"_blank",rel:"noopener noreferrer",className:"inline-block w-full text-center bg-emerald-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-emerald-700 transition-colors font-bold",children:"Chat Now"})]})]})})}var p=r(6775),b=r(33319);function g(){let{data:e,status:s}=(0,i.useSession)(),{data:r,loading:l}=(0,n._$)(),[u,g]=(0,a.useState)(1),[f,y]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",state:"",postalCode:"",country:"Kenya",paymentMethod:"mpesa",mpesaPhone:"",cardNumber:"",expiryDate:"",cvv:"",cardName:""}),[j,N]=(0,a.useState)({}),[v,w]=(0,a.useState)(!1),[k,C]=(0,a.useState)(""),[A,P]=(0,a.useState)(null),[M,L]=(0,a.useState)(!1),[S,X]=(0,a.useState)(0),[q,B]=(0,a.useState)(!1),[D,$]=(0,a.useState)(!1),[E,W]=(0,a.useState)([]),[I,F]=(0,a.useState)(null),[R,K]=(0,a.useState)(!1),[z,O]=(0,a.useState)(null),[Q,T]=(0,a.useState)(null),[_,H]=(0,a.useState)(null),G=(0,b.d)();if("loading"===s||l)return(0,t.jsx)(c.ud,{});if(!e)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-white via-blue-50 to-white",children:(0,t.jsxs)("div",{className:"text-center bg-white rounded-3xl p-8 border-2 border-gray-200 shadow-xl",children:[(0,t.jsx)("h1",{className:"text-3xl font-black text-gray-900 mb-4",children:"Please Sign In"}),(0,t.jsx)("p",{className:"text-gray-600 font-medium mb-6",children:"You need to be signed in to checkout."}),(0,t.jsx)(o(),{href:"/auth/signin",className:"inline-block bg-blue-900 text-white px-8 py-3 rounded-xl hover:bg-blue-800 transition-all duration-200 font-bold shadow-lg hover:shadow-xl",children:"Sign In"})]})});let U=Array.isArray(r)?r:[];if(!U||0===U.length)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-white via-blue-50 to-white",children:(0,t.jsxs)("div",{className:"text-center bg-white rounded-3xl p-8 border-2 border-gray-200 shadow-xl",children:[(0,t.jsx)("h1",{className:"text-3xl font-black text-gray-900 mb-4",children:"Your Cart is Empty"}),(0,t.jsx)("p",{className:"text-gray-600 font-medium mb-6",children:"Add some items to your cart before checkout."}),(0,t.jsx)(o(),{href:"/products",className:"inline-block bg-blue-900 text-white px-8 py-3 rounded-xl hover:bg-blue-800 transition-all duration-200 font-bold shadow-lg hover:shadow-xl",children:"Continue Shopping"})]})});let Y=U.reduce((e,s)=>e+(s.product?.price||0)*(s.quantity||0),0),J=q?0:500,V=.16*Y,Z=Y-S+J+V,ee=e=>{let{name:s,value:r}=e.target,t=r;("phone"===s||"mpesaPhone"===s)&&(t=r),y(e=>({...e,[s]:t})),j[s]&&N(e=>({...e,[s]:""})),I&&("firstName"===s||"lastName"===s||"address"===s||"city"===s||"state"===s||"postalCode"===s)&&F(null)},es=e=>{let{name:s,value:r}=e.target;if("phone"===s||"mpesaPhone"===s){let e=(0,p.uE)(r);y(r=>({...r,[s]:e}))}},er=e=>{let s={};if(1===e)f.firstName.trim()||(s.firstName="First name is required"),f.lastName.trim()||(s.lastName="Last name is required"),f.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)||(s.email="Invalid email format"):s.email="Email is required",f.phone.trim()||(s.phone="Phone number is required"),f.address.trim()||(s.address="Address is required"),f.city.trim()||(s.city="City is required"),f.state.trim()||(s.state="State/County is required"),f.postalCode.trim()||(s.postalCode="ZIP code is required");else if(2===e){if("mpesa"===f.paymentMethod){if(f.mpesaPhone.trim()){let e=(0,p.uE)(f.mpesaPhone);(0,p.vy)(e)?y(s=>({...s,mpesaPhone:e})):s.mpesaPhone="Please enter a valid M-Pesa number (e.g., 254712345678 or 0712345678)"}else s.mpesaPhone="M-Pesa phone number is required"}else f.cardNumber.trim()||(s.cardNumber="Card number is required"),f.expiryDate.trim()||(s.expiryDate="Expiry date is required"),f.cvv.trim()||(s.cvv="CVV is required"),f.cardName.trim()||(s.cardName="Cardholder name is required")}return N(s),0===Object.keys(s).length},et=()=>{er(u)&&g(u+1)},ea=()=>{g(u-1),N({})},el=async()=>{if(k.trim()){L(!0);try{let e=await fetch("/api/coupons/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:k,orderAmount:Y})}),s=await e.json();s.valid?(P(s.coupon),X(s.discount),B(s.freeShipping||!1),C(""),$(!1)):N(e=>({...e,coupon:s.error||"Invalid coupon code"}))}catch(e){console.error("Coupon validation error:",e),N(e=>({...e,coupon:"Failed to validate coupon"}))}finally{L(!1)}}},eo=async e=>{if(e.preventDefault(),er(u)){w(!0);try{let e=I;if(!e)try{let s=await fetch("/api/addresses",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({firstName:f.firstName,lastName:f.lastName,address:f.address,city:f.city,state:f.state,postalCode:f.postalCode,country:f.country,phone:f.phone,isDefault:0===E.length})});if(s.ok){let r=await s.json(),t=r?.data||r;e=t?.id}else{let e={};try{let r=await s.text();e=r?JSON.parse(r):{}}catch(e){console.error("Failed to parse error response:",e)}let r=e?.error||e?.message||`Failed to save address (${s.status})`;throw Error(r)}}catch(e){console.error("Failed to save address:",e)}let s=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({items:U.map(e=>({productId:e.product.id,quantity:e.quantity,price:e.product.price})),paymentMethod:f.paymentMethod,total:Z,subtotal:Y,shipping:J,tax:V,discount:S,shippingAddressId:e})});if(!s.ok){let e={};try{let r=await s.text();e=r?JSON.parse(r):{}}catch(e){console.error("Failed to parse error response:",e)}let r=e?.error||e?.message||`Failed to create order (${s.status})`;throw Error(r)}let r=await s.json(),t=r?.data||r;if(t?.id)"mpesa"===f.paymentMethod?await ei(t.id):await en(t.id);else throw Error("Failed to create order")}catch(e){console.error("Checkout error:",e),N(e=>({...e,submit:"Checkout failed. Please try again."}))}finally{w(!1)}}},ei=async e=>{try{O("waiting"),H(e);let s=(0,p.uE)(f.mpesaPhone),r=await fetch("/api/payments/mpesa",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({orderId:e,phone:s,amount:Math.round(Z)})}),t=await r.json();if(t.success)T(t.checkoutRequestId),O("processing"),t.mock?G.warning(t.message):t.isSandbox?G.info(t.message):G.success(t.message);else{O("failed");let e=t.message||"M-Pesa payment failed. Please try again.";N(s=>({...s,submit:e})),H(null),G.error(e)}}catch(e){console.error("M-Pesa payment error:",e),O("failed"),N(e=>({...e,submit:"Payment failed. Please try again."})),H(null)}},en=async e=>{try{let s=await fetch("/api/payments/stripe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e,amount:Math.round(100*Z),currency:"usd"})}),r=await s.json();r.success?window.location.href=`/orders/${e}/confirmation`:N(e=>({...e,submit:"Payment failed: "+r.message}))}catch(e){console.error("Card payment error:",e),N(e=>({...e,submit:"Payment failed. Please try again."}))}};return"waiting"===z||"processing"===z?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50 to-white flex items-center justify-center",children:(0,t.jsx)("div",{className:"max-w-2xl w-full mx-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl border-2 border-gray-200 p-8 lg:p-12 text-center shadow-xl",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"relative inline-block",children:[(0,t.jsx)("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-blue-900 flex items-center justify-center animate-pulse",children:(0,t.jsx)("svg",{className:"w-12 h-12 text-white animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-emerald-600 rounded-full flex items-center justify-center animate-bounce",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),(0,t.jsx)("h2",{className:"text-3xl font-black mb-4 text-gray-900",children:"waiting"===z?"Sending Payment Request...":"Waiting for Payment"}),(0,t.jsx)("p",{className:"text-gray-900 font-bold text-lg mb-2",children:"waiting"===z?"Initiating M-Pesa STK Push...":"Please check your phone and enter your M-Pesa PIN to complete the payment."}),"processing"===z&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-6 font-medium",children:"We're waiting for you to complete the payment on your phone."}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-blue-900 mb-6",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-900 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-900 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-900 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 mb-6 border-2 border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Order Total"}),(0,t.jsx)("span",{className:"text-2xl font-black text-blue-900",children:(0,x.L)(Z)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Phone Number"}),(0,t.jsx)("span",{className:"text-gray-900 font-black font-mono",children:(0,p.o$)(f.mpesaPhone)})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl text-left",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-900 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{className:"text-sm text-blue-900",children:[(0,t.jsx)("p",{className:"font-black mb-1",children:"What to do:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-blue-800 font-medium",children:[(0,t.jsx)("li",{children:"Check your phone for the M-Pesa prompt"}),(0,t.jsx)("li",{children:"Enter your M-Pesa PIN when prompted"}),(0,t.jsx)("li",{children:"Wait for confirmation - we'll update automatically"})]})]})]})}),(0,t.jsx)("button",{onClick:()=>{O(null),H(null),T(null),w(!1)},className:"w-full px-6 py-3 bg-gray-100 text-gray-900 font-bold rounded-xl hover:bg-gray-200 transition-all border-2 border-gray-300",children:"Cancel Payment"})]})]})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50 to-white",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-[36px] border-2 border-gray-200 bg-gradient-to-br from-blue-50 via-white to-blue-100 px-6 py-12 sm:px-10 shadow-lg mb-8 lg:mb-12",children:[(0,t.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,t.jsx)("div",{className:"absolute -top-24 left-10 h-72 w-72 rounded-full bg-blue-300/30 blur-3xl"}),(0,t.jsx)("div",{className:"absolute -bottom-32 right-0 h-80 w-80 rounded-full bg-indigo-300/25 blur-3xl"})]}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-black mb-2 text-gray-900",children:"Checkout"}),(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"Complete your purchase in just a few steps"})]})]}),(0,t.jsx)(m,{step:u}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,t.jsxs)("form",{onSubmit:eo,className:"space-y-6",children:[1===u&&(0,t.jsxs)("div",{className:"bg-white rounded-3xl border-2 border-gray-200 p-6 lg:p-8 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-900 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,t.jsx)("h2",{className:"text-2xl font-black text-gray-900",children:"Shipping Information"})]}),R?(0,t.jsx)("div",{className:"mb-6 flex items-center justify-center py-4",children:(0,t.jsx)(d.k,{size:"sm"})}):E.length>0&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-gray-900 mb-3",children:"Use Saved Address"}),(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:E.map(e=>(0,t.jsxs)("label",{className:`flex items-start gap-3 p-4 rounded-xl border-2 cursor-pointer transition-all ${I===e.id?"bg-blue-50 border-blue-900":"bg-gray-50 border-gray-200 hover:border-blue-300"}`,children:[(0,t.jsx)("input",{type:"radio",name:"savedAddress",checked:I===e.id,onChange:()=>{F(e.id),y(s=>({...s,firstName:e.firstName,lastName:e.lastName,address:e.address1,city:e.city,state:e.state,postalCode:e.postalCode,country:e.country||"Kenya",phone:e.phone||""}))},className:"mt-1 h-4 w-4 text-blue-900 focus:ring-blue-900 border-gray-300"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsxs)("span",{className:"font-bold text-gray-900",children:[e.firstName," ",e.lastName]}),e.isDefault&&(0,t.jsx)("span",{className:"text-xs bg-blue-900 text-white px-2 py-0.5 rounded-full font-bold",children:"Default"})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.address1,", ",e.city,", ",e.state," ",e.postalCode]}),e.phone&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.phone})]})]},e.id))}),(0,t.jsxs)("button",{type:"button",onClick:()=>{F(null),y(e=>({...e,firstName:"",lastName:"",address:"",city:"",state:"",postalCode:"",phone:""}))},"aria-label":"Use a new address instead of saved address",className:"mt-3 text-sm text-blue-900 hover:text-blue-700 transition-colors flex items-center gap-1 font-bold",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Use New Address"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"checkout-firstName",className:"block text-sm font-bold text-gray-900 mb-2",children:["First Name ",(0,t.jsx)("span",{className:"text-red-600","aria-label":"required",children:"*"})]}),(0,t.jsx)("input",{id:"checkout-firstName",type:"text",name:"firstName",value:f.firstName,onChange:ee,placeholder:"John","aria-required":"true","aria-invalid":!!j.firstName,"aria-describedby":j.firstName?"checkout-firstName-error":void 0,className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.firstName?"border-red-500 focus:ring-red-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.firstName&&(0,t.jsx)("p",{id:"checkout-firstName-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:j.firstName})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"checkout-lastName",className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["Last Name ",(0,t.jsx)("span",{className:"text-red-600 font-medium","aria-label":"required",children:"*"})]}),(0,t.jsx)("input",{id:"checkout-lastName",type:"text",name:"lastName",value:f.lastName,onChange:ee,placeholder:"Doe","aria-required":"true","aria-invalid":!!j.lastName,"aria-describedby":j.lastName?"checkout-lastName-error":void 0,className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.lastName?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.lastName&&(0,t.jsx)("p",{id:"checkout-lastName-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:j.lastName})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"checkout-email",className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["Email ",(0,t.jsx)("span",{className:"text-red-600 font-medium","aria-label":"required",children:"*"})]}),(0,t.jsx)("input",{id:"checkout-email",type:"email",name:"email",value:f.email,onChange:ee,placeholder:"john@example.com","aria-required":"true","aria-invalid":!!j.email,"aria-describedby":j.email?"checkout-email-error":void 0,className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.email?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.email&&(0,t.jsx)("p",{id:"checkout-email-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:j.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"checkout-phone",className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["Phone ",(0,t.jsx)("span",{className:"text-red-600 font-medium","aria-label":"required",children:"*"})]}),(0,t.jsx)("input",{id:"checkout-phone",type:"tel",name:"phone",value:f.phone,onChange:ee,onBlur:es,placeholder:"254712345678 or 0712345678","aria-required":"true","aria-invalid":!!j.phone,"aria-describedby":j.phone?"checkout-phone-error checkout-phone-help":"checkout-phone-help",className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.phone?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.phone&&(0,t.jsx)("p",{id:"checkout-phone-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:j.phone}),(0,t.jsx)("p",{id:"checkout-phone-help",className:"mt-1 text-xs text-gray-500",children:"Accepts: 254XXXXXXXXX, 07XXXXXXXX, or +254XXXXXXXXX"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("label",{htmlFor:"checkout-address",className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["Address ",(0,t.jsx)("span",{className:"text-red-600 font-medium","aria-label":"required",children:"*"})]}),(0,t.jsx)("input",{id:"checkout-address",type:"text",name:"address",value:f.address,onChange:ee,placeholder:"123 Main Street","aria-required":"true","aria-invalid":!!j.address,"aria-describedby":j.address?"checkout-address-error":void 0,className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.address?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.address&&(0,t.jsx)("p",{id:"checkout-address-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:j.address})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"checkout-city",className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["City ",(0,t.jsx)("span",{className:"text-red-600 font-medium","aria-label":"required",children:"*"})]}),(0,t.jsx)("input",{id:"checkout-city",type:"text",name:"city",value:f.city,onChange:ee,placeholder:"Nairobi","aria-required":"true","aria-invalid":!!j.city,"aria-describedby":j.city?"checkout-city-error":void 0,className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.city?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.city&&(0,t.jsx)("p",{id:"checkout-city-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:j.city})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"checkout-state",className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["State/County ",(0,t.jsx)("span",{className:"text-red-600 font-medium","aria-label":"required",children:"*"})]}),(0,t.jsx)("input",{id:"checkout-state",type:"text",name:"state",value:f.state,onChange:ee,placeholder:"Nairobi County","aria-required":"true","aria-invalid":!!j.state,"aria-describedby":j.state?"checkout-state-error":void 0,className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.state?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.state&&(0,t.jsx)("p",{id:"checkout-state-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:j.state})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"checkout-postalCode",className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["ZIP Code ",(0,t.jsx)("span",{className:"text-red-600 font-medium","aria-label":"required",children:"*"})]}),(0,t.jsx)("input",{id:"checkout-postalCode",type:"text",name:"postalCode",value:f.postalCode,onChange:ee,placeholder:"00100","aria-required":"true","aria-invalid":!!j.postalCode,"aria-describedby":j.postalCode?"checkout-postalCode-error":void 0,className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.postalCode?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.postalCode&&(0,t.jsx)("p",{id:"checkout-postalCode-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:j.postalCode})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t-2 border-gray-200",children:(0,t.jsxs)("button",{type:"button",onClick:et,className:"bg-blue-900 text-white px-8 py-3 rounded-xl hover:bg-blue-800 transition-all duration-200 font-bold shadow-lg hover:shadow-xl flex items-center gap-2",children:["Continue to Payment",(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),2===u&&(0,t.jsxs)("div",{className:"bg-white rounded-3xl border-2 border-gray-200 p-6 lg:p-8 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-900 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,t.jsx)("h2",{className:"text-2xl font-black text-gray-900",children:"Payment Method"})]}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("label",{className:`flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all ${"mpesa"===f.paymentMethod?"bg-blue-50 border-blue-900":"bg-gray-50 border-gray-200 hover:border-blue-300"}`,children:[(0,t.jsx)("input",{type:"radio",name:"paymentMethod",value:"mpesa",checked:"mpesa"===f.paymentMethod,onChange:ee,className:"h-5 w-5 text-blue-900 focus:ring-blue-900 border-gray-300"}),(0,t.jsx)("div",{className:"ml-4 flex-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCF1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"block font-black text-gray-900",children:"M-Pesa"}),(0,t.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Pay with your mobile phone"})]})]})})]}),(0,t.jsxs)("label",{className:`flex items-center p-4 rounded-xl border-2 cursor-pointer transition-all ${"card"===f.paymentMethod?"bg-blue-50 border-blue-900":"bg-gray-50 border-gray-200 hover:border-blue-300"}`,children:[(0,t.jsx)("input",{type:"radio",name:"paymentMethod",value:"card",checked:"card"===f.paymentMethod,onChange:ee,className:"h-5 w-5 text-blue-900 focus:ring-blue-900 border-gray-300"}),(0,t.jsx)("div",{className:"ml-4 flex-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"block font-black text-gray-900",children:"Credit/Debit Card"}),(0,t.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Visa, Mastercard, or Amex"})]})]})})]})]}),"mpesa"===f.paymentMethod&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["M-Pesa Phone Number ",(0,t.jsx)("span",{className:"text-red-600 font-medium",children:"*"})]}),(0,t.jsx)("input",{type:"tel",name:"mpesaPhone",value:f.mpesaPhone,onChange:ee,onBlur:es,placeholder:"254712345678 or 0712345678",className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.mpesaPhone?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.mpesaPhone&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600 font-medium",children:j.mpesaPhone}),(0,t.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Enter your M-Pesa registered phone number. Accepts: 254XXXXXXXXX, 07XXXXXXXX, or +254XXXXXXXXX"}),f.mpesaPhone&&(0,p.vy)(f.mpesaPhone)&&(0,t.jsxs)("p",{className:"mt-2 text-xs text-emerald-700 flex items-center gap-1 font-bold",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Valid M-Pesa number: ",(0,p.o$)(f.mpesaPhone)]})]}),"card"===f.paymentMethod&&(0,t.jsxs)("div",{className:"space-y-4 mb-6 p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["Card Number ",(0,t.jsx)("span",{className:"text-red-600 font-medium",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"cardNumber",value:f.cardNumber,onChange:ee,placeholder:"1234 5678 9012 3456",maxLength:"19",className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.cardNumber?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.cardNumber&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600 font-medium",children:j.cardNumber})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["Expiry Date ",(0,t.jsx)("span",{className:"text-red-600 font-medium",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"expiryDate",value:f.expiryDate,onChange:ee,placeholder:"MM/YY",maxLength:"5",className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.expiryDate?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.expiryDate&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600 font-medium",children:j.expiryDate})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["CVV ",(0,t.jsx)("span",{className:"text-red-600 font-medium",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"cvv",value:f.cvv,onChange:ee,placeholder:"123",maxLength:"4",className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.cvv?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.cvv&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600 font-medium",children:j.cvv})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-900 font-bold mb-2",children:["Cardholder Name ",(0,t.jsx)("span",{className:"text-red-600 font-medium",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"cardName",value:f.cardName,onChange:ee,placeholder:"John Doe",className:`w-full px-4 py-3 bg-white border-2 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all ${j.cardName?"border-rose-500 focus:ring-rose-500":"border-gray-200 focus:ring-blue-900 focus:border-blue-900"}`}),j.cardName&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600 font-medium",children:j.cardName})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 pt-2 text-xs text-gray-600",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),(0,t.jsx)("span",{className:"font-medium",children:"Your payment information is secure and encrypted"})]})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-4 border-t-2 border-gray-200",children:[(0,t.jsx)("button",{type:"button",onClick:ea,className:"px-6 py-3 bg-gray-100 text-gray-900 font-bold rounded-xl hover:bg-gray-200 transition-all duration-200 border-2 border-gray-300",children:"Back"}),(0,t.jsxs)("button",{type:"button",onClick:et,className:"bg-blue-900 text-white px-8 py-3 rounded-xl hover:bg-blue-800 transition-all duration-200 font-bold shadow-lg hover:shadow-xl flex items-center gap-2",children:["Review Order",(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]}),3===u&&(0,t.jsxs)("div",{className:"bg-white rounded-3xl border-2 border-gray-200 p-6 lg:p-8 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-900 flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("h2",{className:"text-2xl font-black text-gray-900",children:"Order Review"})]}),(0,t.jsxs)("div",{className:"space-y-6 mb-6",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[(0,t.jsxs)("h3",{className:"font-black text-gray-900 mb-2 flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"w-5 h-5 text-blue-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Shipping Address"]}),(0,t.jsxs)("p",{className:"text-gray-900 font-bold leading-relaxed",children:[f.firstName," ",f.lastName,(0,t.jsx)("br",{}),f.address,(0,t.jsx)("br",{}),f.city,", ",f.state," ",f.postalCode,(0,t.jsx)("br",{}),f.country]})]}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[(0,t.jsxs)("h3",{className:"font-black text-gray-900 mb-2 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Payment Method"]}),(0,t.jsxs)("p",{className:"text-gray-900 font-bold",children:["mpesa"===f.paymentMethod?"M-Pesa":"Credit/Debit Card","mpesa"===f.paymentMethod&&` (${f.mpesaPhone})`]})]})]}),j.submit&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 border-2 border-red-200 rounded-xl text-red-900 font-medium",children:j.submit}),(0,t.jsxs)("div",{className:"flex justify-between pt-4 border-t-2 border-gray-200",children:[(0,t.jsx)("button",{type:"button",onClick:ea,className:"px-6 py-3 bg-gray-100 text-gray-900 font-bold rounded-xl hover:bg-gray-200 transition-all duration-200 border-2 border-gray-300",children:"Back"}),(0,t.jsx)("button",{type:"submit",disabled:v,className:"bg-emerald-600 text-white px-8 py-3 rounded-xl hover:bg-emerald-700 transition-all duration-200 font-bold shadow-lg hover:shadow-xl flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):(0,t.jsxs)(t.Fragment,{children:["Place Order",(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})})]})]})]})}),(0,t.jsx)(h,{cartItems:U,subtotal:Y,shippingCost:J,tax:V,discount:S,finalTotal:Z,freeShipping:q,couponCode:k,appliedCoupon:A,showCouponInput:D,setCouponCode:C,setShowCouponInput:$,validateCoupon:el,removeCoupon:()=>{P(null),X(0),B(!1),C(""),N(e=>({...e,coupon:""}))},couponLoading:M,errors:j})]})]})})}},9031:(e,s,r)=>{"use strict";r.d(s,{A:()=>i,OptimizedImage:()=>o});var t=r(45512),a=r(45103),l=r(58009);let o=({src:e,alt:s,width:r,height:o,className:i="",priority:n=!1,placeholder:d="blur",...c})=>{let[m,u]=(0,l.useState)(!0),[x,h]=(0,l.useState)(!1),p="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==",b=()=>{u(!1)},g=()=>{h(!0),u(!1)};return x?(0,t.jsx)("div",{className:`bg-gray-200 flex items-center justify-center ${i}`,style:{width:r||"100%",height:o||"auto",aspectRatio:r&&o?`${r}/${o}`:void 0},children:(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Image unavailable"})}):r&&o?(0,t.jsxs)("div",{className:`relative ${i}`,style:{width:"100%",aspectRatio:`${r}/${o}`},children:[(0,t.jsx)(a.default,{src:e,alt:s,fill:!0,priority:n,placeholder:d,blurDataURL:p,onLoad:b,onError:g,className:`transition-opacity duration-300 object-cover ${m?"opacity-0":"opacity-100"}`,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...c}),m&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):r&&!o?(0,t.jsxs)("div",{className:`relative ${i}`,style:{width:"100%",aspectRatio:"1"},children:[(0,t.jsx)(a.default,{src:e,alt:s,fill:!0,priority:n,placeholder:d,blurDataURL:p,onLoad:b,onError:g,className:`transition-opacity duration-300 object-cover ${m?"opacity-0":"opacity-100"}`,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...c}),m&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):(0,t.jsxs)("div",{className:`relative ${i}`,children:[(0,t.jsx)(a.default,{src:e,alt:s,width:800,height:600,priority:n,placeholder:d,blurDataURL:p,onLoad:b,onError:g,className:`transition-opacity duration-300 w-full h-auto ${m?"opacity-0":"opacity-100"}`,style:{width:"auto",height:"auto"},...c}),m&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]})},i=o},69529:(e,s,r)=>{"use strict";r.d(s,{IX:()=>l,uL:()=>o,ud:()=>i});var t=r(45512);function a(){return(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 animate-pulse",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"h-5 bg-slate-800 rounded w-32"}),(0,t.jsx)("div",{className:"h-4 bg-slate-800 rounded w-24"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-slate-800 rounded w-full"}),(0,t.jsx)("div",{className:"h-4 bg-slate-800 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-slate-800 rounded w-1/2"})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-800",children:(0,t.jsx)("div",{className:"h-6 bg-slate-800 rounded w-24"})})]})}function l({count:e=5}){return(0,t.jsx)("div",{className:"space-y-4",children:Array.from({length:e}).map((e,s)=>(0,t.jsx)(a,{},s))})}function o(){return(0,t.jsx)("div",{className:"min-h-screen bg-transparent text-gray-900",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-10 py-10 space-y-10 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-64"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[1.1fr_0.9fr] gap-10",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"aspect-square bg-gray-200 rounded-2xl"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-3",children:Array.from({length:4}).map((e,s)=>(0,t.jsx)("div",{className:"aspect-square bg-gray-200 rounded-xl"},s))})]}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-24"}),(0,t.jsx)("div",{className:"h-10 bg-gray-200 rounded w-32"})]})})]})]})})}function i(){return(0,t.jsx)("div",{className:"min-h-screen bg-transparent animate-pulse",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[(0,t.jsx)("div",{className:"h-8 bg-slate-800 rounded w-48 mb-8"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsx)("div",{className:"space-y-6",children:Array.from({length:3}).map((e,s)=>(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[(0,t.jsx)("div",{className:"h-6 bg-slate-800 rounded w-32 mb-4"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-slate-800 rounded w-full"}),(0,t.jsx)("div",{className:"h-4 bg-slate-800 rounded w-3/4"})]})]},s))}),(0,t.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[(0,t.jsx)("div",{className:"h-6 bg-slate-800 rounded w-40 mb-6"}),(0,t.jsx)("div",{className:"space-y-4",children:Array.from({length:4}).map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("div",{className:"h-4 bg-slate-800 rounded w-24"}),(0,t.jsx)("div",{className:"h-4 bg-slate-800 rounded w-20"})]},s))})]})]})]})})}},42701:(e,s,r)=>{"use strict";r.d(s,{L:()=>t});let t=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(Number(e)||0)},6775:(e,s,r)=>{"use strict";function t(e){if(!e)return"";let s=e.replace(/\D/g,"");if(s.startsWith("254"));else if(s.startsWith("0"))return"254"+s.substring(1);else if(9===s.length)return"254"+s;else if(10===s.length&&s.startsWith("7"))return"254"+s;return s}function a(e){let s=t(e);return/^2547\d{8}$/.test(s)}function l(e){let s=t(e);return 12===s.length&&s.startsWith("2547")?`${s.substring(0,3)} ${s.substring(3,4)} ${s.substring(4,7)} ${s.substring(7,10)}`:s}r.d(s,{o$:()=>l,uE:()=>t,vy:()=>a})},57734:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/user/Desktop/RogueApe/work/jabistore/src/app/checkout/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/user/Desktop/RogueApe/work/jabistore/src/app/checkout/page.js","default")},70440:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(88077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[5994,2732,7254,8077,4880],()=>r(9660));module.exports=t})();