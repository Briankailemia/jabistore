(()=>{var e={};e.id=3698,e.ids=[3698],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},44916:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=t(70260),a=t(28203),l=t(25155),i=t.n(l),n=t(67292),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,37461)),"/Users/user/Desktop/RogueApe/work/jabistore/src/app/admin/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,62804)),"/Users/user/Desktop/RogueApe/work/jabistore/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/user/Desktop/RogueApe/work/jabistore/src/app/admin/page.js"],m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},65279:(e,s,t)=>{Promise.resolve().then(t.bind(t,37461))},59703:(e,s,t)=>{Promise.resolve().then(t.bind(t,66505))},66505:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var r=t(45512),a=t(58009),l=t(90993),i=t(28531),n=t.n(i),o=t(80513),d=t(33319),c=t(9031);function m({isOpen:e,onClose:s,onSelectImage:t,multiple:l=!1}){let[i,n]=(0,a.useState)([]),[o,m]=(0,a.useState)(!0),[x,u]=(0,a.useState)([]),p=((0,d.d)(),e=>{l?u(s=>s.some(s=>s.url===e.url)?s.filter(s=>s.url!==e.url):[...s,e]):(t(e),s())});return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-950 via-blue-900 to-slate-900 px-6 py-4 text-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"Media Library"}),(0,r.jsx)("p",{className:"text-sm text-blue-200 mt-1",children:"Select from uploaded images"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[l&&x.length>0&&(0,r.jsxs)("button",{onClick:()=>{x.length>0&&(l?x.forEach(e=>t(e)):t(x[0]),u([]),s())},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:["Select ",x.length," Image",1!==x.length?"s":""]}),(0,r.jsx)("button",{onClick:s,className:"text-white/80 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:o?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):0===i.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Images Found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Upload images to see them here"})]}):(0,r.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:i.map((e,s)=>{let t=x.some(s=>s.url===e.url);return(0,r.jsxs)("div",{onClick:()=>p({url:e.url,alt:e.filename}),className:`relative aspect-square rounded-xl overflow-hidden border-2 cursor-pointer transition-all ${t?"border-blue-900 ring-4 ring-blue-500 ring-offset-2":"border-gray-200 hover:border-blue-500"}`,children:[(0,r.jsx)(c.A,{src:e.url,alt:e.filename,width:200,height:200,className:"w-full h-full object-cover"}),t&&(0,r.jsx)("div",{className:"absolute inset-0 bg-blue-900/20 flex items-center justify-center",children:(0,r.jsx)("div",{className:"bg-blue-900 text-white rounded-full p-2",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-2 truncate",children:e.filename})]},s)})})})]})}):null}function x({isOpen:e,onClose:s,onAddProduct:t}){let{data:l}=(0,o.Ck)(),{data:i}=(0,o.Ek)(),n=(0,d.d)(),c=(0,a.useMemo)(()=>l?Array.isArray(l)?l:l.categories&&Array.isArray(l.categories)?l.categories:l.data&&Array.isArray(l.data)?l.data:[]:[],[l]),x=(0,a.useMemo)(()=>i?Array.isArray(i)?i:i.brands&&Array.isArray(i.brands)?i.brands:i.data&&Array.isArray(i.data)?i.data:[]:[],[i]),[u,p]=(0,a.useState)({name:"",slug:"",description:"",shortDescription:"",sku:"",price:"",originalPrice:"",category:"",brand:"",stock:"",weight:"",dimensions:"",featured:!1,status:"active",images:[],features:[],specifications:[],seoTitle:"",seoDescription:""}),[h,g]=(0,a.useState)({}),[b,f]=(0,a.useState)(!1),[j,y]=(0,a.useState)(0),[v,N]=(0,a.useState)(""),[w,k]=(0,a.useState)(""),[C,L]=(0,a.useState)(""),[A,S]=(0,a.useState)(""),[E,D]=(0,a.useState)(!1),[M,P]=(0,a.useState)(!1),[O,T]=(0,a.useState)({}),[U,R]=(0,a.useState)(!1),[I,B]=(0,a.useState)("basic"),[$,F]=(0,a.useState)({}),[z,V]=(0,a.useState)(""),[W,q]=(0,a.useState)(""),H=(0,a.useRef)(null),G=(0,a.useRef)(null),K=(0,a.useMemo)(()=>{if(!z.trim())return c;let e=z.toLowerCase();return c.filter(s=>s.name?.toLowerCase().includes(e))},[c,z]),_=(0,a.useMemo)(()=>{if(!W.trim())return x;let e=W.toLowerCase();return x.filter(s=>s.name?.toLowerCase().includes(e))},[x,W]),J=(0,a.useMemo)(()=>{let e=["name","slug","sku","price","stock","category","brand","seoTitle","seoDescription"],s=0;return e.forEach(e=>{u[e]&&""!==u[e]&&!1!==u[e]&&s++}),Math.round(s/e.length*100)},[u]),Q=e=>{let{name:s,value:t,type:r,checked:a}=e.target;if(p(e=>({...e,[s]:"checkbox"===r?a:t})),F(e=>({...e,[s]:!0})),"name"===s&&!u.slug){let e=t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");p(s=>({...s,slug:e}))}h[s]&&g(e=>({...e,[s]:""})),$[s]&&X(s,"checkbox"===r?a:t)},X=(e,s)=>{let t={...h};switch(e){case"name":s&&s.trim()?delete t.name:t.name="Product name is required";break;case"slug":s&&s.trim()?/^[a-z0-9-]+$/.test(s)?delete t.slug:t.slug="Slug can only contain lowercase letters, numbers, and hyphens":t.slug="URL slug is required";break;case"sku":s&&s.trim()?delete t.sku:t.sku="SKU is required";break;case"price":!s||0>=parseFloat(s)?t.price="Valid price is required":delete t.price;break;case"originalPrice":s&&parseFloat(s)<=parseFloat(u.price||0)?t.originalPrice="Original price must be greater than sale price":delete t.originalPrice;break;case"stock":""===s||0>parseInt(s,10)?t.stock="Valid stock quantity is required":delete t.stock;break;case"category":s&&""!==s.trim()?delete t.category:t.category="Category is required";break;case"brand":s&&""!==s.trim()?delete t.brand:t.brand="Brand is required";break;case"seoDescription":s&&s.length>160?t.seoDescription="SEO description must be 160 characters or less":delete t.seoDescription;break;case"weight":if(s&&""!==s.toString().trim()){let e=parseFloat(s);isNaN(e)||e<=0?t.weight="Weight must be a valid positive number":delete t.weight}else delete t.weight;break;case"dimensions":delete t.dimensions}g(t)},Y=(e,s)=>{let t=e||v.trim();t&&(p(e=>({...e,images:[...e.images,{url:t,alt:s||e.name||"Product image"}]})),N(""))},Z=async e=>{let s=Array.from(e).filter(e=>e.type.startsWith("image/"));if(0===s.length){n.error("Please select image files");return}P(!0);let t=[],r={};try{s.forEach((e,s)=>{r[e.name]=0}),T(r);for(let e=0;e<s.length;e++){let r=s[e];if(r.size>5242880){n.error(`${r.name} is too large. Maximum size is 5MB.`),T(e=>({...e,[r.name]:-1}));continue}if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(r.type)){n.error(`${r.name} is not a supported image format`),T(e=>({...e,[r.name]:-1}));continue}try{let e=new FormData;e.append("file",r),T(e=>({...e,[r.name]:25}));let s=await fetch("/api/upload",{method:"POST",credentials:"include",body:e});if(T(e=>({...e,[r.name]:75})),s.ok){let e=await s.json();if(e.success)t.push({url:e.data.url,alt:r.name.replace(/\.[^/.]+$/,"")}),T(e=>({...e,[r.name]:100}));else throw Error(e.error||"Upload failed")}else{let e=await s.json();throw Error(e.error||"Upload failed")}}catch(e){console.error(`Error uploading ${r.name}:`,e),n.error(`Failed to upload ${r.name}: ${e.message||"Unknown error"}`),T(e=>({...e,[r.name]:-1}))}}t.length>0&&(p(e=>({...e,images:[...e.images,...t]})),n.success(`Successfully uploaded ${t.length} of ${s.length} image${1!==s.length?"s":""}`))}catch(e){console.error("Upload error:",e),n.error("Failed to upload images. Please try again.")}finally{P(!1),setTimeout(()=>T({}),2e3)}},ee=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?R(!0):"dragleave"===e.type&&R(!1)},es=e=>{p(s=>({...s,images:s.images.filter((s,t)=>t!==e)}))},et=e=>{p(s=>({...s,images:s.images.map((s,t)=>({...s,isPrimary:t===e}))}))},er=()=>{w.trim()&&(p(e=>({...e,features:[...e.features,w.trim()]})),k(""))},ea=e=>{p(s=>({...s,features:s.features.filter((s,t)=>t!==e)}))},el=()=>{C.trim()&&A.trim()&&(p(e=>({...e,specifications:[...e.specifications,{name:C.trim(),value:A.trim()}]})),L(""),S(""))},ei=e=>{p(s=>({...s,specifications:s.specifications.filter((s,t)=>t!==e)}))},en=()=>{let e={};if(u.name.trim()||(e.name="Product name is required"),u.slug.trim()?/^[a-z0-9-]+$/.test(u.slug)||(e.slug="Slug can only contain lowercase letters, numbers, and hyphens"):e.slug="URL slug is required",u.sku.trim()||(e.sku="SKU is required"),(!u.price||0>=parseFloat(u.price))&&(e.price="Valid price is required"),u.originalPrice&&""!==u.originalPrice.trim()){let s=parseFloat(u.originalPrice);isNaN(s)||s<=0?e.originalPrice="Original price must be a valid positive number":s<=parseFloat(u.price||0)&&(e.originalPrice="Original price must be greater than sale price")}if(u.category&&""!==u.category.trim()||(e.category="Category is required"),u.brand&&""!==u.brand.trim()||(e.brand="Brand is required"),(""===u.stock||0>parseInt(u.stock,10))&&(e.stock="Valid stock quantity is required"),u.seoTitle&&u.seoTitle.trim()||(e.seoTitle="SEO title is required"),u.seoDescription&&u.seoDescription.trim()?u.seoDescription.trim().length>160&&(e.seoDescription="SEO description must be 160 characters or less"):e.seoDescription="SEO description is required",u.weight&&""!==u.weight.toString().trim()){let s=parseFloat(u.weight);(isNaN(s)||s<=0)&&(e.weight="Weight must be a valid positive number")}return g(e),0===Object.keys(e).length},eo=async e=>{if(e.preventDefault(),Object.keys(u).forEach(e=>{F(s=>({...s,[e]:!0}))}),!en()){let e=Object.keys(h)[0];if(e){let s=document.querySelector(`[name="${e}"]`);s&&(s.scrollIntoView({behavior:"smooth",block:"center"}),s.focus())}n.error("Please fix the errors in the form before submitting");return}f(!0),y(10);try{let e=u.category&&""!==u.category.trim()?u.category.trim():null,r=u.brand&&""!==u.brand.trim()?u.brand.trim():null;if(!e||!r){n.error("Please select both category and brand"),f(!1),y(0);return}y(30);let a={name:u.name.trim(),slug:u.slug.trim(),description:u.description?.trim()||null,shortDescription:u.shortDescription?.trim()||null,sku:u.sku.trim(),price:parseFloat(u.price),originalPrice:u.originalPrice&&""!==u.originalPrice.trim()?parseFloat(u.originalPrice):null,categoryId:e,brandId:r,stock:parseInt(u.stock,10)||0,weight:u.weight&&""!==u.weight.toString().trim()&&!isNaN(parseFloat(u.weight))?parseFloat(u.weight):null,dimensions:u.dimensions?.trim()||null,featured:u.featured||!1,published:"active"===u.status,images:u.images&&Array.isArray(u.images)&&u.images.length>0?u.images.map((e,s)=>({url:e.url,alt:e.alt||u.name,isPrimary:0===s||e.isPrimary})):[],features:u.features||[],specifications:u.specifications||[],seoTitle:u.seoTitle.trim(),seoDescription:u.seoDescription.trim()};y(50),await t(a),y(90),n.success("Product created successfully!"),setTimeout(()=>{p({name:"",slug:"",description:"",shortDescription:"",sku:"",price:"",originalPrice:"",category:"",brand:"",stock:"",weight:"",dimensions:"",featured:!1,status:"active",images:[],features:[],specifications:[],seoTitle:"",seoDescription:""}),g({}),F({}),N(""),k(""),L(""),S(""),y(0),s()},500)}catch(e){console.error("Error adding product:",e),n.error(e.message||"Failed to add product"),y(0)}finally{f(!1)}};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-950 via-blue-900 to-slate-900 px-6 py-5 text-white relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),(0,r.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h2",{className:"text-2xl font-black tracking-tight",children:"Add New Product"}),(0,r.jsx)("p",{className:"text-sm text-blue-200 mt-0.5 font-medium",children:"Create a new product in your catalog"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-xl px-3 py-1.5",children:[(0,r.jsx)("div",{className:"w-24 bg-white/20 rounded-full h-2 overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-400 transition-all duration-300",style:{width:`${J}%`}})}),(0,r.jsxs)("span",{className:"text-xs font-bold text-white",children:[J,"%"]})]})]}),b&&(0,r.jsx)("div",{className:"mt-3 w-full bg-white/10 rounded-full h-1.5 overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-400 to-indigo-400 transition-all duration-300 ease-out",style:{width:`${j}%`}})})]}),(0,r.jsx)("button",{onClick:s,disabled:b,className:"text-white/80 hover:text-white transition-all p-2 hover:bg-white/20 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,r.jsxs)("div",{className:"overflow-y-auto flex-1 bg-gradient-to-br from-gray-50 to-white",children:[(0,r.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b-2 border-gray-200 px-6 py-3 shadow-sm",children:(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:[{id:"basic",label:"Basic Info",icon:"\uD83D\uDCDD"},{id:"pricing",label:"Pricing",icon:"\uD83D\uDCB0"},{id:"category",label:"Category",icon:"\uD83C\uDFF7️"},{id:"images",label:"Images",icon:"\uD83D\uDDBC️"},{id:"features",label:"Features",icon:"⭐"},{id:"seo",label:"SEO",icon:"\uD83D\uDD0D"},{id:"status",label:"Status",icon:"⚙️"}].map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>{B(e.id);let s=document.getElementById(`section-${e.id}`);s&&s.scrollIntoView({behavior:"smooth",block:"start"})},className:`px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${I===e.id?"bg-blue-900 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.icon," ",e.label]},e.id))})}),(0,r.jsxs)("form",{onSubmit:eo,className:"p-6 space-y-8",children:[(0,r.jsxs)("div",{id:"section-basic",className:"space-y-4 scroll-mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDD"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-black text-gray-900",children:"Basic Information"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Essential product details"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),(0,r.jsx)("input",{type:"text",name:"name",value:u.name,onChange:Q,onBlur:()=>F(e=>({...e,name:!0})),className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.name?"border-red-500 bg-red-50":$.name&&!h.name?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"Enter product name"}),h.name&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.name]}),$.name&&!h.name&&u.name&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Looks good!"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug *"}),(0,r.jsx)("input",{type:"text",name:"slug",value:u.slug,onChange:Q,onBlur:()=>F(e=>({...e,slug:!0})),className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.slug?"border-red-500 bg-red-50":$.slug&&!h.slug&&u.slug?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"product-name-slug"}),h.slug&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.slug]}),$.slug&&!h.slug&&u.slug&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Valid slug format"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from name, or customize"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU *"}),(0,r.jsx)("input",{type:"text",name:"sku",value:u.sku,onChange:Q,onBlur:()=>F(e=>({...e,sku:!0})),className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.sku?"border-red-500 bg-red-50":$.sku&&!h.sku&&u.sku?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"PROD-001"}),h.sku&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.sku]}),$.sku&&!h.sku&&u.sku&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"SKU is valid"]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Short Description"}),(0,r.jsx)("input",{type:"text",name:"shortDescription",value:u.shortDescription,onChange:Q,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all",placeholder:"Brief product summary (optional)",maxLength:160}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[u.shortDescription.length,"/160 characters"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),(0,r.jsx)("textarea",{name:"description",value:u.description,onChange:Q,onBlur:()=>F(e=>({...e,description:!0})),rows:4,className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium resize-none ${h.description?"border-red-500 bg-red-50":$.description&&!h.description&&u.description?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"Enter detailed product description (optional)"}),h.description&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.description]}),$.description&&!h.description&&u.description&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Description added"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1.5",children:"Leave empty if you prefer to use only the short description"})]})]}),(0,r.jsxs)("div",{id:"section-pricing",className:"space-y-4 scroll-mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCB0"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-black text-gray-900",children:"Pricing & Inventory"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Set prices and stock levels"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price (KES) *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-semibold",children:"KES"}),(0,r.jsx)("input",{type:"number",name:"price",value:u.price,onChange:Q,onBlur:()=>F(e=>({...e,price:!0})),step:"0.01",min:"0",className:`w-full pl-12 pr-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.price?"border-red-500 bg-red-50":$.price&&!h.price&&u.price?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"0.00"})]}),h.price&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.price]}),$.price&&!h.price&&u.price&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Price is valid"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Original Price (KES) ",(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-semibold",children:"KES"}),(0,r.jsx)("input",{type:"number",name:"originalPrice",value:u.originalPrice,onChange:Q,onBlur:()=>F(e=>({...e,originalPrice:!0})),step:"0.01",min:"0",className:`w-full pl-12 pr-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.originalPrice?"border-red-500 bg-red-50":$.originalPrice&&!h.originalPrice&&u.originalPrice?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"0.00"})]}),h.originalPrice&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.originalPrice]}),$.originalPrice&&!h.originalPrice&&u.originalPrice&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Original price set"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1.5",children:"Leave empty if there's no original price (for showing discount)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Quantity *"}),(0,r.jsx)("input",{type:"number",name:"stock",value:u.stock,onChange:Q,onBlur:()=>F(e=>({...e,stock:!0})),min:"0",className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.stock?"border-red-500 bg-red-50":$.stock&&!h.stock&&""!==u.stock?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"0"}),h.stock&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.stock]}),$.stock&&!h.stock&&""!==u.stock&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Stock quantity set"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Weight (kg) ",(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),(0,r.jsx)("input",{type:"number",name:"weight",value:u.weight,onChange:Q,onBlur:()=>F(e=>({...e,weight:!0})),step:"0.01",min:"0",className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.weight?"border-red-500 bg-red-50":$.weight&&!h.weight&&u.weight?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"0.00"}),h.weight&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.weight]}),$.weight&&!h.weight&&u.weight&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Weight set"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Dimensions (L x W x H) ",(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),(0,r.jsx)("input",{type:"text",name:"dimensions",value:u.dimensions,onChange:Q,onBlur:()=>F(e=>({...e,dimensions:!0})),className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${$.dimensions&&u.dimensions?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"e.g., 10 x 5 x 3 cm"}),$.dimensions&&u.dimensions&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Dimensions added"]})]})]})]}),(0,r.jsxs)("div",{id:"section-category",className:"space-y-4 scroll-mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFF7️"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-black text-gray-900",children:"Category & Brand"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Organize your product"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:z,onChange:e=>V(e.target.value),onFocus:()=>V(""),placeholder:"Search categories...",className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all mb-2"}),(0,r.jsxs)("select",{name:"category",value:u.category,onChange:Q,onBlur:()=>{F(e=>({...e,category:!0})),V("")},className:`w-full px-4 py-2.5 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.category?"border-red-500 bg-red-50":$.category&&!h.category&&u.category?"border-green-500 bg-green-50":"border-gray-200"}`,children:[(0,r.jsx)("option",{value:"",children:"Select Category"}),K.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),h.category&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.category]}),$.category&&!h.category&&u.category&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Category selected"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Brand ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:W,onChange:e=>q(e.target.value),onFocus:()=>q(""),placeholder:"Search brands...",className:"w-full px-4 py-2.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all mb-2"}),(0,r.jsxs)("select",{name:"brand",value:u.brand,onChange:Q,onBlur:()=>{F(e=>({...e,brand:!0})),q("")},className:`w-full px-4 py-2.5 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.brand?"border-red-500 bg-red-50":$.brand&&!h.brand&&u.brand?"border-green-500 bg-green-50":"border-gray-200"}`,children:[(0,r.jsx)("option",{value:"",children:"Select Brand"}),_.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),h.brand&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.brand]}),$.brand&&!h.brand&&u.brand&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Brand selected"]})]})]})]}),(0,r.jsxs)("div",{id:"section-images",className:"space-y-4 scroll-mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-pink-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDDBC️"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-black text-gray-900",children:["Product Images ",(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Upload product photos (optional)"})]})]}),u.images.length>0&&(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:u.images.map((e,s)=>(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:`aspect-square rounded-xl overflow-hidden border-2 ${e.isPrimary?"border-blue-900 ring-2 ring-blue-500":"border-gray-200"}`,children:(0,r.jsx)("img",{src:e.url,alt:e.alt,className:"w-full h-full object-cover",onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="200"%3E%3Crect fill="%23ddd" width="200" height="200"/%3E%3Ctext fill="%23999" font-family="sans-serif" font-size="14" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EImage%3C/text%3E%3C/svg%3E'}})}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!e.isPrimary&&(0,r.jsx)("button",{type:"button",onClick:()=>et(s),className:"bg-blue-900 text-white p-1.5 rounded-lg text-xs hover:bg-blue-800 shadow-lg",title:"Set as primary",children:"⭐"}),(0,r.jsx)("button",{type:"button",onClick:()=>es(s),className:"bg-red-600 text-white p-1.5 rounded-lg text-xs hover:bg-red-700 shadow-lg",title:"Remove",children:"✕"})]}),e.isPrimary&&(0,r.jsx)("div",{className:"absolute bottom-2 left-2 bg-blue-900 text-white px-2 py-1 rounded-lg text-xs font-semibold",children:"Primary"})]},s))}),(0,r.jsxs)("div",{ref:G,onDragEnter:ee,onDragLeave:ee,onDragOver:ee,onDrop:e=>{e.preventDefault(),e.stopPropagation(),R(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&Z(e.dataTransfer.files)},className:`border-2 border-dashed rounded-xl p-8 text-center transition-all relative ${U?"border-blue-900 bg-blue-50 ring-4 ring-blue-200":"border-gray-300 hover:border-blue-500 hover:bg-gray-50"}`,children:[(0,r.jsx)("input",{ref:H,type:"file",accept:"image/*",multiple:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&(Z(e.target.files),e.target.value="")},className:"hidden"}),M?(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"relative w-16 h-16",children:(0,r.jsxs)("svg",{className:"animate-spin h-16 w-16 text-blue-900",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,r.jsxs)("div",{className:"w-full max-w-xs",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Uploading images..."}),Object.keys(O).length>0&&(0,r.jsx)("div",{className:"space-y-1",children:Object.entries(O).map(([e,s])=>(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,r.jsx)("span",{className:"truncate",children:e}),(0,r.jsx)("span",{children:s>0?`${s}%`:-1===s?"Failed":"Pending"})]}),s>0&&s<100&&(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,r.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${s}%`}})})]},e))})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,r.jsxs)("p",{className:"text-base font-semibold text-gray-700 mb-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>H.current?.click(),className:"text-blue-900 hover:text-blue-800 font-bold underline decoration-2",children:"Click to upload"})," ","or drag and drop images here"]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"PNG, JPG, WEBP up to 5MB each • Multiple files supported"}),u.images.length>0&&(0,r.jsxs)("p",{className:"text-sm text-green-600 font-semibold mt-2",children:["✓ ",u.images.length," image",1!==u.images.length?"s":""," added"]})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>D(!0),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors font-medium border border-gray-200",children:"\uD83D\uDCDA Select from Media Library"}),(0,r.jsxs)("div",{className:"flex-1 flex gap-2",children:[(0,r.jsx)("input",{type:"url",value:v,onChange:e=>N(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),Y()),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all",placeholder:"Or enter image URL"}),(0,r.jsx)("button",{type:"button",onClick:()=>Y(),className:"px-4 py-2 bg-blue-900 text-white rounded-xl hover:bg-blue-800 transition-colors font-medium",children:"Add URL"})]})]}),h.images&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:h.images}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Upload images from your computer, select from media library, or add by URL. First image will be set as primary."})]}),(0,r.jsxs)("div",{id:"section-features",className:"space-y-4 scroll-mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"⭐"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-black text-gray-900",children:"Product Features"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Highlight key features"})]})]}),u.features.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:u.features.map((e,s)=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-900 px-3 py-1 rounded-lg border border-blue-200",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>ea(s),className:"text-blue-600 hover:text-blue-900",children:"✕"})]},s))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:w,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),er()),className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all",placeholder:"Enter feature (e.g., 'Wireless charging')"}),(0,r.jsx)("button",{type:"button",onClick:er,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors",children:"Add Feature"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2",children:"Specifications"}),u.specifications.length>0&&(0,r.jsx)("div",{className:"space-y-2",children:u.specifications.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("span",{className:"font-medium text-gray-900",children:[e.name,":"]}),(0,r.jsx)("span",{className:"text-gray-600 ml-2",children:e.value})]}),(0,r.jsx)("button",{type:"button",onClick:()=>ei(s),className:"text-red-600 hover:text-red-800 ml-4",children:"✕"})]},s))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,r.jsx)("input",{type:"text",value:C,onChange:e=>L(e.target.value),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all",placeholder:"Spec name (e.g., 'Color')"}),(0,r.jsx)("input",{type:"text",value:A,onChange:e=>S(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),el()),className:"px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all",placeholder:"Spec value (e.g., 'Black')"}),(0,r.jsx)("button",{type:"button",onClick:el,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors",children:"Add Spec"})]})]}),(0,r.jsxs)("div",{id:"section-seo",className:"space-y-4 scroll-mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD0D"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-black text-gray-900",children:"SEO Settings"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Optimize for search engines"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SEO Title *"}),(0,r.jsx)("input",{type:"text",name:"seoTitle",value:u.seoTitle,onChange:Q,onBlur:()=>F(e=>({...e,seoTitle:!0})),className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium ${h.seoTitle?"border-red-500 bg-red-50":$.seoTitle&&!h.seoTitle&&u.seoTitle?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"SEO-friendly title"}),h.seoTitle&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.seoTitle]}),$.seoTitle&&!h.seoTitle&&u.seoTitle&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"SEO title is valid"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SEO Description *"}),(0,r.jsx)("textarea",{name:"seoDescription",value:u.seoDescription,onChange:Q,onBlur:()=>F(e=>({...e,seoDescription:!0})),rows:3,maxLength:160,className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all font-medium resize-none ${h.seoDescription?"border-red-500 bg-red-50":$.seoDescription&&!h.seoDescription&&u.seoDescription?"border-green-500 bg-green-50":"border-gray-200"}`,placeholder:"SEO meta description (160 characters max)"}),h.seoDescription&&(0,r.jsxs)("p",{className:"text-red-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.seoDescription]}),$.seoDescription&&!h.seoDescription&&u.seoDescription&&(0,r.jsxs)("p",{className:"text-green-600 text-sm mt-1.5 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"SEO description is valid"]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1.5",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[u.seoDescription.length,"/160 characters"]}),u.seoDescription.length>=120&&u.seoDescription.length<=160&&(0,r.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"✓ Optimal length"})]})]})]}),(0,r.jsxs)("div",{id:"section-status",className:"space-y-4 scroll-mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"⚙️"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-black text-gray-900",children:"Status & Options"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Publishing and visibility settings"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{name:"status",value:u.status,onChange:Q,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all",children:[(0,r.jsx)("option",{value:"active",children:"Active (Published)"}),(0,r.jsx)("option",{value:"draft",children:"Draft (Unpublished)"})]})]}),(0,r.jsxs)("div",{className:"flex items-center pt-8",children:[(0,r.jsx)("input",{type:"checkbox",name:"featured",checked:u.featured,onChange:Q,className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsxs)("label",{className:"ml-3 block text-sm text-gray-700",children:[(0,r.jsx)("span",{className:"font-medium",children:"Featured Product"}),(0,r.jsx)("span",{className:"block text-xs text-gray-500",children:"Show on homepage and featured sections"})]})]})]})]}),(0,r.jsx)("div",{className:"sticky bottom-0 bg-white border-t-2 border-gray-200 px-6 py-4 -mx-6 -mb-6 shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Required fields: "}),(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{type:"button",onClick:s,disabled:b,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:b||Object.keys(h).length>0,className:"px-8 py-3 bg-gradient-to-r from-blue-900 to-indigo-900 text-white rounded-xl hover:from-blue-800 hover:to-indigo-800 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-bold shadow-lg hover:shadow-xl flex items-center gap-2",children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Product..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Create Product"]})})]})]})})]})]}),(0,r.jsx)(m,{isOpen:E,onClose:()=>D(!1),onSelectImage:e=>{Y(e.url,e.alt)},multiple:!0})]})}):null}function u({isOpen:e,onClose:s,product:t,onUpdateProduct:l}){let{data:i}=(0,o.Ck)(),{data:n}=(0,o.Ek)(),d=(0,a.useMemo)(()=>i?Array.isArray(i)?i:i.categories&&Array.isArray(i.categories)?i.categories:i.data&&Array.isArray(i.data)?i.data:[]:[],[i]),c=(0,a.useMemo)(()=>n?Array.isArray(n)?n:n.brands&&Array.isArray(n.brands)?n.brands:n.data&&Array.isArray(n.data)?n.data:[]:[],[n]),[m,x]=(0,a.useState)({name:"",description:"",sku:"",price:"",originalPrice:"",category:"",brand:"",stock:"",featured:!1,published:!0}),[u,p]=(0,a.useState)({}),[h,g]=(0,a.useState)(!1),b=e=>{let{name:s,value:t,type:r,checked:a}=e.target;x(e=>({...e,[s]:"checkbox"===r?a:t})),u[s]&&p(e=>({...e,[s]:""}))},f=()=>{let e={};return m.name.trim()||(e.name="Product name is required"),m.description.trim()||(e.description="Description is required"),m.sku.trim()||(e.sku="SKU is required"),(!m.price||0>=parseFloat(m.price))&&(e.price="Valid price is required"),m.category||(e.category="Category is required"),m.brand||(e.brand="Brand is required"),(""===m.stock||0>parseInt(m.stock))&&(e.stock="Valid stock quantity is required"),p(e),0===Object.keys(e).length},j=async e=>{if(e.preventDefault(),f()){g(!0);try{await l({name:m.name,description:m.description,sku:m.sku,price:parseFloat(m.price),originalPrice:m.originalPrice?parseFloat(m.originalPrice):null,categoryId:m.category,brandId:m.brand,stock:parseInt(m.stock),featured:m.featured,published:m.published}),s()}catch(e){console.error("Error updating product:",e)}finally{g(!1)}}};return e&&t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:s,children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Product"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:j,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),(0,r.jsx)("input",{type:"text",name:"name",value:m.name,onChange:b,className:`w-full border rounded-lg px-3 py-2 ${u.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter product name"}),u.name&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,r.jsx)("textarea",{name:"description",value:m.description,onChange:b,rows:3,className:`w-full border rounded-lg px-3 py-2 ${u.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter product description"}),u.description&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),(0,r.jsx)("input",{type:"text",name:"sku",value:m.sku,onChange:b,className:`w-full border rounded-lg px-3 py-2 ${u.sku?"border-red-500":"border-gray-300"}`,placeholder:"Enter SKU"}),u.sku&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.sku})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Stock *"}),(0,r.jsx)("input",{type:"number",name:"stock",value:m.stock,onChange:b,min:"0",className:`w-full border rounded-lg px-3 py-2 ${u.stock?"border-red-500":"border-gray-300"}`,placeholder:"Enter stock quantity"}),u.stock&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.stock})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (KES) *"}),(0,r.jsx)("input",{type:"number",name:"price",value:m.price,onChange:b,step:"0.01",min:"0",className:`w-full border rounded-lg px-3 py-2 ${u.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),u.price&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.price})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price (KES)"}),(0,r.jsx)("input",{type:"number",name:"originalPrice",value:m.originalPrice,onChange:b,step:"0.01",min:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,r.jsxs)("select",{name:"category",value:m.category,onChange:b,className:`w-full border rounded-lg px-3 py-2 ${u.category?"border-red-500":"border-gray-300"}`,children:[(0,r.jsx)("option",{value:"",children:"Select category"}),d.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),u.category&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.category})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand *"}),(0,r.jsxs)("select",{name:"brand",value:m.brand,onChange:b,className:`w-full border rounded-lg px-3 py-2 ${u.brand?"border-red-500":"border-gray-300"}`,children:[(0,r.jsx)("option",{value:"",children:"Select brand"}),c.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),u.brand&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.brand})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",name:"featured",checked:m.featured,onChange:b,className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Featured Product"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",name:"published",checked:m.published,onChange:b,className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Published"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50",children:h?"Updating...":"Update Product"})]})]})]})}):null}function p({isOpen:e,onClose:s,onCreateCoupon:t}){let[l,i]=(0,a.useState)({code:"",name:"",description:"",type:"PERCENTAGE",value:"",minOrderAmount:"",maxDiscount:"",usageLimit:"",userUsageLimit:"",validFrom:new Date().toISOString().split("T")[0],validUntil:""}),[n,o]=(0,a.useState)({}),[d,c]=(0,a.useState)(!1),m=e=>{let{name:s,value:t}=e.target;i(e=>({...e,[s]:t})),n[s]&&o(e=>({...e,[s]:""}))},x=()=>{let e={};l.code.trim()?l.code.trim().length<3?e.code="Coupon code must be at least 3 characters":/^[A-Z0-9]+$/.test(l.code.trim().toUpperCase())||(e.code="Coupon code can only contain letters and numbers"):e.code="Coupon code is required",l.name.trim()?l.name.trim().length<3&&(e.name="Coupon name must be at least 3 characters"):e.name="Coupon name is required",l.type||(e.type="Coupon type is required");let s=parseFloat(l.value);if(!l.value||isNaN(s)||s<=0?e.value="Valid value is required":"PERCENTAGE"===l.type&&s>100?e.value="Percentage cannot exceed 100%":"FIXED_AMOUNT"===l.type&&s<=0&&(e.value="Fixed amount must be greater than 0"),l.minOrderAmount){let s=parseFloat(l.minOrderAmount);(isNaN(s)||s<0)&&(e.minOrderAmount="Minimum order amount must be a positive number")}if(l.maxDiscount){let t=parseFloat(l.maxDiscount);(isNaN(t)||t<0)&&(e.maxDiscount="Maximum discount must be a positive number"),"PERCENTAGE"===l.type&&s&&t<100*s/100&&(e.maxDiscount="Maximum discount should be reasonable for the percentage")}if(l.usageLimit){let s=parseInt(l.usageLimit,10);(isNaN(s)||s<1)&&(e.usageLimit="Usage limit must be at least 1")}if(l.userUsageLimit){let s=parseInt(l.userUsageLimit,10);(isNaN(s)||s<1)&&(e.userUsageLimit="Per user limit must be at least 1")}if(l.validFrom&&isNaN(new Date(l.validFrom).getTime())&&(e.validFrom="Invalid date"),l.validUntil){let s=new Date(l.validUntil);isNaN(s.getTime())?e.validUntil="Invalid date":l.validFrom&&s<new Date(l.validFrom)&&(e.validUntil="Valid until date must be after valid from date")}return o(e),0===Object.keys(e).length},u=async e=>{if(e.preventDefault(),x()){c(!0);try{await t({code:l.code.trim().toUpperCase(),name:l.name.trim(),description:l.description.trim()||null,type:l.type,value:parseFloat(l.value),minOrderAmount:l.minOrderAmount?parseFloat(l.minOrderAmount):null,maxDiscount:l.maxDiscount?parseFloat(l.maxDiscount):null,usageLimit:l.usageLimit?parseInt(l.usageLimit,10):null,userUsageLimit:l.userUsageLimit?parseInt(l.userUsageLimit,10):null,validFrom:l.validFrom||new Date().toISOString().split("T")[0],validUntil:l.validUntil||null}),i({code:"",name:"",description:"",type:"PERCENTAGE",value:"",minOrderAmount:"",maxDiscount:"",usageLimit:"",userUsageLimit:"",validFrom:new Date().toISOString().split("T")[0],validUntil:""}),o({}),s()}catch(e){console.error("Error creating coupon:",e)}finally{c(!1)}}};return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:s,children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Create Coupon"}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:u,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Code *"}),(0,r.jsx)("input",{type:"text",name:"code",value:l.code,onChange:m,className:`w-full border rounded-lg px-3 py-2 ${n.code?"border-red-500":"border-gray-300"}`,placeholder:"SAVE20"}),n.code&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.code})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Name *"}),(0,r.jsx)("input",{type:"text",name:"name",value:l.name,onChange:m,className:`w-full border rounded-lg px-3 py-2 ${n.name?"border-red-500":"border-gray-300"}`,placeholder:"20% Off Sale"}),n.name&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.name})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{name:"description",value:l.description,onChange:m,rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Coupon description"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,r.jsxs)("select",{name:"type",value:l.type,onChange:m,className:`w-full border rounded-lg px-3 py-2 ${n.type?"border-red-500":"border-gray-300"}`,children:[(0,r.jsx)("option",{value:"PERCENTAGE",children:"Percentage"}),(0,r.jsx)("option",{value:"FIXED_AMOUNT",children:"Fixed Amount"}),(0,r.jsx)("option",{value:"FREE_SHIPPING",children:"Free Shipping"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value *"}),(0,r.jsx)("input",{type:"number",name:"value",value:l.value,onChange:m,step:"0.01",min:"0",className:`w-full border rounded-lg px-3 py-2 ${n.value?"border-red-500":"border-gray-300"}`,placeholder:"PERCENTAGE"===l.type?"20":"500"}),n.value&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.value})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Order Amount"}),(0,r.jsx)("input",{type:"number",name:"minOrderAmount",value:l.minOrderAmount,onChange:m,step:"0.01",min:"0",className:`w-full border rounded-lg px-3 py-2 ${n.minOrderAmount?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),n.minOrderAmount&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.minOrderAmount})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Discount"}),(0,r.jsx)("input",{type:"number",name:"maxDiscount",value:l.maxDiscount,onChange:m,step:"0.01",min:"0",className:`w-full border rounded-lg px-3 py-2 ${n.maxDiscount?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),n.maxDiscount&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.maxDiscount})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usage Limit"}),(0,r.jsx)("input",{type:"number",name:"usageLimit",value:l.usageLimit,onChange:m,min:"0",className:`w-full border rounded-lg px-3 py-2 ${n.usageLimit?"border-red-500":"border-gray-300"}`,placeholder:"Unlimited"}),n.usageLimit&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.usageLimit}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited usage"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per User Limit"}),(0,r.jsx)("input",{type:"number",name:"userUsageLimit",value:l.userUsageLimit,onChange:m,min:"0",className:`w-full border rounded-lg px-3 py-2 ${n.userUsageLimit?"border-red-500":"border-gray-300"}`,placeholder:"1"}),n.userUsageLimit&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.userUsageLimit}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"How many times a single user can use this coupon"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),(0,r.jsx)("input",{type:"date",name:"validFrom",value:l.validFrom,onChange:m,min:new Date().toISOString().split("T")[0],className:`w-full border rounded-lg px-3 py-2 ${n.validFrom?"border-red-500":"border-gray-300"}`}),n.validFrom&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.validFrom})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),(0,r.jsx)("input",{type:"date",name:"validUntil",value:l.validUntil,onChange:m,min:l.validFrom||new Date().toISOString().split("T")[0],className:`w-full border rounded-lg px-3 py-2 ${n.validUntil?"border-red-500":"border-gray-300"}`}),n.validUntil&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:n.validUntil}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for no expiration"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50",children:d?"Creating...":"Create Coupon"})]})]})]})}):null}function h({isOpen:e,onClose:s,coupon:t,onUpdateCoupon:l}){let[i,n]=(0,a.useState)({name:"",description:"",type:"PERCENTAGE",value:"",minOrderAmount:"",maxDiscount:"",usageLimit:"",userUsageLimit:"",status:"ACTIVE",validFrom:"",validUntil:""}),[o,d]=(0,a.useState)({}),[c,m]=(0,a.useState)(!1),x=e=>{let{name:s,value:t}=e.target;n(e=>({...e,[s]:t})),o[s]&&d(e=>({...e,[s]:""}))},u=()=>{let e={};return i.name.trim()||(e.name="Coupon name is required"),i.type||(e.type="Coupon type is required"),(!i.value||0>=parseFloat(i.value))&&(e.value="Valid value is required"),"PERCENTAGE"===i.type&&parseFloat(i.value)>100&&(e.value="Percentage cannot exceed 100%"),d(e),0===Object.keys(e).length},p=async e=>{if(e.preventDefault(),u()){m(!0);try{await l(t.id,{name:i.name,description:i.description,type:i.type,value:parseFloat(i.value),minOrderAmount:i.minOrderAmount?parseFloat(i.minOrderAmount):null,maxDiscount:i.maxDiscount?parseFloat(i.maxDiscount):null,usageLimit:i.usageLimit?parseInt(i.usageLimit):null,userUsageLimit:i.userUsageLimit?parseInt(i.userUsageLimit):null,status:i.status,validFrom:i.validFrom,validUntil:i.validUntil||null}),s()}catch(e){console.error("Error updating coupon:",e)}finally{m(!1)}}};return e&&t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:s,children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Edit Coupon: ",t.code]}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:p,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Code"}),(0,r.jsx)("input",{type:"text",value:t.code,disabled:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Code cannot be changed"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Name *"}),(0,r.jsx)("input",{type:"text",name:"name",value:i.name,onChange:x,className:`w-full border rounded-lg px-3 py-2 ${o.name?"border-red-500":"border-gray-300"}`}),o.name&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.name})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{name:"description",value:i.description,onChange:x,rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,r.jsxs)("select",{name:"type",value:i.type,onChange:x,className:`w-full border rounded-lg px-3 py-2 ${o.type?"border-red-500":"border-gray-300"}`,children:[(0,r.jsx)("option",{value:"PERCENTAGE",children:"Percentage"}),(0,r.jsx)("option",{value:"FIXED_AMOUNT",children:"Fixed Amount"}),(0,r.jsx)("option",{value:"FREE_SHIPPING",children:"Free Shipping"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value *"}),(0,r.jsx)("input",{type:"number",name:"value",value:i.value,onChange:x,step:"0.01",min:"0",className:`w-full border rounded-lg px-3 py-2 ${o.value?"border-red-500":"border-gray-300"}`}),o.value&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.value})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Order Amount"}),(0,r.jsx)("input",{type:"number",name:"minOrderAmount",value:i.minOrderAmount,onChange:x,step:"0.01",min:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Discount"}),(0,r.jsx)("input",{type:"number",name:"maxDiscount",value:i.maxDiscount,onChange:x,step:"0.01",min:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usage Limit"}),(0,r.jsx)("input",{type:"number",name:"usageLimit",value:i.usageLimit,onChange:x,min:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per User Limit"}),(0,r.jsx)("input",{type:"number",name:"userUsageLimit",value:i.userUsageLimit,onChange:x,min:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,r.jsxs)("select",{name:"status",value:i.status,onChange:x,className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[(0,r.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,r.jsx)("option",{value:"INACTIVE",children:"Inactive"}),(0,r.jsx)("option",{value:"EXPIRED",children:"Expired"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),(0,r.jsx)("input",{type:"date",name:"validFrom",value:i.validFrom,onChange:x,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until"}),(0,r.jsx)("input",{type:"date",name:"validUntil",value:i.validUntil,onChange:x,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50",children:c?"Updating...":"Update Coupon"})]})]})]})}):null}function g({isOpen:e,onClose:s,onConfirm:t,title:a="Confirm Delete",message:l="Are you sure you want to delete this item? This action cannot be undone.",confirmText:i="Delete",cancelText:n="Cancel",itemName:o=null,isLoading:d=!1}){return e?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm",onClick:s,children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:a})]})}),(0,r.jsxs)("div",{className:"px-6 py-6",children:[(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:l}),o&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Item:"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 font-semibold mt-1",children:o})]}),(0,r.jsx)("p",{className:"text-sm text-red-600 font-medium",children:"⚠️ This action cannot be undone."})]}),(0,r.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-end gap-3 rounded-b-xl",children:[(0,r.jsx)("button",{type:"button",onClick:s,disabled:d,className:"px-4 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n}),(0,r.jsx)("button",{type:"button",onClick:()=>{t()},disabled:d,className:"px-4 py-2 text-sm font-semibold text-white bg-gradient-to-r from-red-600 to-red-700 rounded-lg hover:from-red-700 hover:to-red-800 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),i]})})]})]})}):null}let b=[{id:"overview",label:"Overview",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"orders",label:"Orders",icon:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"},{id:"products",label:"Products",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{id:"users",label:"Users",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{id:"analytics",label:"Analytics",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"coupons",label:"Coupons",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},{id:"reviews",label:"Reviews",icon:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},{id:"settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}];function f({activeTab:e,setActiveTab:s,tabs:t}){return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border mb-8",children:(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{role:"tablist","aria-label":"Admin dashboard sections",className:"flex space-x-8 px-6",children:(t||b).map(t=>(0,r.jsxs)("button",{role:"tab","aria-selected":e===t.id,"aria-controls":`admin-tabpanel-${t.id}`,id:`admin-tab-${t.id}`,onClick:()=>s(t.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${e===t.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:t.icon})}),(0,r.jsx)("span",{children:t.label})]},t.id))})})})}var j=t(42701);function y({stats:e,recentOrders:s,lowStockProducts:t,statusColors:a,paymentStatusColors:l,formatDate:i,setActiveTab:n}){return(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-overview","aria-labelledby":"admin-tab-overview",className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Revenue"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:(0,j.L)(e.totalRevenue||0)}),void 0!==e.revenueGrowth&&null!==e.revenueGrowth&&(0,r.jsxs)("p",{className:"text-sm text-green-600 font-medium",children:[(0,r.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"+",e.revenueGrowth,"%"]}),(0,r.jsx)("span",{className:"text-gray-500 ml-1",children:"from last month"})]})]}),(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-500/20",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Orders"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:(e.totalOrders||0).toLocaleString()}),e.pendingOrders>0&&(0,r.jsx)("p",{className:"text-sm text-amber-600 font-medium",children:(0,r.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.pendingOrders," pending"]})})]}),(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Products"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:e.totalProducts||0}),e.lowStockProducts>0&&(0,r.jsx)("p",{className:"text-sm text-red-600 font-medium",children:(0,r.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.lowStockProducts," low stock"]})})]}),(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Users"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:(e.totalUsers||0).toLocaleString()}),e.newUsersToday>0&&(0,r.jsx)("p",{className:"text-sm text-green-600 font-medium",children:(0,r.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"+",e.newUsersToday," today"]})})]}),(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/20",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Recent Orders"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Latest customer orders"})]}),(0,r.jsxs)("button",{onClick:()=>n&&n("orders"),className:"text-blue-600 hover:text-blue-900 text-sm font-semibold transition-colors flex items-center gap-1 group",children:["View All",(0,r.jsx)("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-3",children:0===s.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,r.jsx)("p",{className:"text-gray-500 mt-4 font-medium",children:"No recent orders found"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Orders will appear here once customers start placing them"})]}):s.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 border border-gray-200 hover:border-blue-300 transition-all duration-200 group",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("p",{className:"font-bold text-gray-900 truncate",children:e.orderNumber||`Order #${e.id.slice(-8)}`}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-2 flex-shrink-0",children:[(0,r.jsx)("span",{className:`px-2.5 py-1 rounded-lg text-xs font-semibold ${a[e.status]||"bg-gray-100 text-gray-800"}`,children:e.status}),(0,r.jsx)("span",{className:`px-2.5 py-1 rounded-lg text-xs font-semibold ${l[e.paymentStatus]||"bg-gray-100 text-gray-800"}`,children:e.paymentStatus})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600 mb-1 flex-wrap",children:[(0,r.jsx)("p",{className:"font-medium",children:e.user?.name||"Unknown Customer"}),e.paymentMethod&&(0,r.jsxs)("span",{className:"text-gray-500",children:["• ",e.paymentMethod.toUpperCase()]}),e.mpesaReceiptNumber&&(0,r.jsxs)("span",{className:"text-green-600 font-mono text-xs bg-green-50 px-2 py-0.5 rounded",children:["Receipt: ",e.mpesaReceiptNumber]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:i(e.createdAt)})]}),(0,r.jsxs)("div",{className:"text-right ml-4 flex-shrink-0",children:[(0,r.jsx)("p",{className:"font-bold text-blue-600 text-lg",children:(0,j.L)(e.total||0)}),"COMPLETED"===e.paymentStatus&&(0,r.jsxs)("p",{className:"text-xs text-green-600 mt-1 font-medium flex items-center gap-1 justify-end",children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Paid"]})]})]},e.id))})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Low Stock Alert"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Products needing restock"})]}),(0,r.jsxs)("button",{onClick:()=>n&&n("products"),className:"text-blue-600 hover:text-blue-900 text-sm font-semibold transition-colors flex items-center gap-1 group",children:["Manage Stock",(0,r.jsx)("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-3",children:0===t.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("p",{className:"text-gray-500 mt-4 font-medium",children:"All products are well stocked"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"No action needed at this time"})]}):t.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-xl border-2 border-red-200 hover:border-red-300 transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-bold text-gray-900 truncate",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-0.5",children:["SKU: ",e.sku]}),(0,r.jsxs)("p",{className:"text-sm text-red-600 font-bold mt-1 flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Stock: ",e.stock," (Min: ",e.minStock||5,")"]})]}),(0,r.jsxs)("div",{className:"text-right ml-4 flex-shrink-0",children:[(0,r.jsx)("p",{className:"font-bold text-gray-900",children:(0,j.L)(e.price)}),(0,r.jsx)("button",{onClick:()=>n&&n("products"),className:"text-sm text-blue-600 hover:text-blue-900 font-semibold mt-1 transition-colors",children:"Restock →"})]})]},e.id))})})]})]})]})}var v=t(79420);let N=[{id:"overview",label:"Overview",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"orders",label:"Orders",icon:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"},{id:"products",label:"Products",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{id:"users",label:"Users",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{id:"analytics",label:"Analytics",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"coupons",label:"Coupons",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},{id:"reviews",label:"Reviews",icon:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},{id:"settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}];function w(){let{data:e}=(0,l.useSession)(),s=e?.user?.role||"USER",t=(0,a.useMemo)(()=>"ADMIN"===s?N:"MODERATOR"===s?N.filter(e=>["overview","orders","products","reviews"].includes(e.id)):N.filter(e=>"overview"===e.id),[s]),[i,m]=(0,a.useState)(t[0]?.id||"overview"),b="ADMIN"===s||"MODERATOR"===s,[w,k]=(0,a.useState)(!1),[C,L]=(0,a.useState)(null),[A,S]=(0,a.useState)(null),[E,D]=(0,a.useState)(null),[M,P]=(0,a.useState)(null),[O,T]=(0,a.useState)(null),[U,R]=(0,a.useState)(!1),[I,B]=(0,a.useState)({store:null,smtp:null}),[$,F]=(0,a.useState)(!0),[z,V]=(0,a.useState)(!1),[W,q]=(0,a.useState)("all"),[H,G]=(0,a.useState)("newest"),[K,_]=(0,a.useState)([]),[J,Q]=(0,a.useState)(null),[X,Y]=(0,a.useState)(""),[Z,ee]=(0,a.useState)("30days"),[es,et]=(0,a.useState)({isOpen:!1,type:null,id:null,name:null}),[er,ea]=(0,a.useState)(!1),[el,ei]=(0,a.useState)(""),[en,eo]=(0,a.useState)(""),[ed,ec]=(0,a.useState)(""),[em,ex]=(0,a.useState)(""),[eu,ep]=(0,a.useState)(""),[eh,eg]=(0,a.useState)(""),{data:eb,loading:ef,refetch:ej}=(0,o.QT)({}),{data:ey,loading:ev}=(0,o.Ck)(),{data:eN,loading:ew}=(0,o.Ek)(),{data:ek,loading:eC,refetch:eL}=(0,o.h)({}),{data:eA,loading:eS,refetch:eE}=(0,o.kp)({}),{data:eD,loading:eM,refetch:eP}=(0,o.GR)(),{data:eO,loading:eT,refetch:eU}=(0,o.hD)({}),{data:eR,loading:eI,refetch:eB}=(0,o.SC)({limit:100}),e$=eb?.products||eb?.data?.products||[],eF=Array.isArray(ey)?ey:ey?.data||[],ez=Array.isArray(eN)?eN:eN?.data||[],eV=ek?.orders||ek?.data?.orders||[],eW=eA?.users||eA?.data?.users||[],eq=(0,a.useMemo)(()=>eO?Array.isArray(eO)?eO:eO.coupons&&Array.isArray(eO.coupons)?eO.coupons:eO.data?.coupons&&Array.isArray(eO.data.coupons)?eO.data.coupons:[]:[],[eO]),eH=eR?.reviews||eR?.data?.reviews||[],eG=eD||{totalProducts:e$.length,totalCategories:eF.length,totalBrands:ez.length,totalOrders:eV.length,totalRevenue:eV.reduce((e,s)=>e+(s.total||0),0),pendingOrders:eV.filter(e=>"PENDING"===e.status).length,lowStockProducts:e$.filter(e=>5>=(e.stock||0)).length,revenueGrowth:0,totalUsers:0,newUsersToday:0},eK=eV.slice(0,5),e_=e$.filter(e=>5>=(e.stock||0)).slice(0,5),eJ=eV.filter(e=>{let s=!el||(e.orderNumber||e.id).toString().toLowerCase().includes(el.toLowerCase())||e.user?.name?.toLowerCase().includes(el.toLowerCase())||e.user?.email?.toLowerCase().includes(el.toLowerCase()),t=!en||e.status===en;return s&&t}),eQ=e$.filter(e=>{if(!ed)return!0;try{let s=String(ed||"").toLowerCase(),t=String(e?.name||"").toLowerCase(),r=String(e?.description||"").toLowerCase(),a=e?.category?("string"==typeof e.category?e.category:String(e.category?.name||"")).toLowerCase():"",l=String(e?.sku||"").toLowerCase();return t.includes(s)||r.includes(s)||a.includes(s)||l.includes(s)}catch(s){return console.error("Error filtering product:",s,e),!0}}),eX=eW.filter(e=>{let s=!em||e.name?.toLowerCase().includes(em.toLowerCase())||e.email?.toLowerCase().includes(em.toLowerCase()),t=!eu||e.role===eu;return s&&t}),eY=(0,d.d)(),eZ={PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-purple-100 text-purple-800",SHIPPED:"bg-indigo-100 text-indigo-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"},e0={PENDING:"bg-amber-100 text-amber-800",COMPLETED:"bg-green-100 text-green-800",FAILED:"bg-red-100 text-red-800",REFUNDED:"bg-gray-100 text-gray-800"},e2=e=>{if(!e)return"—";try{let s=new Date(e);if(isNaN(s.getTime()))return"—";return s.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return"—"}},e1=async e=>{try{let s=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),t=null,r="";try{(r=await s.text())&&(t=JSON.parse(r))}catch(e){console.error("Failed to parse response:",{parseError:e,status:s.status,statusText:s.statusText,responseText:r.substring(0,500)}),eY.error(`Server error (${s.status}): ${s.statusText||"Invalid response"}`);return}if(s.ok&&t?.success)eY.success(t.message||"Product added successfully"),o.Ay.clearCache(),await ej(),await eP();else{let a="Failed to add product";if(t){if(a=t.error||t.message||a,t.details){if(Array.isArray(t.details)&&t.details.length>0){let e=t.details.map(e=>{let s=e.path?.[0]||e.path||e.field||"field",t=e.message||"Invalid value";return`${s}: ${t}`}).join(", ");a=`Validation failed: ${e}`}else"string"==typeof t.details&&(a=t.details)}}else a=`Server error (${s.status}): ${s.statusText||"Unknown error"}`;eY.error(a);let l={timestamp:new Date().toISOString(),status:s.status,statusText:s.statusText,url:s.url,hasResult:!!t,resultType:t?typeof t:"null",resultKeys:t&&"object"==typeof t?Object.keys(t):[],resultStringified:t?JSON.stringify(t,null,2):"null",responseTextLength:r.length,responseTextPreview:r.substring(0,1e3),productData:{name:e?.name||"missing",slug:e?.slug||"missing",sku:e?.sku||"missing",categoryId:e?.categoryId||"missing",brandId:e?.brandId||"missing",price:e?.price||"missing",imagesCount:e?.images?.length||0,hasImages:!!e?.images?.length}};console.error("=== Product Creation Error ==="),console.error("Status:",s.status,s.statusText),console.error("Response URL:",s.url),console.error("Result:",t),console.error("Result (stringified):",JSON.stringify(t,null,2)),console.error("Response Text:",r.substring(0,1e3)),console.error("Product Data:",l.productData),console.error("Full Error Details:",l),console.error("=============================")}}catch(t){let s=t.message||"Failed to add product. Please check your connection and try again.";console.error("Error adding product:",{error:t.message,stack:t.stack,name:t.name,productData:{name:e?.name,slug:e?.slug}}),eY.error(s)}},e4=async e=>{let s=e.target.files?.[0];if(s){if(!s.name.endsWith(".csv")){eY.error("Please upload a CSV file");return}try{let t=(await s.text()).split("\n").filter(e=>e.trim()),r=t[0].split(",").map(e=>e.trim().toLowerCase()),a=["name","sku","price","category","brand","stock"].filter(e=>!r.includes(e));if(a.length>0){eY.error(`Missing required columns: ${a.join(", ")}`);return}let l=[];for(let e=1;e<t.length;e++){let s=t[e].split(",").map(e=>e.trim()),a={};r.forEach((e,t)=>{a[e]=s[t]||""});let i=String(a.category||"").trim(),n=String(a.brand||"").trim();if(!i||!n){eY.error(`Row ${e+1}: Category and brand are required`);continue}let o=eF.find(e=>String(e?.name||"").toLowerCase()===i.toLowerCase()),d=ez.find(e=>String(e?.name||"").toLowerCase()===n.toLowerCase());if(!o||!d){eY.error(`Row ${e+1}: Category or brand not found`);continue}l.push({name:a.name,slug:a.slug||a.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),sku:a.sku,description:a.description||a.name,shortDescription:a.shortdescription||null,price:parseFloat(a.price)||0,originalPrice:a.originalprice?parseFloat(a.originalprice):null,stock:parseInt(a.stock,10)||0,weight:a.weight?parseFloat(a.weight):null,dimensions:a.dimensions||null,featured:"true"===a.featured||"1"===a.featured,published:"false"!==a.published&&"0"!==a.published,categoryId:o.id,brandId:d.id,images:a.images?a.images.split("|").map((e,s)=>({url:e.trim(),alt:a.name,isPrimary:0===s})):[],features:a.features?a.features.split("|").filter(e=>e.trim()):[],specifications:[],seoTitle:a.seotitle||a.name,seoDescription:a.seodescription||a.description||a.name})}if(0===l.length){eY.error("No valid products found in CSV");return}let i=0,n=0;for(let e of(eY.info(`Importing ${l.length} products...`),l))try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).ok?i++:n++}catch(e){n++}o.Ay.clearCache(),await ej(),await eP(),0===n?eY.success(`Successfully imported ${i} product${1!==i?"s":""}`):eY.warning(`Imported ${i} product${1!==i?"s":""}, ${n} failed`),e.target.value=""}catch(s){console.error("Bulk import error:",s),eY.error("Failed to import products. Please check the CSV format."),e.target.value=""}}},e5=async(e,s)=>{try{let t=await fetch(`/api/orders/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(t.ok)await t.json(),eY.success("Order updated successfully"),C&&C.id===e&&fetch(`/api/orders/${e}`,{credentials:"include"}).then(e=>e.json()).then(e=>{e.success&&e.data&&L(e.data)}),eL(),eP();else{let e=await t.json();eY.error(e.error||"Failed to update order")}}catch(e){console.error("Error updating order:",e),eY.error("Failed to update order")}},e3=async(e,s)=>{try{let t=await fetch(`/api/products/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(t.ok)eY.success("Product updated successfully"),ej(),eP();else{let e=await t.json();eY.error(e.error||"Failed to update product")}}catch(e){console.error("Error updating product:",e),eY.error("Failed to update product")}},e6=async e=>{if(confirm("Are you sure you want to delete this product? This action cannot be undone."))try{let s=await fetch(`/api/products/${e}`,{method:"DELETE",credentials:"include"});if(s.ok)eY.success("Product deleted successfully"),ej(),eP();else{let e=await s.json();eY.error(e.error||"Failed to delete product")}}catch(e){console.error("Error deleting product:",e),eY.error("Failed to delete product")}},e9=async(e,s)=>{try{let t=await fetch(`/api/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(t.ok){if(await t.json(),eY.success("User updated successfully"),A&&A.id===e){let t=await fetch(`/api/users/${e}`,{credentials:"include"}).then(e=>e.json()).then(e=>e.success&&e.data?e.data:null).catch(()=>null);t?S(t):S({...A,...s})}eE(),eP()}else{let e=await t.json();eY.error(e.error||"Failed to update user")}}catch(e){console.error("Error updating user:",e),eY.error("Failed to update user")}},e7=async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{let s=await fetch(`/api/users/${e}`,{method:"DELETE",credentials:"include"});if(s.ok)eY.success("User deleted successfully"),S(null),eE(),eP();else{let e=await s.json();eY.error(e.error||"Failed to delete user")}}catch(e){console.error("Error deleting user:",e),eY.error("Failed to delete user")}},e8=async e=>{try{console.log("=== SENDING COUPON DATA ==="),console.log("Coupon data:",JSON.stringify(e,null,2));let s=await fetch("/api/coupons",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),t=await s.json();if(s.ok&&t.success)eY.success(t.message||"Coupon created successfully"),o.Ay.clearCache(),await eU();else if(t.details&&Array.isArray(t.details)&&t.details.length>0){console.error("=== COUPON VALIDATION ERRORS ==="),console.error("Details array:",JSON.stringify(t.details,null,2)),t.details.forEach((e,s)=>{console.error(`Error ${s+1}:`,{path:e.path,message:e.message,fullDetail:e})});let e=t.details.map(e=>{let s=e.path?`${e.path}: `:"";return`${s}${e.message||JSON.stringify(e)}`}).join(", ");eY.error(e||"Validation failed")}else{let e=t.error||t.message||"Failed to create coupon";eY.error(e),console.error("Coupon creation error:",t)}}catch(e){console.error("Coupon creation error:",e),eY.error(e.message||"Failed to create coupon. Please try again.")}},se=e=>{let s=eq?.find(s=>s.id===e);et({isOpen:!0,type:"coupon",id:e,name:s?`${s.code} - ${s.name}`:null})},ss=async()=>{if(es.id&&es.type){ea(!0);try{console.log("=== DELETING ==="),console.log("Type:",es.type),console.log("ID:",es.id);let e="",s=null;switch(es.type){case"coupon":e=`/api/coupons/${es.id}`,s=eU;break;case"review":e=`/api/reviews/${es.id}`,s=eB;break;case"user":e=`/api/users/${es.id}`,s=eE;break;case"bulk_reviews":await sl();return;default:throw Error("Unknown delete type")}let t=await fetch(e,{method:"DELETE",credentials:"include"}),r=await t.json();if(t.ok)console.log("Delete successful:",r),eY.success(`${es.type.charAt(0).toUpperCase()+es.type.slice(1)} deleted successfully`),s&&s(),et({isOpen:!1,type:null,id:null,name:null});else{console.error("=== DELETE ERROR ==="),console.error("Response status:",t.status),console.error("Error result:",r);let e=r.error||r.message||`Failed to delete ${es.type}`;eY.error(e)}}catch(e){console.error("=== DELETE EXCEPTION ==="),console.error("Error:",e),eY.error(`Failed to delete ${es.type}. Please try again.`)}finally{ea(!1)}}},st=e=>{let s=eH?.find(s=>s.id===e);et({isOpen:!0,type:"review",id:e,name:s?s.title||`Review by ${s.user?.name||"User"}`:null})},sr=async e=>{if(confirm("Are you sure you want to process a refund for this order?"))try{let s=await fetch(`/api/orders/${e}/refund`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(s.ok)eY.success("Refund processed successfully"),eL(),eP(),C&&L({...C,paymentStatus:"REFUNDED"});else{let e=await s.json();eY.error(e.error||"Failed to process refund")}}catch(e){eY.error("Failed to process refund")}},sa=async(e,s="store")=>{V(!0);try{let t=await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...e,type:s})});if(t.ok){eY.success("Settings saved successfully");let{data:e}=await t.json();"store"===s?B(s=>({...s,store:e.settings})):"smtp"===s&&B(s=>({...s,smtp:e.settings}))}else{let e=await t.json();eY.error(e.error||"Failed to save settings")}}catch(e){eY.error("Failed to save settings")}finally{V(!1)}},sl=async()=>{if(0!==K.length){ea(!0);try{console.log("=== BULK DELETING REVIEWS ==="),console.log("Count:",K.length),console.log("IDs:",K);let e=K.map(e=>fetch(`/api/reviews/${e}`,{method:"DELETE",credentials:"include"})),s=await Promise.allSettled(e),t=s.filter(e=>"fulfilled"===e.status&&e.value.ok).length,r=s.length-t;t>0?(eY.success(`${t} review(s) deleted successfully${r>0?` (${r} failed)`:""}`),_([]),eB()):eY.error("Failed to delete reviews")}catch(e){console.error("=== BULK DELETE ERROR ==="),console.error("Error:",e),eY.error("Failed to delete reviews. Please try again.")}finally{ea(!1),et({isOpen:!1,type:null,id:null,name:null})}}},si=async(e,s)=>{try{console.log("=== SENDING COUPON UPDATE DATA ==="),console.log("Coupon ID:",e),console.log("Update data:",JSON.stringify(s,null,2));let t=await fetch(`/api/coupons/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)}),r=await t.json();if(t.ok)eY.success("Coupon updated successfully"),eU(),Q(null);else if(r.details&&Array.isArray(r.details)&&r.details.length>0){console.error("=== COUPON UPDATE VALIDATION ERRORS ==="),console.error("Details array:",JSON.stringify(r.details,null,2)),r.details.forEach((e,s)=>{console.error(`Error ${s+1}:`,{path:e.path,message:e.message,fullDetail:e})});let e=r.details.map(e=>{let s=e.path?`${e.path}: `:"";return`${s}${e.message||JSON.stringify(e)}`}).join(", ");eY.error(e||"Validation failed")}else{let e=r.error||r.message||"Failed to update coupon";eY.error(e),console.error("Coupon update error:",r)}}catch(e){console.error("Coupon update error:",e),eY.error("Failed to update coupon")}};return e?b?"ADMIN"!==e.user.role?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have admin privileges to access this page."}),(0,r.jsx)(n(),{href:"/",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 font-semibold",children:"Go Home"})]})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(ef||ev||ew||eC||eM)&&(0,r.jsx)("div",{className:"fixed inset-0 bg-white/80 flex items-center justify-center z-50",children:(0,r.jsx)(v.k,{size:"lg"})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",(0,r.jsx)("span",{className:"font-semibold text-purple-600",children:e.user.name}),"! Manage your Dilitech Solutions operations"]})]})}),(0,r.jsx)(f,{activeTab:i,setActiveTab:m,tabs:t}),"overview"===i&&(0,r.jsx)(y,{stats:eG,recentOrders:eK,lowStockProducts:e_,statusColors:eZ,paymentStatusColors:e0,formatDate:e2,setActiveTab:m}),"orders"===i&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-orders","aria-labelledby":"admin-tab-orders",className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Order Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage all customer orders"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsxs)("select",{value:en,onChange:e=>eo(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-medium text-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"",children:"All Status"}),(0,r.jsx)("option",{value:"PENDING",children:"Pending"}),(0,r.jsx)("option",{value:"CONFIRMED",children:"Confirmed"}),(0,r.jsx)("option",{value:"PROCESSING",children:"Processing"}),(0,r.jsx)("option",{value:"SHIPPED",children:"Shipped"}),(0,r.jsx)("option",{value:"DELIVERED",children:"Delivered"}),(0,r.jsx)("option",{value:"CANCELLED",children:"Cancelled"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Search orders...",value:el,onChange:e=>ei(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm w-full sm:w-64 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all"})]})]})}),eC?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(v.k,{})}):0===eJ.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mt-4",children:"No orders found"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"No orders match your search criteria"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Order #"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Customer"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Items"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Payment Method"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Payment"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Shipping"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Total"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:eJ.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-blue-50/50 cursor-pointer transition-colors",onClick:()=>{fetch(`/api/orders/${e.id}`,{credentials:"include"}).then(e=>e.json()).then(s=>{s.success&&s.data?L(s.data):L(e)}).catch(()=>L(e))},children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"font-bold text-gray-900",children:e.orderNumber||`#${e.id.slice(-8)}`}),e.trackingNumber&&(0,r.jsx)("div",{className:"text-xs text-blue-600 font-mono mt-0.5",children:e.trackingNumber})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:e.user?.name||"Unknown Customer"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:e.user?.email||"No email"}),e.user?.phone&&(0,r.jsx)("div",{className:"text-xs text-gray-400",children:e.user.phone})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e2(e.createdAt)}),e.deliveredAt&&(0,r.jsxs)("div",{className:"text-xs text-green-600 mt-0.5",children:["Delivered ",e2(e.deliveredAt)]})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.items?.length||0}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"items"})]}),e.items&&e.items.length>0&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5 truncate max-w-[150px]",title:e.items.map(e=>e.product?.name||"Product").join(", "),children:[e.items[0]?.product?.name||"Product",e.items.length>1&&` +${e.items.length-1} more`]})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 capitalize",children:e.paymentMethod?e.paymentMethod.toLowerCase():"—"}),e.mpesaReceiptNumber&&(0,r.jsx)("div",{className:"text-xs text-emerald-600 font-mono mt-0.5",children:e.mpesaReceiptNumber}),e.paymentReference&&(0,r.jsx)("div",{className:"text-xs text-gray-500 font-mono mt-0.5",children:e.paymentReference})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`px-3 py-1.5 rounded-lg text-xs font-semibold ${eZ[e.status]||"bg-gray-100 text-gray-800"}`,children:e.status||"UNKNOWN"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`px-3 py-1.5 rounded-lg text-xs font-semibold ${e0[e.paymentStatus]||"bg-gray-100 text-gray-800"}`,children:e.paymentStatus||"UNKNOWN"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.shippingAddress?(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,r.jsx)("div",{className:"font-medium",children:e.shippingAddress.city||"—"}),(0,r.jsx)("div",{className:"text-gray-500",children:e.shippingAddress.state||""}),e.carrier&&(0,r.jsx)("div",{className:"text-blue-600 mt-0.5",children:e.carrier})]}):(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"No address"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-blue-600",children:(0,j.L)(e.total||0)}),e.discount>0&&(0,r.jsxs)("div",{className:"text-xs text-red-600",children:["-",(0,j.L)(e.discount)]})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),fetch(`/api/orders/${e.id}`,{credentials:"include"}).then(e=>e.json()).then(s=>{s.success&&s.data?L(s.data):L(e)}).catch(()=>L(e))},className:"text-blue-600 hover:text-blue-900 font-semibold transition-colors px-3 py-1.5 rounded-lg hover:bg-blue-50",children:"View Details"})})]},e.id))})]})})]}),"products"===i&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-products","aria-labelledby":"admin-tab-products",className:"bg-white rounded-xl shadow-lg border-2 border-gray-200",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-white to-blue-100 px-6 py-5 border-b-2 border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-black text-gray-900",children:"Product Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your product catalog, inventory, and pricing"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search products...",value:ed,onChange:e=>ec(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2 text-sm w-full sm:w-64 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}),(0,r.jsx)("button",{onClick:()=>k(!0),className:"bg-blue-900 text-white px-5 py-2 rounded-xl hover:bg-blue-800 transition-all duration-200 font-medium shadow-md hover:shadow-lg",children:"+ Add Product"}),(0,r.jsxs)("label",{className:"cursor-pointer bg-white border-2 border-gray-200 text-gray-700 px-5 py-2 rounded-xl hover:bg-gray-50 transition-colors font-medium shadow-sm hover:shadow-md",children:[(0,r.jsx)("input",{type:"file",accept:".csv",onChange:e4,className:"hidden"}),"\uD83D\uDCE5 Import CSV"]}),(0,r.jsx)("button",{onClick:()=>{let e=new Blob(["name,sku,price,category,brand,stock,description,originalprice,images,features\nSample Product,SKU-001,1000,Electronics,Sample Brand,10,Product description,1200,https://example.com/image1.jpg|https://example.com/image2.jpg,Feature 1|Feature 2"],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="product-import-template.csv",t.click(),window.URL.revokeObjectURL(s),eY.success("CSV template downloaded")},className:"bg-gray-100 border-2 border-gray-200 text-gray-700 px-5 py-2 rounded-xl hover:bg-gray-200 transition-colors font-medium shadow-sm hover:shadow-md",title:"Download CSV template",children:"\uD83D\uDCC4 Template"})]})]})}),0===e$.length?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Product Management"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage your product catalog, inventory, and pricing."}),(0,r.jsx)("button",{onClick:()=>k(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"Add Your First Product"})]})}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:eQ.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10 relative rounded-lg overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 border border-gray-300",children:e.images?.[0]?.url?(0,r.jsx)(c.OptimizedImage,{src:e.images[0].url,alt:e.name,width:40,height:40,className:"h-10 w-10 rounded-lg object-cover"}):(0,r.jsx)("div",{className:"h-10 w-10 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.description?.substring(0,50),"..."]})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sku}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.category?.name||"Unknown"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium",children:(0,j.L)(e.price)}),e.comparePrice&&(0,r.jsx)("span",{className:"text-xs text-gray-500 line-through",children:(0,j.L)(e.comparePrice)})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"number",value:e.stock||0,onChange:s=>{let t=parseInt(s.target.value)||0;e3(e.id,{stock:t})},className:"w-20 border border-gray-300 rounded px-2 py-1 text-sm",min:"0"}),5>=(e.stock||0)&&(0,r.jsx)("span",{className:"text-xs text-red-500 font-medium",children:"Low"})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"active"===e.status?"bg-green-100 text-green-800":"draft"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Unknown"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>P(e),className:"text-purple-600 hover:text-purple-900",children:"Edit"}),(0,r.jsx)(n(),{href:`/products/${e.id}`,className:"text-indigo-600 hover:text-indigo-900",target:"_blank",children:"View"}),(0,r.jsx)("button",{onClick:()=>e6(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id))})]})})]}),"users"===i&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-users","aria-labelledby":"admin-tab-users",className:"bg-white rounded-xl shadow-lg border-2 border-gray-200",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-5 text-white rounded-t-xl",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-black text-white",children:"User Management"}),(0,r.jsx)("p",{className:"text-sm text-indigo-100 mt-1",children:"Manage user accounts, roles, and permissions"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search users...",value:em,onChange:e=>ex(e.target.value),className:"border-2 border-white/20 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2.5 text-sm font-medium text-white placeholder-white/70 focus:border-white focus:ring-2 focus:ring-white/20 focus:outline-none transition-all w-full sm:w-64"}),(0,r.jsxs)("select",{value:eu,onChange:e=>ep(e.target.value),className:"border-2 border-white/20 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2.5 text-sm font-semibold text-white focus:border-white focus:ring-2 focus:ring-white/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"",className:"text-gray-900",children:"All Users"}),(0,r.jsx)("option",{value:"USER",className:"text-gray-900",children:"Users"}),(0,r.jsx)("option",{value:"ADMIN",className:"text-gray-900",children:"Admins"}),(0,r.jsx)("option",{value:"MODERATOR",className:"text-gray-900",children:"Moderators"})]})]})]})}),eS?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(v.k,{})}):0===eW.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No users found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"No users match your search criteria."})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"User"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Role"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Orders"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Total Spent"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Joined"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:eX.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-blue-50 cursor-pointer transition-colors",onClick:()=>{fetch(`/api/users/${e.id}`,{credentials:"include"}).then(e=>{if(!e.ok)throw Error("Failed to fetch user");return e.json()}).then(s=>{s.success&&s.data?S(s.data):s.data?S(s.data):S(e)}).catch(s=>{console.error("Error fetching user:",s),S(e)})},children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:e.avatar?(0,r.jsx)(c.OptimizedImage,{className:"h-10 w-10 rounded-full border-2 border-gray-200",src:e.avatar,alt:e.name||"User",width:40,height:40}):(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center border-2 border-gray-200",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:(e.name||e.email||"U").charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.name||"No name"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.phone||"No phone"})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("a",{href:`mailto:${e.email}`,className:"text-sm font-medium text-blue-600 hover:text-blue-900",children:e.email})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("select",{value:e.role,onChange:s=>e9(e.id,{role:s.target.value}),className:"text-xs border-2 border-gray-200 rounded-lg px-3 py-1.5 font-semibold focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"USER",children:"USER"}),(0,r.jsx)("option",{value:"ADMIN",children:"ADMIN"}),(0,r.jsx)("option",{value:"MODERATOR",children:"MODERATOR"})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.totalOrders||0})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-bold text-blue-600",children:(0,j.L)(e.totalSpent||0)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e2(e.createdAt)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),fetch(`/api/users/${e.id}`,{credentials:"include"}).then(e=>{if(!e.ok)throw Error("Failed to fetch user");return e.json()}).then(s=>{s.success&&s.data?S(s.data):s.data?S(s.data):S(e)}).catch(s=>{console.error("Error fetching user:",s),S(e)})},className:"text-blue-600 hover:text-blue-900 font-semibold transition-colors",children:"View"})})]},e.id))})]})})]}),"analytics"===i&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-analytics","aria-labelledby":"admin-tab-analytics",className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Analytics Dashboard"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Track your business performance and insights"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("select",{value:Z,onChange:e=>ee(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-medium text-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"7days",children:"Last 7 Days"}),(0,r.jsx)("option",{value:"30days",children:"Last 30 Days"}),(0,r.jsx)("option",{value:"90days",children:"Last 90 Days"}),(0,r.jsx)("option",{value:"1year",children:"Last Year"}),(0,r.jsx)("option",{value:"all",children:"All Time"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=new Blob([["Metric,Value",["Total Revenue",(0,j.L)(eG.totalRevenue||0)].join(","),["Total Orders",eG.totalOrders||0].join(","),["Average Order Value",(0,j.L)(eG.totalOrders>0?(eG.totalRevenue||0)/eG.totalOrders:0)].join(","),["Total Customers",eG.totalUsers||0].join(",")].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=`analytics-${new Date().toISOString().split("T")[0]}.csv`,t.click(),window.URL.revokeObjectURL(s),eY.success("Analytics exported successfully")},className:"px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 text-sm font-semibold transition-colors shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-500/20",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:(0,j.L)(eG.totalRevenue||0)}),void 0!==eG.revenueGrowth&&null!==eG.revenueGrowth&&(0,r.jsxs)("p",{className:`text-sm font-medium flex items-center gap-1 ${(eG.revenueGrowth||0)>=0?"text-green-600":"text-red-600"}`,children:[(0,r.jsx)("svg",{className:`w-4 h-4 ${(eG.revenueGrowth||0)>=0?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Math.abs(eG.revenueGrowth||0).toFixed(1),"% from last month"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:eG.totalOrders||0}),eG.pendingOrders>0&&(0,r.jsxs)("p",{className:"text-sm text-amber-600 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),eG.pendingOrders," pending orders"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:eG.totalOrders>0?(0,j.L)((eG.totalRevenue||0)/eG.totalOrders):(0,j.L)(0)}),(0,r.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Per order average"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/20",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:eG.totalUsers||0}),eG.newUsersToday>0&&(0,r.jsxs)("p",{className:"text-sm text-green-600 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"+",eG.newUsersToday," new today"]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Order Status Distribution"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Breakdown of orders by status"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:["PENDING","CONFIRMED","PROCESSING","SHIPPED","DELIVERED","CANCELLED"].map(e=>{let s=eV.filter(s=>s.status===e).length,t=eV.length>0?s/eV.length*100:0;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:e}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[s," orders"]}),(0,r.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[t.toFixed(1),"%"]})]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,r.jsx)("div",{className:`h-full rounded-full transition-all duration-500 ${"PENDING"===e?"bg-yellow-500":"CONFIRMED"===e?"bg-blue-500":"PROCESSING"===e?"bg-purple-500":"SHIPPED"===e?"bg-indigo-500":"DELIVERED"===e?"bg-green-500":"CANCELLED"===e?"bg-red-500":"bg-gray-400"}`,style:{width:`${t}%`}})})]},e)})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Payment Method Breakdown"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Revenue by payment method"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:["mpesa","card","stripe"].map(e=>{let s=eV.filter(s=>s.paymentMethod?.toLowerCase()===e),t=s.length,a=s.reduce((e,s)=>e+(s.total||0),0),l=eV.length>0?t/eV.length*100:0;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700 capitalize",children:e.toUpperCase()}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[t," orders"]}),(0,r.jsx)("span",{className:"text-sm font-bold text-gray-900 ml-3",children:(0,j.L)(a)})]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,r.jsx)("div",{className:`h-full rounded-full transition-all duration-500 ${{mpesa:"bg-green-500",card:"bg-blue-500",stripe:"bg-indigo-500"}[e]||"bg-gray-400"}`,style:{width:`${l}%`}})})]},e)})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Top Selling Products"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Best performing products by sales"})]}),(0,r.jsx)("div",{className:"p-6",children:0===eV.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,r.jsx)("p",{className:"text-gray-500 mt-4 font-medium",children:"No order data available"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Product sales will appear here once orders are placed"})]}):(0,r.jsx)("div",{className:"space-y-3",children:(()=>{let e={};return eV.forEach(s=>{s.items?.forEach(s=>{let t=s.productId;e[t]||(e[t]={name:s.product?.name||"Unknown Product",quantity:0,revenue:0}),e[t].quantity+=s.quantity,e[t].revenue+=Number(s.price)*s.quantity})}),Object.values(e).sort((e,s)=>s.quantity-e.quantity).slice(0,10).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 border border-gray-200 hover:border-blue-300 transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white font-bold shadow-md",children:["#",s+1]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-0.5",children:[e.quantity," units sold"]})]})]}),(0,r.jsx)("p",{className:"font-bold text-blue-600 text-lg",children:(0,j.L)(e.revenue)})]},s))})()})})]})]}),"coupons"===i&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-coupons","aria-labelledby":"admin-tab-coupons",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Coupons"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:Array.isArray(eq)?eq.length:0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Coupons"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-500/20",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:Array.isArray(eq)?eq.filter(e=>e?.status==="ACTIVE").length:0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Usage"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-indigo-600",children:Array.isArray(eq)?eq.reduce((e,s)=>e+(s?._count?.orders||0),0):0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Expired Coupons"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/20",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-red-600",children:Array.isArray(eq)?eq.filter(e=>e?.status==="EXPIRED").length:0})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Coupon Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage discount coupons for your store"})]}),(0,r.jsxs)("button",{onClick:()=>R(!0),className:"bg-blue-600 text-white px-5 py-2.5 rounded-xl hover:bg-blue-700 transition-colors font-semibold shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Coupon"]})]})}),(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("select",{value:X,onChange:e=>Y(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-medium text-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"",children:"All Status"}),(0,r.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,r.jsx)("option",{value:"INACTIVE",children:"Inactive"}),(0,r.jsx)("option",{value:"EXPIRED",children:"Expired"})]})})}),eT?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(v.k,{})}):(()=>{let e=Array.isArray(eq)?eq:[],s=X?e.filter(e=>e?.status===X):e;return Array.isArray(s)&&0!==s.length?(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Code"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Type"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Value"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Usage"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Valid Until"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>{let s=e._count?.orders||0,t=e.usageLimit||1/0,a=t!==1/0?s/t*100:0,l=e.validUntil&&new Date(e.validUntil)<new Date;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 font-mono text-sm font-bold text-blue-600",children:e.code}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm capitalize text-gray-700",children:(e.type||"").toLowerCase().replace("_"," ")}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm font-bold text-gray-900",children:"PERCENTAGE"===e.type?`${e.value}%`:(0,j.L)(e.value||0)}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2.5 max-w-[120px]",children:(0,r.jsx)("div",{className:`h-2.5 rounded-full transition-all duration-300 ${a>=100?"bg-red-500":a>=80?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(a,100)}%`}})}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:[s," / ",t===1/0?"∞":t]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.validUntil?e2(e.validUntil):(0,r.jsx)("span",{className:"text-gray-400",children:"No expiry"})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:`px-3 py-1.5 rounded-lg text-xs font-semibold ${l||"EXPIRED"===e.status?"bg-red-100 text-red-800":"ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:l?"EXPIRED":e.status})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>Q(e),className:"text-blue-600 hover:text-blue-900 text-sm font-semibold transition-colors",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>se(e.id),className:"text-red-600 hover:text-red-900 text-sm font-semibold transition-colors",children:"Delete"})]})})]},e.id)})})]})}):(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mt-4",children:"No coupons found"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"Create your first coupon to get started"}),(0,r.jsx)("button",{onClick:()=>R(!0),className:"mt-4 bg-blue-600 text-white px-5 py-2.5 rounded-xl hover:bg-blue-700 transition-colors font-semibold",children:"Create Coupon"})]})})()]})]}),"reviews"===i&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-reviews","aria-labelledby":"admin-tab-reviews",className:"bg-white rounded-xl shadow-lg border-2 border-gray-200",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 px-6 py-5 text-white rounded-t-xl",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-black text-white",children:"Review Management"}),(0,r.jsx)("p",{className:"text-sm text-amber-100 mt-1",children:(()=>{let e=eH.length;if(eh.trim()||"all"!==W){let s=eh.toLowerCase();e=eH.filter(e=>{if("all"!==W&&e.rating!==parseInt(W))return!1;if(eh.trim()){let t=e.user?.name||"Anonymous",r=e.product?.name||"",a=e.title||"",l=e.comment||"",i=e.user?.email||"";return t.toLowerCase().includes(s)||r.toLowerCase().includes(s)||a.toLowerCase().includes(s)||l.toLowerCase().includes(s)||i.toLowerCase().includes(s)}return!0}).length}return`${e} of ${eH.length} reviews`})()})]}),K.length>0&&(0,r.jsxs)("button",{onClick:()=>{0!==K.length&&et({isOpen:!0,type:"bulk_reviews",id:null,name:`${K.length} review(s)`})},className:"px-5 py-2.5 bg-red-600 text-white rounded-xl hover:bg-red-700 text-sm font-semibold transition-colors shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Selected (",K.length,")"]})]})}),(0,r.jsx)("div",{className:"px-6 py-4 border-b-2 border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,r.jsx)("input",{type:"text",placeholder:"Search reviews by user, product, title, or comment...",value:eh,className:"w-full border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-medium focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",onChange:e=>eg(e.target.value)})}),(0,r.jsxs)("select",{value:W,onChange:e=>q(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-semibold focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"all",children:"All Ratings"}),(0,r.jsx)("option",{value:"5",children:"5 Stars"}),(0,r.jsx)("option",{value:"4",children:"4 Stars"}),(0,r.jsx)("option",{value:"3",children:"3 Stars"}),(0,r.jsx)("option",{value:"2",children:"2 Stars"}),(0,r.jsx)("option",{value:"1",children:"1 Star"})]}),(0,r.jsxs)("select",{value:H,onChange:e=>G(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-semibold focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"newest",children:"Newest First"}),(0,r.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,r.jsx)("option",{value:"highest",children:"Highest Rating"}),(0,r.jsx)("option",{value:"lowest",children:"Lowest Rating"})]})]})}),eI?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(v.k,{})}):(()=>{let e=eH;if(eh.trim()){let s=eh.toLowerCase();e=e.filter(e=>{let t=e.user?.name||"Anonymous",r=e.product?.name||"",a=e.title||"",l=e.comment||"",i=e.user?.email||"";return t.toLowerCase().includes(s)||r.toLowerCase().includes(s)||a.toLowerCase().includes(s)||l.toLowerCase().includes(s)||i.toLowerCase().includes(s)})}return"all"!==W&&(e=e.filter(e=>e.rating===parseInt(W))),0===(e=[...e].sort((e,s)=>{switch(H){case"oldest":return new Date(e.createdAt)-new Date(s.createdAt);case"highest":return s.rating-e.rating;case"lowest":return e.rating-s.rating;default:return new Date(s.createdAt)-new Date(e.createdAt)}})).length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No reviews found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"No reviews match your search criteria."})]}):(0,r.jsxs)("div",{className:"p-6",children:[e.length>0&&(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3 pb-3 border-b border-gray-200",children:[(0,r.jsx)("input",{type:"checkbox",checked:e.every(e=>K.includes(e.id))&&e.length>0,onChange:s=>{if(s.target.checked)_([...new Set([...K,...e.map(e=>e.id)])]);else{let s=e.map(e=>e.id);_(K.filter(e=>!s.includes(e)))}},className:"rounded border-2 border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-2"}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:["Select All (",e.length," reviews)"]}),K.length>0&&(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[K.length," selected"]})]}),(0,r.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-5 hover:border-blue-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>{D(e)},children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("input",{type:"checkbox",checked:K.includes(e.id),onChange:s=>{s.stopPropagation(),s.target.checked?_([...K,e.id]):_(K.filter(s=>s!==e.id))},className:"mt-1.5 rounded border-2 border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-2 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-0.5 bg-yellow-50 px-2 py-1 rounded-lg border border-yellow-200",children:[[void 0,void 0,void 0,void 0,void 0].map((s,t)=>(0,r.jsx)("svg",{className:`w-4 h-4 ${t<(e.rating||0)?"text-yellow-500":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t)),(0,r.jsxs)("span",{className:"ml-1 text-xs font-bold text-gray-700",children:[e.rating||0,"/5"]})]}),(0,r.jsx)("span",{className:"text-sm font-bold text-gray-900",children:e.user?.name||"Anonymous"}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,r.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:e2(e.createdAt)}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,r.jsx)(n(),{href:`/products/${e.product?.slug||e.productId}`,onClick:e=>e.stopPropagation(),className:"text-sm text-blue-600 hover:text-blue-900 font-semibold truncate",children:e.product?.name||"Product"})]}),e.title&&(0,r.jsx)("p",{className:"font-bold text-base text-gray-900 mb-2",children:e.title}),e.comment&&(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-3 leading-relaxed line-clamp-3",children:e.comment}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[(0,r.jsxs)("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-lg font-mono font-medium",children:["ID: ",e.id.slice(0,8)]}),e.user?.email&&(0,r.jsx)("a",{href:`mailto:${e.user.email}`,onClick:e=>e.stopPropagation(),className:"text-blue-600 hover:text-blue-900 font-medium",children:e.user.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),D(e)},className:"px-4 py-2 text-xs font-semibold text-blue-600 hover:bg-blue-50 rounded-lg transition-colors border-2 border-blue-200 hover:border-blue-300",children:"View"}),(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),st(e.id)},className:"px-4 py-2 text-xs font-semibold text-red-600 hover:bg-red-50 rounded-lg transition-colors border-2 border-red-200 hover:border-red-300",children:"Delete"})]})]})},e.id))})]})})()]}),"settings"===i&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-settings","aria-labelledby":"admin-tab-settings",className:"bg-white rounded-lg shadow-sm border",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Store Settings"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your store configuration and preferences"})]}),$?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(v.k,{})}):(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault();let s=new FormData(e.target);sa({storeName:s.get("storeName"),storeEmail:s.get("storeEmail"),storePhone:s.get("storePhone"),storeAddress:s.get("storeAddress"),enableMpesa:"on"===s.get("enableMpesa"),enableCard:"on"===s.get("enableCard"),defaultShippingCost:parseFloat(s.get("defaultShippingCost")),freeShippingThreshold:parseFloat(s.get("freeShippingThreshold")),taxRate:parseFloat(s.get("taxRate")),currency:s.get("currency"),timezone:s.get("timezone")})},className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"General Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name *"}),(0,r.jsx)("input",{type:"text",name:"storeName",defaultValue:I?.store?.storeName||"Dilitech Solutions",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Email *"}),(0,r.jsx)("input",{type:"email",name:"storeEmail",defaultValue:I?.store?.storeEmail||"support@dilitechsolutions.com",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Phone"}),(0,r.jsx)("input",{type:"tel",name:"storePhone",defaultValue:I?.store?.storePhone||"+254 700 000 000",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Address"}),(0,r.jsx)("input",{type:"text",name:"storeAddress",defaultValue:I?.store?.storeAddress||"Nairobi, Kenya",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Payment Settings"}),(0,r.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"enableMpesa",defaultChecked:I?.store?.enableMpesa!==!1,className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Enable M-Pesa Payments"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 ml-8 mt-1",children:"Allow customers to pay via M-Pesa mobile money"})]})}),(0,r.jsx)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"enableCard",defaultChecked:I?.store?.enableCard!==!1,className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Enable Card Payments"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 ml-8 mt-1",children:"Allow customers to pay with credit/debit cards"})]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Shipping Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Shipping Cost (KES) *"}),(0,r.jsx)("input",{type:"number",name:"defaultShippingCost",step:"0.01",min:"0",defaultValue:I?.store?.defaultShippingCost||500,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Standard shipping fee for all orders"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Free Shipping Threshold (KES)"}),(0,r.jsx)("input",{type:"number",name:"freeShippingThreshold",step:"0.01",min:"0",defaultValue:I?.store?.freeShippingThreshold||5e3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Orders above this amount get free shipping"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Tax & Currency Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Rate (%)"}),(0,r.jsx)("input",{type:"number",name:"taxRate",step:"0.01",min:"0",max:"100",defaultValue:I?.store?.taxRate||0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,r.jsxs)("select",{name:"currency",defaultValue:I?.store?.currency||"KES",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"KES",children:"KES - Kenyan Shilling"}),(0,r.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,r.jsx)("option",{value:"EUR",children:"EUR - Euro"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),(0,r.jsxs)("select",{name:"timezone",defaultValue:I?.store?.timezone||"Africa/Nairobi",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"Africa/Nairobi",children:"Africa/Nairobi (EAT)"}),(0,r.jsx)("option",{value:"UTC",children:"UTC"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Email/SMTP Settings"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Configure SMTP settings for sending emails from contact forms and support requests"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Host *"}),(0,r.jsx)("input",{type:"text",name:"smtpHost",defaultValue:I?.smtp?.host||process.env.NEXT_PUBLIC_SMTP_HOST||"smtp.gmail.com",required:!0,placeholder:"smtp.gmail.com",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Port *"}),(0,r.jsx)("input",{type:"number",name:"smtpPort",defaultValue:I?.smtp?.port||process.env.NEXT_PUBLIC_SMTP_PORT||587,required:!0,min:"1",max:"65535",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"587 for TLS, 465 for SSL"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Username/Email *"}),(0,r.jsx)("input",{type:"email",name:"smtpUser",defaultValue:I?.smtp?.user||process.env.NEXT_PUBLIC_SMTP_USER||"",required:!0,placeholder:"your-email@gmail.com",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Password"}),(0,r.jsx)("input",{type:"password",name:"smtpPass",placeholder:I?.smtp?.pass?"***configured*** (leave blank to keep current)":"Enter password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to keep current password"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Email Address *"}),(0,r.jsx)("input",{type:"email",name:"smtpFrom",defaultValue:I?.smtp?.from||I?.smtp?.user||process.env.NEXT_PUBLIC_SMTP_FROM||"",required:!0,placeholder:"noreply@yourdomain.com",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"flex items-center pt-6",children:[(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"smtpSecure",defaultChecked:I?.smtp?.secure||I?.smtp?.port===465,className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Use SSL/TLS (Secure)"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 ml-4",children:"Enable for port 465 (SSL), disable for port 587 (TLS)"})]})]}),(0,r.jsx)("div",{className:"flex justify-end space-x-3 pt-4",children:(0,r.jsx)("button",{type:"button",onClick:e=>{e.preventDefault();let s=document.getElementById("settings-form");if(!s)return;let t=new FormData(s),r={smtpHost:t.get("smtpHost"),smtpPort:parseInt(t.get("smtpPort")||"587"),smtpSecure:"on"===t.get("smtpSecure"),smtpUser:t.get("smtpUser"),smtpPass:t.get("smtpPass"),smtpFrom:t.get("smtpFrom")};r.smtpPass||delete r.smtpPass,sa(r,"smtp")},disabled:z,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:z?"Saving...":"Save SMTP Settings"})})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:()=>window.location.reload(),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:z,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:z?"Saving...":"Save Store Settings"})]})]})})]}),(0,r.jsx)(x,{isOpen:w,onClose:()=>k(!1),onAddProduct:e1}),"        ",(0,r.jsx)(h,{isOpen:!!J,onClose:()=>Q(null),coupon:J,onUpdateCoupon:si}),(0,r.jsx)(p,{isOpen:U,onClose:()=>R(!1),onCreateCoupon:e8}),(0,r.jsx)(g,{isOpen:es.isOpen,onClose:()=>et({isOpen:!1,type:null,id:null,name:null}),onConfirm:ss,title:"coupon"===es.type?"Delete Coupon":"review"===es.type?"Delete Review":"bulk_reviews"===es.type?"Delete Reviews":"Confirm Delete",message:"coupon"===es.type?"Are you sure you want to delete this coupon? This action cannot be undone and will affect all future orders.":"review"===es.type?"Are you sure you want to delete this review? This action cannot be undone.":"bulk_reviews"===es.type?`Are you sure you want to delete ${es.name}? This action cannot be undone.`:"Are you sure you want to delete this item? This action cannot be undone.",itemName:es.name,isLoading:er}),(0,r.jsx)(u,{isOpen:!!M,onClose:()=>P(null),product:M,onUpdateProduct:async e=>{await e3(M.id,e),P(null)}}),C&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[1000] p-4",onClick:()=>L(null),children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col border-2 border-gray-100",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 px-6 py-5 text-white flex-shrink-0 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),(0,r.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-2xl font-black tracking-tight",children:["Order ",C.orderNumber||`#${C.id.slice(-8)}`]}),(0,r.jsx)("p",{className:"text-blue-100 text-sm mt-0.5 font-medium",children:e2(C.createdAt)})]})]})}),(0,r.jsx)("button",{onClick:()=>L(null),className:"text-white/90 hover:text-white transition-all p-2 hover:bg-white/20 rounded-xl backdrop-blur-sm","aria-label":"Close",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-5 bg-gradient-to-br from-gray-50 to-white",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 rounded-xl p-4 border-2 border-blue-300 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Customer"})]}),(0,r.jsx)("p",{className:"font-black text-sm text-gray-900 truncate mb-1",children:C.user?.name||"Unknown"}),(0,r.jsx)("a",{href:`mailto:${C.user?.email}`,className:"text-xs text-blue-600 hover:text-blue-800 truncate block font-semibold",children:C.user?.email||"No email"}),C.user?.phone&&(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1 font-medium",children:C.user.phone})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-purple-100 rounded-xl p-4 border-2 border-purple-300 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Status"})]}),(0,r.jsxs)("select",{value:C.status||"PENDING",onChange:e=>{e5(C.id,{status:e.target.value}),L({...C,status:e.target.value})},className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2 text-sm font-bold focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 focus:outline-none transition-all bg-white shadow-sm",children:[(0,r.jsx)("option",{value:"PENDING",children:"PENDING"}),(0,r.jsx)("option",{value:"CONFIRMED",children:"CONFIRMED"}),(0,r.jsx)("option",{value:"PROCESSING",children:"PROCESSING"}),(0,r.jsx)("option",{value:"SHIPPED",children:"SHIPPED"}),(0,r.jsx)("option",{value:"DELIVERED",children:"DELIVERED"}),(0,r.jsx)("option",{value:"CANCELLED",children:"CANCELLED"})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-green-100 rounded-xl p-4 border-2 border-green-300 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Payment"})]}),(0,r.jsxs)("select",{value:C.paymentStatus||"PENDING",onChange:e=>{e5(C.id,{paymentStatus:e.target.value}),L({...C,paymentStatus:e.target.value})},className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2 text-sm font-bold focus:border-green-500 focus:ring-2 focus:ring-green-500/20 focus:outline-none transition-all bg-white shadow-sm",children:[(0,r.jsx)("option",{value:"PENDING",children:"PENDING"}),(0,r.jsx)("option",{value:"COMPLETED",children:"COMPLETED"}),(0,r.jsx)("option",{value:"FAILED",children:"FAILED"}),(0,r.jsx)("option",{value:"REFUNDED",children:"REFUNDED"})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 via-orange-50 to-amber-100 rounded-xl p-4 border-2 border-amber-300 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Total"})]}),(0,r.jsx)("p",{className:"font-black text-xl text-amber-700",children:(0,j.L)(C.total||0)}),C.discount>0&&(0,r.jsxs)("p",{className:"text-xs text-red-600 font-bold mt-1",children:["-",(0,j.L)(C.discount)]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.shippingAddress&&(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Shipping Address"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("p",{className:"text-sm text-gray-900 font-bold",children:C.shippingAddress.fullName||C.shippingAddress.firstName||"—"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 leading-relaxed",children:[C.shippingAddress.street||C.shippingAddress.address1||"",C.shippingAddress.city?`, ${C.shippingAddress.city}`:"",C.shippingAddress.state?`, ${C.shippingAddress.state}`:"",C.shippingAddress.postalCode?` ${C.shippingAddress.postalCode}`:""]}),C.shippingAddress.country&&(0,r.jsx)("p",{className:"text-sm text-gray-700 font-semibold",children:C.shippingAddress.country}),C.shippingAddress.phone&&(0,r.jsxs)("p",{className:"text-sm text-blue-600 font-semibold mt-2 flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),C.shippingAddress.phone]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Tracking Information"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5 uppercase tracking-wide",children:"Tracking Number"}),(0,r.jsx)("input",{type:"text",value:C.trackingNumber||"",onChange:e=>L({...C,trackingNumber:e.target.value}),onBlur:()=>e5(C.id,{trackingNumber:C.trackingNumber||null}),placeholder:"Enter tracking number",className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2.5 text-sm font-medium focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all bg-white shadow-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5 uppercase tracking-wide",children:"Carrier"}),(0,r.jsx)("input",{type:"text",value:C.carrier||"",onChange:e=>L({...C,carrier:e.target.value}),onBlur:()=>e5(C.id,{carrier:C.carrier||null}),placeholder:"Enter carrier name",className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2.5 text-sm font-medium focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all bg-white shadow-sm"})]}),C.deliveredAt&&(0,r.jsx)("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-2.5",children:(0,r.jsxs)("p",{className:"text-xs font-semibold text-green-700",children:["Delivered: ",e2(C.deliveredAt)]})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Order Items"}),(0,r.jsxs)("span",{className:"ml-auto px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-bold",children:[C.items?.length||0," ",C.items?.length===1?"Item":"Items"]})]}),(0,r.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:C.items?.length>0?C.items.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border-2 border-gray-200 hover:border-purple-300 hover:shadow-md transition-all",children:[e.product?.images?.[0]?.url?(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(c.OptimizedImage,{src:e.product.images[0].url,alt:e.product.name,width:70,height:70,className:"rounded-xl object-cover border-2 border-gray-200 shadow-sm"})}):(0,r.jsx)("div",{className:"w-[70px] h-[70px] bg-gray-200 rounded-xl border-2 border-gray-300 flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-bold text-base text-gray-900 truncate mb-1",children:e.product?.name||"Product removed"}),e.product?.sku&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 font-mono mb-1",children:["SKU: ",e.product.sku]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,r.jsxs)("span",{className:"px-2.5 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-bold",children:["Qty: ",e.quantity]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 font-semibold",children:[(0,j.L)(e.price)," each"]})]})]}),(0,r.jsx)("div",{className:"text-right flex-shrink-0",children:(0,r.jsx)("p",{className:"font-black text-lg text-blue-600",children:(0,j.L)(Number(e.price)*e.quantity)})})]},e.id)):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,r.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"No items found"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border-2 border-blue-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Subtotal"}),(0,r.jsx)("p",{className:"font-black text-lg text-blue-700",children:(0,j.L)(C.subtotal||0)})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Shipping"}),(0,r.jsx)("p",{className:"font-black text-lg text-gray-900",children:(0,j.L)(C.shipping||0)})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Tax"}),(0,r.jsx)("p",{className:"font-black text-lg text-gray-900",children:(0,j.L)(C.tax||0)})]}),C.discount>0?(0,r.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border-2 border-red-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Discount"}),(0,r.jsxs)("p",{className:"font-black text-lg text-red-600",children:["-",(0,j.L)(C.discount)]})]}):(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Discount"}),(0,r.jsx)("p",{className:"font-black text-lg text-gray-400",children:"—"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.paymentMethod&&(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Payment Method"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-base font-black text-gray-900 uppercase",children:C.paymentMethod}),C.mpesaReceiptNumber&&(0,r.jsxs)("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-2.5",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-green-700 mb-1",children:"M-Pesa Receipt"}),(0,r.jsx)("p",{className:"text-sm font-mono text-green-800 font-bold",children:C.mpesaReceiptNumber})]}),C.paymentReference&&(0,r.jsxs)("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-lg p-2.5",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Payment Reference"}),(0,r.jsx)("p",{className:"text-sm font-mono text-gray-800 font-bold",children:C.paymentReference})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Admin Notes"})]}),(0,r.jsx)("textarea",{value:C.notes||"",onChange:e=>L({...C,notes:e.target.value}),onBlur:()=>e5(C.id,{notes:C.notes||null}),placeholder:"Add internal notes about this order...",rows:5,className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2.5 text-sm font-medium focus:border-amber-500 focus:ring-2 focus:ring-amber-500/20 focus:outline-none transition-all resize-none bg-white shadow-sm"})]})]})]}),(0,r.jsxs)("div",{className:"px-6 py-5 border-t-2 border-gray-200 bg-gradient-to-r from-gray-50 via-white to-gray-50 flex flex-wrap items-center justify-between gap-3 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,r.jsxs)("button",{onClick:()=>{let e=window.open(`/orders/${C.id}/invoice?download=true`,"_blank");setTimeout(()=>{e&&e.focus()},1e3)},className:"px-5 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all text-sm font-bold flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Invoice"]}),"COMPLETED"===C.paymentStatus&&"CANCELLED"!==C.status&&(0,r.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to process a refund for this order?")&&sr(C.id)},className:"px-5 py-2.5 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all text-sm font-bold flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Process Refund"]}),"SHIPPED"===C.status&&(0,r.jsxs)("button",{onClick:()=>{let e=new Date().toISOString();e5(C.id,{status:"DELIVERED",deliveredAt:e}),L({...C,status:"DELIVERED",deliveredAt:e})},className:"px-5 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all text-sm font-bold flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Mark Delivered"]})]}),(0,r.jsx)("button",{onClick:()=>L(null),className:"px-5 py-2.5 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all text-sm font-bold shadow-sm hover:shadow-md",children:"Close"})]})]})}),A&&A.id&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[1000] p-4",onClick:()=>S(null),children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[85vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-5 py-4 text-white flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"User Details"}),(0,r.jsx)("p",{className:"text-indigo-100 text-xs mt-0.5",children:A?.email||"No email"})]}),(0,r.jsx)("button",{onClick:()=>S(null),className:"text-white/90 hover:text-white transition-colors p-1.5 hover:bg-white/10 rounded-lg","aria-label":"Close",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",value:A?.name||"",onChange:e=>S({...A,name:e.target.value}),onBlur:()=>A?.id&&e9(A.id,{name:A.name||null}),className:"w-full border border-gray-300 rounded-lg px-2.5 py-1.5 text-xs font-semibold focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",value:A?.email||"",onChange:e=>S({...A,email:e.target.value}),onBlur:()=>A?.id&&e9(A.id,{email:A.email}),className:"w-full border border-gray-300 rounded-lg px-2.5 py-1.5 text-xs font-semibold focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Phone"}),(0,r.jsx)("input",{type:"tel",value:A?.phone||"",onChange:e=>S({...A,phone:e.target.value}),onBlur:()=>A?.id&&e9(A.id,{phone:A.phone||null}),className:"w-full border border-gray-300 rounded-lg px-2.5 py-1.5 text-xs font-semibold focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Role"}),(0,r.jsxs)("select",{value:A?.role||"USER",onChange:e=>{A?.id&&(e9(A.id,{role:e.target.value}),S({...A,role:e.target.value}))},className:"w-full border border-gray-300 rounded-lg px-2.5 py-1.5 text-xs font-semibold focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white",children:[(0,r.jsx)("option",{value:"USER",children:"USER"}),(0,r.jsx)("option",{value:"ADMIN",children:"ADMIN"}),(0,r.jsx)("option",{value:"MODERATOR",children:"MODERATOR"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Total Orders"}),(0,r.jsx)("p",{className:"font-bold text-base text-blue-600",children:A?._count?.orders||A?.totalOrders||0})]}),(0,r.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Total Spent"}),(0,r.jsx)("p",{className:"font-bold text-base text-green-600",children:(0,j.L)(A?.totalSpent||0)})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Reviews"}),(0,r.jsx)("p",{className:"font-bold text-base text-purple-600",children:A?._count?.reviews||0})]}),(0,r.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3 border border-orange-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Cart Items"}),(0,r.jsx)("p",{className:"font-bold text-base text-orange-600",children:A?._count?.cartItems||0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs text-gray-600",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Joined Date"}),(0,r.jsx)("p",{className:"font-medium text-gray-900",children:A.createdAt?e2(A.createdAt):"—"})]}),A.updatedAt&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Last Updated"}),(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e2(A.updatedAt)})]})]}),A?.avatar&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Avatar"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(c.OptimizedImage,{src:A.avatar,alt:A?.name||"User",width:60,height:60,className:"rounded-full border-2 border-gray-200"}),(0,r.jsx)("input",{type:"url",value:A.avatar||"",onChange:e=>S({...A,avatar:e.target.value}),onBlur:()=>A?.id&&e9(A.id,{avatar:A.avatar||null}),placeholder:"Avatar URL",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-xs font-medium focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white"})]})]})]}),(0,r.jsxs)("div",{className:"px-5 py-4 border-t border-gray-200 bg-gray-50 flex flex-wrap items-center justify-between gap-3 flex-shrink-0",children:[A?.id&&(0,r.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to delete this user? This action cannot be undone.")&&e7(A.id)},className:"px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-xs font-semibold flex items-center gap-1.5",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete User"]}),(0,r.jsx)("button",{onClick:()=>S(null),className:"px-4 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-xs font-semibold",children:"Close"})]})]})}),E&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[1000] p-4",onClick:()=>D(null),children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[85vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 px-5 py-4 text-white flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Review Details"}),(0,r.jsxs)("p",{className:"text-amber-100 text-xs mt-0.5",children:["Review ID: ",E.id.slice(0,8)]})]}),(0,r.jsx)("button",{onClick:()=>D(null),className:"text-white/90 hover:text-white transition-colors p-1.5 hover:bg-white/10 rounded-lg","aria-label":"Close",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Rating"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("svg",{className:`w-5 h-5 ${s<(E.rating||0)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s)),(0,r.jsxs)("span",{className:"ml-2 text-sm font-bold text-gray-900",children:[E.rating||0," / 5"]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Date"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e2(E.createdAt)})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"User Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Name"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:E.user?.name||"Anonymous"})]}),E.user?.email&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Email"}),(0,r.jsx)("a",{href:`mailto:${E.user.email}`,className:"text-sm font-medium text-blue-600 hover:text-blue-900",children:E.user.email})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Product"}),(0,r.jsx)(n(),{href:`/products/${E.product?.slug||E.productId}`,className:"text-sm font-bold text-blue-600 hover:text-blue-900",children:E.product?.name||"Product"}),E.product?.sku&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["SKU: ",E.product.sku]})]}),E.title&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Title"}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900",children:E.title})]}),E.comment&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Comment"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:E.comment})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Review ID"}),(0,r.jsx)("p",{className:"text-xs font-mono text-gray-600",children:E.id})]})]}),(0,r.jsxs)("div",{className:"px-5 py-4 border-t border-gray-200 bg-gray-50 flex flex-wrap items-center justify-between gap-3 flex-shrink-0",children:[(0,r.jsxs)("button",{onClick:()=>{E&&st(E.id)},className:"px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-xs font-semibold flex items-center gap-1.5",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Review"]}),(0,r.jsx)("button",{onClick:()=>D(null),className:"px-4 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-xs font-semibold",children:"Close"})]})]})})]})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 px-6",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-8 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-white mb-2",children:"Access restricted"}),(0,r.jsx)("p",{className:"text-slate-300",children:"You need admin privileges to view the dashboard."}),(0,r.jsx)(n(),{href:"/",className:"inline-block mt-6 text-sm font-medium text-sky-300 hover:text-sky-200",children:"Go back home →"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in as an admin to access this page."}),(0,r.jsx)(n(),{href:"/auth/signin",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 font-semibold",children:"Sign In"})]})})})}},9031:(e,s,t)=>{"use strict";t.d(s,{A:()=>n,OptimizedImage:()=>i});var r=t(45512),a=t(45103),l=t(58009);let i=({src:e,alt:s,width:t,height:i,className:n="",priority:o=!1,placeholder:d="blur",...c})=>{let[m,x]=(0,l.useState)(!0),[u,p]=(0,l.useState)(!1),h="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==",g=()=>{x(!1)},b=()=>{p(!0),x(!1)};return u?(0,r.jsx)("div",{className:`bg-gray-200 flex items-center justify-center ${n}`,style:{width:t||"100%",height:i||"auto",aspectRatio:t&&i?`${t}/${i}`:void 0},children:(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:"Image unavailable"})}):t&&i?(0,r.jsxs)("div",{className:`relative ${n}`,style:{width:"100%",aspectRatio:`${t}/${i}`},children:[(0,r.jsx)(a.default,{src:e,alt:s,fill:!0,priority:o,placeholder:d,blurDataURL:h,onLoad:g,onError:b,className:`transition-opacity duration-300 object-cover ${m?"opacity-0":"opacity-100"}`,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...c}),m&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):t&&!i?(0,r.jsxs)("div",{className:`relative ${n}`,style:{width:"100%",aspectRatio:"1"},children:[(0,r.jsx)(a.default,{src:e,alt:s,fill:!0,priority:o,placeholder:d,blurDataURL:h,onLoad:g,onError:b,className:`transition-opacity duration-300 object-cover ${m?"opacity-0":"opacity-100"}`,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...c}),m&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):(0,r.jsxs)("div",{className:`relative ${n}`,children:[(0,r.jsx)(a.default,{src:e,alt:s,width:800,height:600,priority:o,placeholder:d,blurDataURL:h,onLoad:g,onError:b,className:`transition-opacity duration-300 w-full h-auto ${m?"opacity-0":"opacity-100"}`,style:{width:"auto",height:"auto"},...c}),m&&(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]})},n=i},42701:(e,s,t)=>{"use strict";t.d(s,{L:()=>r});let r=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(Number(e)||0)},37461:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/user/Desktop/RogueApe/work/jabistore/src/app/admin/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/user/Desktop/RogueApe/work/jabistore/src/app/admin/page.js","default")},70440:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(88077);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[5994,2732,7254,8077,4880],()=>t(44916));module.exports=r})();