(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1092],{8913:(e,s,t)=>{Promise.resolve().then(t.bind(t,9453))},9453:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(5155),a=t(2115),i=t(8173),l=t.n(i),n=t(6046),d=t(2615),c=t(7908);let o={ORDER_PLACED:"bg-blue-500/20 text-blue-200 border border-blue-500/30",PROCESSING:"bg-indigo-500/20 text-indigo-200 border border-indigo-500/30",SHIPPED:"bg-purple-500/20 text-purple-200 border border-purple-500/30",IN_TRANSIT:"bg-cyan-500/20 text-cyan-200 border border-cyan-500/30",OUT_FOR_DELIVERY:"bg-amber-500/20 text-amber-200 border border-amber-500/30",DELIVERED:"bg-emerald-500/20 text-emerald-200 border border-emerald-500/30"},x=e=>e?new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—";function m(){let e=(0,n.useParams)(),{data:s,status:t}=(0,d.useSession)(),i=null==e?void 0:e.id,[m,p]=(0,a.useState)(null),[h,u]=(0,a.useState)(!0),[g,b]=(0,a.useState)(null);if((0,a.useEffect)(()=>{if(i&&"loading"!==t){if(!s){u(!1),b("Please sign in to view tracking details");return}(async()=>{try{u(!0),b(null);let e=await fetch("/api/orders/".concat(i),{credentials:"include",cache:"no-store"});if(!e.ok){if(404===e.status)throw Error("Order not found");if(401===e.status)throw Error("You do not have access to this order");throw Error("Unable to load tracking details")}let s=await e.json(),t=s.success&&s.data?s.data:s;p(t)}catch(e){b(e.message)}finally{u(!1)}})()}},[i,s,t]),"loading"===t||h)return(0,r.jsx)("div",{className:"min-h-screen bg-transparent flex items-center justify-center",children:(0,r.jsx)(c.A,{size:"lg",color:"blue",text:"Loading tracking details"})});if(!s)return(0,r.jsx)("div",{className:"min-h-screen bg-transparent flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-slate-900 border border-slate-800 rounded-3xl p-10 text-center space-y-4",children:[(0,r.jsx)("p",{className:"text-xl font-semibold text-white",children:"Sign in to view tracking"}),(0,r.jsx)("p",{className:"text-slate-400",children:"Please sign in to access order tracking details."}),(0,r.jsx)(l(),{href:"/auth/signin",className:"inline-flex justify-center px-6 py-3 rounded-2xl bg-gradient-to-r from-sky-500 to-blue-500 text-white font-semibold hover:opacity-90 transition",children:"Sign In"})]})});if(g||!m)return(0,r.jsx)("div",{className:"min-h-screen bg-transparent flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-slate-900 border border-slate-800 rounded-3xl p-10 text-center space-y-4",children:[(0,r.jsx)("p",{className:"text-xl font-semibold text-white",children:g||"Tracking data unavailable."}),(0,r.jsx)("p",{className:"text-slate-400",children:"Check the order and try again."}),(0,r.jsx)(l(),{href:"/orders",className:"inline-flex justify-center px-6 py-3 rounded-2xl bg-gradient-to-r from-sky-500 to-blue-500 text-white font-semibold hover:opacity-90 transition",children:"Back to orders"})]})});let f=(e=>{let s=new Date(e.createdAt),t=e.trackingNumber?new Date(s.getTime()+864e5):null,r=e.deliveredAt?new Date(e.deliveredAt):null,a=[{status:"Order placed",description:"We received your order and confirmed payment.",timestamp:s,completed:!0},{status:"Processing",description:"Hardware is being prepared in our warehouse.",timestamp:new Date(s.getTime()+72e5),completed:["PROCESSING","SHIPPED","DELIVERED"].includes(e.status)}];return t&&a.push({status:"Shipped",description:e.carrier?"Dispatched via ".concat(e.carrier,"."):"On the way to the courier.",timestamp:t,completed:["SHIPPED","DELIVERED"].includes(e.status)}),r&&a.push({status:"Delivered",description:"Handed over to you.",timestamp:r,completed:"DELIVERED"===e.status}),a})(m),j=m.trackingNumber?"https://track.example.com/".concat(m.trackingNumber):null,N=m.trackingNumber?new Date(new Date(m.createdAt).getTime()+2592e5):null;return(0,r.jsx)("div",{className:"min-h-screen bg-transparent text-white",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-8",children:[(0,r.jsxs)("nav",{className:"text-sm text-slate-400 flex items-center gap-2",children:[(0,r.jsx)(l(),{href:"/",className:"hover:text-white",children:"Home"}),(0,r.jsx)("span",{children:"›"}),(0,r.jsx)(l(),{href:"/orders",className:"hover:text-white",children:"Orders"}),(0,r.jsx)("span",{children:"›"}),(0,r.jsx)("span",{className:"text-white font-medium",children:"Tracking"})]}),(0,r.jsxs)("header",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Order"}),(0,r.jsx)("p",{className:"text-xl font-semibold",children:m.orderNumber})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Tracking"}),(0,r.jsx)("p",{className:"font-mono text-sm text-sky-200",children:m.trackingNumber||"—"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Carrier"}),(0,r.jsx)("p",{className:"text-sm",children:m.carrier||"Dilitech Logistics"})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)("span",{className:"px-4 py-2 rounded-full text-xs font-semibold ".concat(o[m.status]||"bg-slate-800 border border-slate-700"),children:m.status?m.status.toLowerCase():"Unknown"}),N&&(0,r.jsxs)("span",{className:"text-sm text-slate-300",children:["Estimated delivery ",x(N)]}),j&&(0,r.jsx)("a",{href:j,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-sky-300 hover:text-sky-100",children:"View carrier portal →"})]})]}),(0,r.jsxs)("section",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Tracking history"}),(0,r.jsx)("ol",{className:"space-y-6",children:f.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(e.completed?"bg-sky-400":"bg-slate-600")}),s<f.length-1&&(0,r.jsx)("div",{className:"w-px flex-1 ".concat(e.completed?"bg-sky-500/40":"bg-slate-700")})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold ".concat(e.completed?"text-white":"text-slate-500"),children:e.status}),(0,r.jsx)("p",{className:"text-sm text-slate-400",children:e.description}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:x(e.timestamp)})]})]},e.status))})]}),(0,r.jsxs)("section",{className:"bg-slate-900 border border-slate-800 rounded-3xl p-6 space-y-4 text-sm text-slate-300",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:"Destination"}),m.shippingAddress?(0,r.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,r.jsx)("p",{className:"text-white font-medium",children:m.shippingAddress.fullName||"".concat(m.shippingAddress.firstName||""," ").concat(m.shippingAddress.lastName||"").trim()||"Recipient"}),(0,r.jsx)("p",{children:m.shippingAddress.street||m.shippingAddress.address1||""}),m.shippingAddress.address2&&(0,r.jsx)("p",{children:m.shippingAddress.address2}),(0,r.jsxs)("p",{children:[m.shippingAddress.city||"",m.shippingAddress.city&&m.shippingAddress.state?", ":"",m.shippingAddress.state||""," ",m.shippingAddress.postalCode||""]}),m.shippingAddress.country&&(0,r.jsx)("p",{children:m.shippingAddress.country})]}):(0,r.jsx)("p",{className:"mt-2",children:"No shipping address on file."})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-xs text-slate-500",children:[(0,r.jsxs)("p",{children:["Need help? Email ",(0,r.jsx)("a",{href:"mailto:support@dilitechsolutions.com",className:"text-sky-300",children:"support@dilitechsolutions.com"})]}),(0,r.jsxs)("p",{children:["WhatsApp concierge ",(0,r.jsx)("a",{href:"https://wa.me/254700000000?text=Hi%20Dilitech,%20check%20order%20".concat(m.orderNumber),target:"_blank",rel:"noopener noreferrer",className:"text-sky-300",children:"+254 700 000 000"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)(l(),{href:"/orders/".concat(m.id),className:"flex-1 bg-gradient-to-r from-sky-500 to-blue-500 text-white py-3 rounded-2xl text-center font-semibold hover:opacity-90",children:"View order details"}),(0,r.jsx)(l(),{href:"/orders",className:"flex-1 border border-slate-700 text-white py-3 rounded-2xl text-center hover:bg-slate-900",children:"Back to orders"})]})]})})}},7908:(e,s,t)=>{"use strict";t.d(s,{A:()=>i,k:()=>a});var r=t(5155);let a=(0,t(2115).memo)(function(e){let{size:s="md",color:t="sky",text:a="Loading...",className:i=""}=e,l={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"},n={sky:"border-brand-sky",indigo:"border-brand-indigo",slate:"border-slate-600",white:"border-white"};return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat(i),role:"status","aria-live":"polite",children:[(0,r.jsx)("div",{className:"\n          ".concat(l[s]||l.md," \n          ").concat(n[t]||n.sky," \n          border-2 border-t-transparent rounded-full animate-spin\n        ")}),a&&(0,r.jsx)("p",{className:"mt-2 text-sm text-slate-400 animate-pulse",children:a})]})}),i=a}},e=>{var s=s=>e(e.s=s);e.O(0,[3830,1097,2432,7979,4884,7098,9744,2033,2322,9592,7331,2652,5030,8392,7694,9173,9401,7358],()=>s(8913)),_N_E=e.O()}]);