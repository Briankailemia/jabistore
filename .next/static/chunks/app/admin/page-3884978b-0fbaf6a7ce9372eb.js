"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6e3],{3628:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var r=s(5155),a=s(2115),l=s(2615),o=s(8173),n=s.n(o),i=s(2720),d=s(2221),c=s(4436),x=s(8640),m=s(4489),u=s(3168),h=s(6577),p=s(3619),g=s(7908),b=s(5747),v=s(9663),f=s(5755),y=s(2818);let j=[{id:"overview",label:"Overview",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"orders",label:"Orders",icon:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"},{id:"products",label:"Products",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},{id:"users",label:"Users",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{id:"analytics",label:"Analytics",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{id:"coupons",label:"Coupons",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},{id:"reviews",label:"Reviews",icon:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},{id:"settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}];function N(){var e,t,s,o,N,w,k,C,L,S,E,A,D,P,M,T,R,O,I,U,V,B,F,z,W,H,G,_,q,J,K,X,Y,Q,$,Z,ee,et,es,er;let{data:ea}=(0,l.useSession)(),el=(null==ea?void 0:null===(e=ea.user)||void 0===e?void 0:e.role)||"USER",eo=(0,a.useMemo)(()=>"ADMIN"===el?j:"MODERATOR"===el?j.filter(e=>["overview","orders","products","reviews"].includes(e.id)):j.filter(e=>"overview"===e.id),[el]),[en,ei]=(0,a.useState)((null===(t=eo[0])||void 0===t?void 0:t.id)||"overview");(0,a.useEffect)(()=>{if(!eo.find(e=>e.id===en)){var e;ei((null===(e=eo[0])||void 0===e?void 0:e.id)||"overview")}},[eo,en]);let ed="ADMIN"===el||"MODERATOR"===el,[ec,ex]=(0,a.useState)(!1),[em,eu]=(0,a.useState)(null),[eh,ep]=(0,a.useState)(null),[eg,eb]=(0,a.useState)(null),[ev,ef]=(0,a.useState)(null),[ey,ej]=(0,a.useState)(null),[eN,ew]=(0,a.useState)(!1),[ek,eC]=(0,a.useState)({store:null,smtp:null}),[eL,eS]=(0,a.useState)(!0),[eE,eA]=(0,a.useState)(!1),[eD,eP]=(0,a.useState)("all"),[eM,eT]=(0,a.useState)("newest"),[eR,eO]=(0,a.useState)([]),[eI,eU]=(0,a.useState)(null),[eV,eB]=(0,a.useState)(""),[eF,ez]=(0,a.useState)("30days"),[eW,eH]=(0,a.useState)({isOpen:!1,type:null,id:null,name:null}),[eG,e_]=(0,a.useState)(!1),[eq,eJ]=(0,a.useState)(""),[eK,eX]=(0,a.useState)(""),[eY,eQ]=(0,a.useState)(""),[e$,eZ]=(0,a.useState)(""),[e0,e2]=(0,a.useState)(""),[e1,e5]=(0,a.useState)(""),{data:e4,loading:e6,refetch:e3}=(0,p.QT)({}),{data:e8,loading:e7}=(0,p.Ck)(),{data:e9,loading:te}=(0,p.Ek)(),{data:tt,loading:ts,refetch:tr}=(0,p.h)({}),{data:ta,loading:tl,refetch:to}=(0,p.kp)({}),{data:tn,loading:ti,refetch:td}=(0,p.GR)(),{data:tc,loading:tx,refetch:tm}=(0,p.hD)({}),{data:tu,loading:th,refetch:tp}=(0,p.SC)({limit:100}),tg=(null==e4?void 0:e4.products)||(null==e4?void 0:null===(s=e4.data)||void 0===s?void 0:s.products)||[],tb=Array.isArray(e8)?e8:(null==e8?void 0:e8.data)||[],tv=Array.isArray(e9)?e9:(null==e9?void 0:e9.data)||[],tf=(null==tt?void 0:tt.orders)||(null==tt?void 0:null===(o=tt.data)||void 0===o?void 0:o.orders)||[],ty=(null==ta?void 0:ta.users)||(null==ta?void 0:null===(N=ta.data)||void 0===N?void 0:N.users)||[],tj=(0,a.useMemo)(()=>{var e;return tc?Array.isArray(tc)?tc:tc.coupons&&Array.isArray(tc.coupons)?tc.coupons:(null===(e=tc.data)||void 0===e?void 0:e.coupons)&&Array.isArray(tc.data.coupons)?tc.data.coupons:[]:[]},[tc]),tN=(null==tu?void 0:tu.reviews)||(null==tu?void 0:null===(w=tu.data)||void 0===w?void 0:w.reviews)||[],tw=tn||{totalProducts:tg.length,totalCategories:tb.length,totalBrands:tv.length,totalOrders:tf.length,totalRevenue:tf.reduce((e,t)=>e+(t.total||0),0),pendingOrders:tf.filter(e=>"PENDING"===e.status).length,lowStockProducts:tg.filter(e=>5>=(e.stock||0)).length,revenueGrowth:0,totalUsers:0,newUsersToday:0},tk=tf.slice(0,5),tC=tg.filter(e=>5>=(e.stock||0)).slice(0,5),tL=tf.filter(e=>{var t,s,r,a;let l=!eq||(e.orderNumber||e.id).toString().toLowerCase().includes(eq.toLowerCase())||(null===(s=e.user)||void 0===s?void 0:null===(t=s.name)||void 0===t?void 0:t.toLowerCase().includes(eq.toLowerCase()))||(null===(a=e.user)||void 0===a?void 0:null===(r=a.email)||void 0===r?void 0:r.toLowerCase().includes(eq.toLowerCase())),o=!eK||e.status===eK;return l&&o}),tS=tg.filter(e=>{if(!eY)return!0;try{var t;let s=String(eY||"").toLowerCase(),r=String((null==e?void 0:e.name)||"").toLowerCase(),a=String((null==e?void 0:e.description)||"").toLowerCase(),l=(null==e?void 0:e.category)?("string"==typeof e.category?e.category:String((null===(t=e.category)||void 0===t?void 0:t.name)||"")).toLowerCase():"",o=String((null==e?void 0:e.sku)||"").toLowerCase();return r.includes(s)||a.includes(s)||l.includes(s)||o.includes(s)}catch(t){return console.error("Error filtering product:",t,e),!0}}),tE=ty.filter(e=>{var t,s;let r=!e$||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(e$.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(e$.toLowerCase())),a=!e0||e.role===e0;return r&&a}),tA=(0,f.d)(),tD={PENDING:"bg-yellow-100 text-yellow-800",CONFIRMED:"bg-blue-100 text-blue-800",PROCESSING:"bg-purple-100 text-purple-800",SHIPPED:"bg-indigo-100 text-indigo-800",DELIVERED:"bg-green-100 text-green-800",CANCELLED:"bg-red-100 text-red-800"},tP={PENDING:"bg-amber-100 text-amber-800",COMPLETED:"bg-green-100 text-green-800",FAILED:"bg-red-100 text-red-800",REFUNDED:"bg-gray-100 text-gray-800"},tM=e=>{if(!e)return"—";try{let t=new Date(e);if(isNaN(t.getTime()))return"—";return t.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return"—"}},tT=async e=>{try{let r=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),a=null,l="";try{(l=await r.text())&&(a=JSON.parse(l))}catch(e){console.error("Failed to parse response:",{parseError:e,status:r.status,statusText:r.statusText,responseText:l.substring(0,500)}),tA.error("Server error (".concat(r.status,"): ").concat(r.statusText||"Invalid response"));return}if(r.ok&&(null==a?void 0:a.success))tA.success(a.message||"Product added successfully"),p.Ay.clearCache(),await e3(),await td();else{var t,s;let o="Failed to add product";if(a){if(o=a.error||a.message||o,a.details){if(Array.isArray(a.details)&&a.details.length>0){let e=a.details.map(e=>{var t;let s=(null===(t=e.path)||void 0===t?void 0:t[0])||e.path||e.field||"field",r=e.message||"Invalid value";return"".concat(s,": ").concat(r)}).join(", ");o="Validation failed: ".concat(e)}else"string"==typeof a.details&&(o=a.details)}}else o="Server error (".concat(r.status,"): ").concat(r.statusText||"Unknown error");tA.error(o);let n={timestamp:new Date().toISOString(),status:r.status,statusText:r.statusText,url:r.url,hasResult:!!a,resultType:a?typeof a:"null",resultKeys:a&&"object"==typeof a?Object.keys(a):[],resultStringified:a?JSON.stringify(a,null,2):"null",responseTextLength:l.length,responseTextPreview:l.substring(0,1e3),productData:{name:(null==e?void 0:e.name)||"missing",slug:(null==e?void 0:e.slug)||"missing",sku:(null==e?void 0:e.sku)||"missing",categoryId:(null==e?void 0:e.categoryId)||"missing",brandId:(null==e?void 0:e.brandId)||"missing",price:(null==e?void 0:e.price)||"missing",imagesCount:(null==e?void 0:null===(t=e.images)||void 0===t?void 0:t.length)||0,hasImages:!!(null==e?void 0:null===(s=e.images)||void 0===s?void 0:s.length)}};console.error("=== Product Creation Error ==="),console.error("Status:",r.status,r.statusText),console.error("Response URL:",r.url),console.error("Result:",a),console.error("Result (stringified):",JSON.stringify(a,null,2)),console.error("Response Text:",l.substring(0,1e3)),console.error("Product Data:",n.productData),console.error("Full Error Details:",n),console.error("=============================")}}catch(s){let t=s.message||"Failed to add product. Please check your connection and try again.";console.error("Error adding product:",{error:s.message,stack:s.stack,name:s.name,productData:{name:null==e?void 0:e.name,slug:null==e?void 0:e.slug}}),tA.error(t)}},tR=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){if(!s.name.endsWith(".csv")){tA.error("Please upload a CSV file");return}try{let t=(await s.text()).split("\n").filter(e=>e.trim()),r=t[0].split(",").map(e=>e.trim().toLowerCase()),a=["name","sku","price","category","brand","stock"].filter(e=>!r.includes(e));if(a.length>0){tA.error("Missing required columns: ".concat(a.join(", ")));return}let l=[];for(let e=1;e<t.length;e++){let s=t[e].split(",").map(e=>e.trim()),a={};r.forEach((e,t)=>{a[e]=s[t]||""});let o=String(a.category||"").trim(),n=String(a.brand||"").trim();if(!o||!n){tA.error("Row ".concat(e+1,": Category and brand are required"));continue}let i=tb.find(e=>String((null==e?void 0:e.name)||"").toLowerCase()===o.toLowerCase()),d=tv.find(e=>String((null==e?void 0:e.name)||"").toLowerCase()===n.toLowerCase());if(!i||!d){tA.error("Row ".concat(e+1,": Category or brand not found"));continue}l.push({name:a.name,slug:a.slug||a.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),sku:a.sku,description:a.description||a.name,shortDescription:a.shortdescription||null,price:parseFloat(a.price)||0,originalPrice:a.originalprice?parseFloat(a.originalprice):null,stock:parseInt(a.stock,10)||0,weight:a.weight?parseFloat(a.weight):null,dimensions:a.dimensions||null,featured:"true"===a.featured||"1"===a.featured,published:"false"!==a.published&&"0"!==a.published,categoryId:i.id,brandId:d.id,images:a.images?a.images.split("|").map((e,t)=>({url:e.trim(),alt:a.name,isPrimary:0===t})):[],features:a.features?a.features.split("|").filter(e=>e.trim()):[],specifications:[],seoTitle:a.seotitle||a.name,seoDescription:a.seodescription||a.description||a.name})}if(0===l.length){tA.error("No valid products found in CSV");return}let o=0,n=0;for(let e of(tA.info("Importing ".concat(l.length," products...")),l))try{(await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).ok?o++:n++}catch(e){n++}p.Ay.clearCache(),await e3(),await td(),0===n?tA.success("Successfully imported ".concat(o," product").concat(1!==o?"s":"")):tA.warning("Imported ".concat(o," product").concat(1!==o?"s":"",", ").concat(n," failed")),e.target.value=""}catch(t){console.error("Bulk import error:",t),tA.error("Failed to import products. Please check the CSV format."),e.target.value=""}}},tO=async(e,t)=>{try{let s=await fetch("/api/orders/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(s.ok)await s.json(),tA.success("Order updated successfully"),em&&em.id===e&&fetch("/api/orders/".concat(e),{credentials:"include"}).then(e=>e.json()).then(e=>{e.success&&e.data&&eu(e.data)}),tr(),td();else{let e=await s.json();tA.error(e.error||"Failed to update order")}}catch(e){console.error("Error updating order:",e),tA.error("Failed to update order")}},tI=async(e,t)=>{try{let s=await fetch("/api/products/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(s.ok)tA.success("Product updated successfully"),e3(),td();else{let e=await s.json();tA.error(e.error||"Failed to update product")}}catch(e){console.error("Error updating product:",e),tA.error("Failed to update product")}},tU=async e=>{if(confirm("Are you sure you want to delete this product? This action cannot be undone."))try{let t=await fetch("/api/products/".concat(e),{method:"DELETE",credentials:"include"});if(t.ok)tA.success("Product deleted successfully"),e3(),td();else{let e=await t.json();tA.error(e.error||"Failed to delete product")}}catch(e){console.error("Error deleting product:",e),tA.error("Failed to delete product")}},tV=async(e,t)=>{try{let s=await fetch("/api/users/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});if(s.ok){if(await s.json(),tA.success("User updated successfully"),eh&&eh.id===e){let s=await fetch("/api/users/".concat(e),{credentials:"include"}).then(e=>e.json()).then(e=>e.success&&e.data?e.data:null).catch(()=>null);s?ep(s):ep({...eh,...t})}to(),td()}else{let e=await s.json();tA.error(e.error||"Failed to update user")}}catch(e){console.error("Error updating user:",e),tA.error("Failed to update user")}},tB=async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{let t=await fetch("/api/users/".concat(e),{method:"DELETE",credentials:"include"});if(t.ok)tA.success("User deleted successfully"),ep(null),to(),td();else{let e=await t.json();tA.error(e.error||"Failed to delete user")}}catch(e){console.error("Error deleting user:",e),tA.error("Failed to delete user")}},tF=async e=>{try{console.log("=== SENDING COUPON DATA ==="),console.log("Coupon data:",JSON.stringify(e,null,2));let t=await fetch("/api/coupons",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),s=await t.json();if(t.ok&&s.success)tA.success(s.message||"Coupon created successfully"),p.Ay.clearCache(),await tm();else if(s.details&&Array.isArray(s.details)&&s.details.length>0){console.error("=== COUPON VALIDATION ERRORS ==="),console.error("Details array:",JSON.stringify(s.details,null,2)),s.details.forEach((e,t)=>{console.error("Error ".concat(t+1,":"),{path:e.path,message:e.message,fullDetail:e})});let e=s.details.map(e=>{let t=e.path?"".concat(e.path,": "):"";return"".concat(t).concat(e.message||JSON.stringify(e))}).join(", ");tA.error(e||"Validation failed")}else{let e=s.error||s.message||"Failed to create coupon";tA.error(e),console.error("Coupon creation error:",s)}}catch(e){console.error("Coupon creation error:",e),tA.error(e.message||"Failed to create coupon. Please try again.")}},tz=e=>{let t=null==tj?void 0:tj.find(t=>t.id===e);eH({isOpen:!0,type:"coupon",id:e,name:t?"".concat(t.code," - ").concat(t.name):null})},tW=async()=>{if(eW.id&&eW.type){e_(!0);try{console.log("=== DELETING ==="),console.log("Type:",eW.type),console.log("ID:",eW.id);let e="",t=null;switch(eW.type){case"coupon":e="/api/coupons/".concat(eW.id),t=tm;break;case"review":e="/api/reviews/".concat(eW.id),t=tp;break;case"user":e="/api/users/".concat(eW.id),t=to;break;case"bulk_reviews":await tq();return;default:throw Error("Unknown delete type")}let s=await fetch(e,{method:"DELETE",credentials:"include"}),r=await s.json();if(s.ok)console.log("Delete successful:",r),tA.success("".concat(eW.type.charAt(0).toUpperCase()+eW.type.slice(1)," deleted successfully")),t&&t(),eH({isOpen:!1,type:null,id:null,name:null});else{console.error("=== DELETE ERROR ==="),console.error("Response status:",s.status),console.error("Error result:",r);let e=r.error||r.message||"Failed to delete ".concat(eW.type);tA.error(e)}}catch(e){console.error("=== DELETE EXCEPTION ==="),console.error("Error:",e),tA.error("Failed to delete ".concat(eW.type,". Please try again."))}finally{e_(!1)}}},tH=e=>{var t;let s=null==tN?void 0:tN.find(t=>t.id===e);eH({isOpen:!0,type:"review",id:e,name:s?s.title||"Review by ".concat((null===(t=s.user)||void 0===t?void 0:t.name)||"User"):null})},tG=async e=>{if(confirm("Are you sure you want to process a refund for this order?"))try{let t=await fetch("/api/orders/".concat(e,"/refund"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(t.ok)tA.success("Refund processed successfully"),tr(),td(),em&&eu({...em,paymentStatus:"REFUNDED"});else{let e=await t.json();tA.error(e.error||"Failed to process refund")}}catch(e){tA.error("Failed to process refund")}};(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/settings",{credentials:"include"});if(e.ok){let{data:t}=await e.json();eC({store:t.store||null,smtp:t.smtp||null})}}catch(e){console.error("Failed to fetch settings:",e)}finally{eS(!1)}})()},[]);let t_=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"store";eA(!0);try{let s=await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...e,type:t})});if(s.ok){tA.success("Settings saved successfully");let{data:e}=await s.json();"store"===t?eC(t=>({...t,store:e.settings})):"smtp"===t&&eC(t=>({...t,smtp:e.settings}))}else{let e=await s.json();tA.error(e.error||"Failed to save settings")}}catch(e){tA.error("Failed to save settings")}finally{eA(!1)}},tq=async()=>{if(0!==eR.length){e_(!0);try{console.log("=== BULK DELETING REVIEWS ==="),console.log("Count:",eR.length),console.log("IDs:",eR);let e=eR.map(e=>fetch("/api/reviews/".concat(e),{method:"DELETE",credentials:"include"})),t=await Promise.allSettled(e),s=t.filter(e=>"fulfilled"===e.status&&e.value.ok).length,r=t.length-s;s>0?(tA.success("".concat(s," review(s) deleted successfully").concat(r>0?" (".concat(r," failed)"):"")),eO([]),tp()):tA.error("Failed to delete reviews")}catch(e){console.error("=== BULK DELETE ERROR ==="),console.error("Error:",e),tA.error("Failed to delete reviews. Please try again.")}finally{e_(!1),eH({isOpen:!1,type:null,id:null,name:null})}}},tJ=async(e,t)=>{try{console.log("=== SENDING COUPON UPDATE DATA ==="),console.log("Coupon ID:",e),console.log("Update data:",JSON.stringify(t,null,2));let s=await fetch("/api/coupons/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),r=await s.json();if(s.ok)tA.success("Coupon updated successfully"),tm(),eU(null);else if(r.details&&Array.isArray(r.details)&&r.details.length>0){console.error("=== COUPON UPDATE VALIDATION ERRORS ==="),console.error("Details array:",JSON.stringify(r.details,null,2)),r.details.forEach((e,t)=>{console.error("Error ".concat(t+1,":"),{path:e.path,message:e.message,fullDetail:e})});let e=r.details.map(e=>{let t=e.path?"".concat(e.path,": "):"";return"".concat(t).concat(e.message||JSON.stringify(e))}).join(", ");tA.error(e||"Validation failed")}else{let e=r.error||r.message||"Failed to update coupon";tA.error(e),console.error("Coupon update error:",r)}}catch(e){console.error("Coupon update error:",e),tA.error("Failed to update coupon")}};return ea?ed?"ADMIN"!==ea.user.role?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have admin privileges to access this page."}),(0,r.jsx)(n(),{href:"/",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 font-semibold",children:"Go Home"})]})})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(e6||e7||te||ts||ti)&&(0,r.jsx)("div",{className:"fixed inset-0 bg-white/80 flex items-center justify-center z-50",children:(0,r.jsx)(g.k,{size:"lg"})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",(0,r.jsx)("span",{className:"font-semibold text-purple-600",children:ea.user.name}),"! Manage your Dilitech Solutions operations"]})]})}),(0,r.jsx)(u.A,{activeTab:en,setActiveTab:ei,tabs:eo}),"overview"===en&&(0,r.jsx)(h.A,{stats:tw,recentOrders:tk,lowStockProducts:tC,statusColors:tD,paymentStatusColors:tP,formatDate:tM,setActiveTab:ei}),"orders"===en&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-orders","aria-labelledby":"admin-tab-orders",className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Order Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"View and manage all customer orders"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsxs)("select",{value:eK,onChange:e=>eX(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-medium text-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"",children:"All Status"}),(0,r.jsx)("option",{value:"PENDING",children:"Pending"}),(0,r.jsx)("option",{value:"CONFIRMED",children:"Confirmed"}),(0,r.jsx)("option",{value:"PROCESSING",children:"Processing"}),(0,r.jsx)("option",{value:"SHIPPED",children:"Shipped"}),(0,r.jsx)("option",{value:"DELIVERED",children:"Delivered"}),(0,r.jsx)("option",{value:"CANCELLED",children:"Cancelled"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Search orders...",value:eq,onChange:e=>eJ(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm w-full sm:w-64 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all"})]})]})}),ts?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(g.k,{})}):0===tL.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mt-4",children:"No orders found"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"No orders match your search criteria"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Order #"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Customer"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Items"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Payment Method"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Payment"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Shipping"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Total"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:tL.map(e=>{var t,s,a,l,o,n;return(0,r.jsxs)("tr",{className:"hover:bg-blue-50/50 cursor-pointer transition-colors",onClick:()=>{fetch("/api/orders/".concat(e.id),{credentials:"include"}).then(e=>e.json()).then(t=>{t.success&&t.data?eu(t.data):eu(e)}).catch(()=>eu(e))},children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"font-bold text-gray-900",children:e.orderNumber||"#".concat(e.id.slice(-8))}),e.trackingNumber&&(0,r.jsx)("div",{className:"text-xs text-blue-600 font-mono mt-0.5",children:e.trackingNumber})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:(null===(t=e.user)||void 0===t?void 0:t.name)||"Unknown Customer"}),(0,r.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-[200px]",children:(null===(s=e.user)||void 0===s?void 0:s.email)||"No email"}),(null===(a=e.user)||void 0===a?void 0:a.phone)&&(0,r.jsx)("div",{className:"text-xs text-gray-400",children:e.user.phone})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:tM(e.createdAt)}),e.deliveredAt&&(0,r.jsxs)("div",{className:"text-xs text-green-600 mt-0.5",children:["Delivered ",tM(e.deliveredAt)]})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:(null===(l=e.items)||void 0===l?void 0:l.length)||0}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"items"})]}),e.items&&e.items.length>0&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-0.5 truncate max-w-[150px]",title:e.items.map(e=>{var t;return(null===(t=e.product)||void 0===t?void 0:t.name)||"Product"}).join(", "),children:[(null===(n=e.items[0])||void 0===n?void 0:null===(o=n.product)||void 0===o?void 0:o.name)||"Product",e.items.length>1&&" +".concat(e.items.length-1," more")]})]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900 capitalize",children:e.paymentMethod?e.paymentMethod.toLowerCase():"—"}),e.mpesaReceiptNumber&&(0,r.jsx)("div",{className:"text-xs text-emerald-600 font-mono mt-0.5",children:e.mpesaReceiptNumber}),e.paymentReference&&(0,r.jsx)("div",{className:"text-xs text-gray-500 font-mono mt-0.5",children:e.paymentReference})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-3 py-1.5 rounded-lg text-xs font-semibold ".concat(tD[e.status]||"bg-gray-100 text-gray-800"),children:e.status||"UNKNOWN"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-3 py-1.5 rounded-lg text-xs font-semibold ".concat(tP[e.paymentStatus]||"bg-gray-100 text-gray-800"),children:e.paymentStatus||"UNKNOWN"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.shippingAddress?(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[(0,r.jsx)("div",{className:"font-medium",children:e.shippingAddress.city||"—"}),(0,r.jsx)("div",{className:"text-gray-500",children:e.shippingAddress.state||""}),e.carrier&&(0,r.jsx)("div",{className:"text-blue-600 mt-0.5",children:e.carrier})]}):(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"No address"})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-bold text-blue-600",children:(0,v.L)(e.total||0)}),e.discount>0&&(0,r.jsxs)("div",{className:"text-xs text-red-600",children:["-",(0,v.L)(e.discount)]})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),fetch("/api/orders/".concat(e.id),{credentials:"include"}).then(e=>e.json()).then(t=>{t.success&&t.data?eu(t.data):eu(e)}).catch(()=>eu(e))},className:"text-blue-600 hover:text-blue-900 font-semibold transition-colors px-3 py-1.5 rounded-lg hover:bg-blue-50",children:"View Details"})})]},e.id)})})]})})]}),"products"===en&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-products","aria-labelledby":"admin-tab-products",className:"bg-white rounded-xl shadow-lg border-2 border-gray-200",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-white to-blue-100 px-6 py-5 border-b-2 border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-black text-gray-900",children:"Product Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your product catalog, inventory, and pricing"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search products...",value:eY,onChange:e=>eQ(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2 text-sm w-full sm:w-64 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}),(0,r.jsx)("button",{onClick:()=>ex(!0),className:"bg-blue-900 text-white px-5 py-2 rounded-xl hover:bg-blue-800 transition-all duration-200 font-medium shadow-md hover:shadow-lg",children:"+ Add Product"}),(0,r.jsxs)("label",{className:"cursor-pointer bg-white border-2 border-gray-200 text-gray-700 px-5 py-2 rounded-xl hover:bg-gray-50 transition-colors font-medium shadow-sm hover:shadow-md",children:[(0,r.jsx)("input",{type:"file",accept:".csv",onChange:tR,className:"hidden"}),"\uD83D\uDCE5 Import CSV"]}),(0,r.jsx)("button",{onClick:()=>{let e=new Blob(["name,sku,price,category,brand,stock,description,originalprice,images,features\nSample Product,SKU-001,1000,Electronics,Sample Brand,10,Product description,1200,https://example.com/image1.jpg|https://example.com/image2.jpg,Feature 1|Feature 2"],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="product-import-template.csv",s.click(),window.URL.revokeObjectURL(t),tA.success("CSV template downloaded")},className:"bg-gray-100 border-2 border-gray-200 text-gray-700 px-5 py-2 rounded-xl hover:bg-gray-200 transition-colors font-medium shadow-sm hover:shadow-md",title:"Download CSV template",children:"\uD83D\uDCC4 Template"})]})]})}),0===tg.length?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Product Management"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Manage your product catalog, inventory, and pricing."}),(0,r.jsx)("button",{onClick:()=>ex(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"Add Your First Product"})]})}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:tS.map(e=>{var t,s,a,l;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10 relative rounded-lg overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 border border-gray-300",children:(null===(s=e.images)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.url)?(0,r.jsx)(b.OptimizedImage,{src:e.images[0].url,alt:e.name,width:40,height:40,className:"h-10 w-10 rounded-lg object-cover"}):(0,r.jsx)("div",{className:"h-10 w-10 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[null===(a=e.description)||void 0===a?void 0:a.substring(0,50),"..."]})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sku}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(l=e.category)||void 0===l?void 0:l.name)||"Unknown"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-medium",children:(0,v.L)(e.price)}),e.comparePrice&&(0,r.jsx)("span",{className:"text-xs text-gray-500 line-through",children:(0,v.L)(e.comparePrice)})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"number",value:e.stock||0,onChange:t=>{let s=parseInt(t.target.value)||0;tI(e.id,{stock:s})},className:"w-20 border border-gray-300 rounded px-2 py-1 text-sm",min:"0"}),5>=(e.stock||0)&&(0,r.jsx)("span",{className:"text-xs text-red-500 font-medium",children:"Low"})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"draft"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Unknown"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>ef(e),className:"text-purple-600 hover:text-purple-900",children:"Edit"}),(0,r.jsx)(n(),{href:"/products/".concat(e.id),className:"text-indigo-600 hover:text-indigo-900",target:"_blank",children:"View"}),(0,r.jsx)("button",{onClick:()=>tU(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})})]},e.id)})})]})})]}),"users"===en&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-users","aria-labelledby":"admin-tab-users",className:"bg-white rounded-xl shadow-lg border-2 border-gray-200",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-5 text-white rounded-t-xl",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-black text-white",children:"User Management"}),(0,r.jsx)("p",{className:"text-sm text-indigo-100 mt-1",children:"Manage user accounts, roles, and permissions"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search users...",value:e$,onChange:e=>eZ(e.target.value),className:"border-2 border-white/20 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2.5 text-sm font-medium text-white placeholder-white/70 focus:border-white focus:ring-2 focus:ring-white/20 focus:outline-none transition-all w-full sm:w-64"}),(0,r.jsxs)("select",{value:e0,onChange:e=>e2(e.target.value),className:"border-2 border-white/20 bg-white/10 backdrop-blur-sm rounded-xl px-4 py-2.5 text-sm font-semibold text-white focus:border-white focus:ring-2 focus:ring-white/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"",className:"text-gray-900",children:"All Users"}),(0,r.jsx)("option",{value:"USER",className:"text-gray-900",children:"Users"}),(0,r.jsx)("option",{value:"ADMIN",className:"text-gray-900",children:"Admins"}),(0,r.jsx)("option",{value:"MODERATOR",className:"text-gray-900",children:"Moderators"})]})]})]})}),tl?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(g.k,{})}):0===ty.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No users found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"No users match your search criteria."})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"User"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Role"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Orders"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Total Spent"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Joined"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:tE.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-blue-50 cursor-pointer transition-colors",onClick:()=>{fetch("/api/users/".concat(e.id),{credentials:"include"}).then(e=>{if(!e.ok)throw Error("Failed to fetch user");return e.json()}).then(t=>{t.success&&t.data?ep(t.data):t.data?ep(t.data):ep(e)}).catch(t=>{console.error("Error fetching user:",t),ep(e)})},children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:e.avatar?(0,r.jsx)(b.OptimizedImage,{className:"h-10 w-10 rounded-full border-2 border-gray-200",src:e.avatar,alt:e.name||"User",width:40,height:40}):(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center border-2 border-gray-200",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:(e.name||e.email||"U").charAt(0).toUpperCase()})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-bold text-gray-900",children:e.name||"No name"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.phone||"No phone"})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("a",{href:"mailto:".concat(e.email),className:"text-sm font-medium text-blue-600 hover:text-blue-900",children:e.email})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("select",{value:e.role,onChange:t=>tV(e.id,{role:t.target.value}),className:"text-xs border-2 border-gray-200 rounded-lg px-3 py-1.5 font-semibold focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"USER",children:"USER"}),(0,r.jsx)("option",{value:"ADMIN",children:"ADMIN"}),(0,r.jsx)("option",{value:"MODERATOR",children:"MODERATOR"})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.totalOrders||0})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-bold text-blue-600",children:(0,v.L)(e.totalSpent||0)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:tM(e.createdAt)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),fetch("/api/users/".concat(e.id),{credentials:"include"}).then(e=>{if(!e.ok)throw Error("Failed to fetch user");return e.json()}).then(t=>{t.success&&t.data?ep(t.data):t.data?ep(t.data):ep(e)}).catch(t=>{console.error("Error fetching user:",t),ep(e)})},className:"text-blue-600 hover:text-blue-900 font-semibold transition-colors",children:"View"})})]},e.id))})]})})]}),"analytics"===en&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-analytics","aria-labelledby":"admin-tab-analytics",className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Analytics Dashboard"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Track your business performance and insights"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("select",{value:eF,onChange:e=>ez(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-medium text-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"7days",children:"Last 7 Days"}),(0,r.jsx)("option",{value:"30days",children:"Last 30 Days"}),(0,r.jsx)("option",{value:"90days",children:"Last 90 Days"}),(0,r.jsx)("option",{value:"1year",children:"Last Year"}),(0,r.jsx)("option",{value:"all",children:"All Time"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=new Blob([["Metric,Value",["Total Revenue",(0,v.L)(tw.totalRevenue||0)].join(","),["Total Orders",tw.totalOrders||0].join(","),["Average Order Value",(0,v.L)(tw.totalOrders>0?(tw.totalRevenue||0)/tw.totalOrders:0)].join(","),["Total Customers",tw.totalUsers||0].join(",")].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="analytics-".concat(new Date().toISOString().split("T")[0],".csv"),s.click(),window.URL.revokeObjectURL(t),tA.success("Analytics exported successfully")},className:"px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 text-sm font-semibold transition-colors shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-500/20",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:(0,v.L)(tw.totalRevenue||0)}),void 0!==tw.revenueGrowth&&null!==tw.revenueGrowth&&(0,r.jsxs)("p",{className:"text-sm font-medium flex items-center gap-1 ".concat((tw.revenueGrowth||0)>=0?"text-green-600":"text-red-600"),children:[(0,r.jsx)("svg",{className:"w-4 h-4 ".concat((tw.revenueGrowth||0)>=0?"":"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Math.abs(tw.revenueGrowth||0).toFixed(1),"% from last month"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:tw.totalOrders||0}),tw.pendingOrders>0&&(0,r.jsxs)("p",{className:"text-sm text-amber-600 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),tw.pendingOrders," pending orders"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:tw.totalOrders>0?(0,v.L)((tw.totalRevenue||0)/tw.totalOrders):(0,v.L)(0)}),(0,r.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Per order average"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/20",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mb-2",children:tw.totalUsers||0}),tw.newUsersToday>0&&(0,r.jsxs)("p",{className:"text-sm text-green-600 font-medium flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"+",tw.newUsersToday," new today"]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Order Status Distribution"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Breakdown of orders by status"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:["PENDING","CONFIRMED","PROCESSING","SHIPPED","DELIVERED","CANCELLED"].map(e=>{let t=tf.filter(t=>t.status===e).length,s=tf.length>0?t/tf.length*100:0;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:e}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[t," orders"]}),(0,r.jsxs)("span",{className:"text-sm font-bold text-gray-900",children:[s.toFixed(1),"%"]})]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,r.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat("PENDING"===e?"bg-yellow-500":"CONFIRMED"===e?"bg-blue-500":"PROCESSING"===e?"bg-purple-500":"SHIPPED"===e?"bg-indigo-500":"DELIVERED"===e?"bg-green-500":"CANCELLED"===e?"bg-red-500":"bg-gray-400"),style:{width:"".concat(s,"%")}})})]},e)})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Payment Method Breakdown"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Revenue by payment method"})]}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:["mpesa","card","stripe"].map(e=>{let t=tf.filter(t=>{var s;return(null===(s=t.paymentMethod)||void 0===s?void 0:s.toLowerCase())===e}),s=t.length,a=t.reduce((e,t)=>e+(t.total||0),0),l=tf.length>0?s/tf.length*100:0;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-700 capitalize",children:e.toUpperCase()}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[s," orders"]}),(0,r.jsx)("span",{className:"text-sm font-bold text-gray-900 ml-3",children:(0,v.L)(a)})]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,r.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat({mpesa:"bg-green-500",card:"bg-blue-500",stripe:"bg-indigo-500"}[e]||"bg-gray-400"),style:{width:"".concat(l,"%")}})})]},e)})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Top Selling Products"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Best performing products by sales"})]}),(0,r.jsx)("div",{className:"p-6",children:0===tf.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),(0,r.jsx)("p",{className:"text-gray-500 mt-4 font-medium",children:"No order data available"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Product sales will appear here once orders are placed"})]}):(0,r.jsx)("div",{className:"space-y-3",children:(()=>{let e={};return tf.forEach(t=>{var s;null===(s=t.items)||void 0===s||s.forEach(t=>{let s=t.productId;if(!e[s]){var r;e[s]={name:(null===(r=t.product)||void 0===r?void 0:r.name)||"Unknown Product",quantity:0,revenue:0}}e[s].quantity+=t.quantity,e[s].revenue+=Number(t.price)*t.quantity})}),Object.values(e).sort((e,t)=>t.quantity-e.quantity).slice(0,10).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 border border-gray-200 hover:border-blue-300 transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white font-bold shadow-md",children:["#",t+1]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-0.5",children:[e.quantity," units sold"]})]})]}),(0,r.jsx)("p",{className:"font-bold text-blue-600 text-lg",children:(0,v.L)(e.revenue)})]},t))})()})})]})]}),"coupons"===en&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-coupons","aria-labelledby":"admin-tab-coupons",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Coupons"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:Array.isArray(tj)?tj.length:0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Coupons"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg shadow-green-500/20",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:Array.isArray(tj)?tj.filter(e=>(null==e?void 0:e.status)==="ACTIVE").length:0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Usage"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-500/20",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-indigo-600",children:Array.isArray(tj)?tj.reduce((e,t)=>{var s;return e+((null==t?void 0:null===(s=t._count)||void 0===s?void 0:s.orders)||0)},0):0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Expired Coupons"}),(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg shadow-red-500/20",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,r.jsx)("p",{className:"text-3xl font-bold text-red-600",children:Array.isArray(tj)?tj.filter(e=>(null==e?void 0:e.status)==="EXPIRED").length:0})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 py-5 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Coupon Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Create and manage discount coupons for your store"})]}),(0,r.jsxs)("button",{onClick:()=>ew(!0),className:"bg-blue-600 text-white px-5 py-2.5 rounded-xl hover:bg-blue-700 transition-colors font-semibold shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Coupon"]})]})}),(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("select",{value:eV,onChange:e=>eB(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-medium text-gray-700 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"",children:"All Status"}),(0,r.jsx)("option",{value:"ACTIVE",children:"Active"}),(0,r.jsx)("option",{value:"INACTIVE",children:"Inactive"}),(0,r.jsx)("option",{value:"EXPIRED",children:"Expired"})]})})}),tx?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(g.k,{})}):(()=>{let e=Array.isArray(tj)?tj:[],t=eV?e.filter(e=>(null==e?void 0:e.status)===eV):e;return Array.isArray(t)&&0!==t.length?(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Code"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Type"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Value"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Usage"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Valid Until"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>{var t;let s=(null===(t=e._count)||void 0===t?void 0:t.orders)||0,a=e.usageLimit||1/0,l=a!==1/0?s/a*100:0,o=e.validUntil&&new Date(e.validUntil)<new Date;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 font-mono text-sm font-bold text-blue-600",children:e.code}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm capitalize text-gray-700",children:(e.type||"").toLowerCase().replace("_"," ")}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm font-bold text-gray-900",children:"PERCENTAGE"===e.type?"".concat(e.value,"%"):(0,v.L)(e.value||0)}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2.5 max-w-[120px]",children:(0,r.jsx)("div",{className:"h-2.5 rounded-full transition-all duration-300 ".concat(l>=100?"bg-red-500":l>=80?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(l,100),"%")}})}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:[s," / ",a===1/0?"∞":a]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.validUntil?tM(e.validUntil):(0,r.jsx)("span",{className:"text-gray-400",children:"No expiry"})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"px-3 py-1.5 rounded-lg text-xs font-semibold ".concat(o||"EXPIRED"===e.status?"bg-red-100 text-red-800":"ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:o?"EXPIRED":e.status})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>eU(e),className:"text-blue-600 hover:text-blue-900 text-sm font-semibold transition-colors",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>tz(e.id),className:"text-red-600 hover:text-red-900 text-sm font-semibold transition-colors",children:"Delete"})]})})]},e.id)})})]})}):(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mt-4",children:"No coupons found"}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"Create your first coupon to get started"}),(0,r.jsx)("button",{onClick:()=>ew(!0),className:"mt-4 bg-blue-600 text-white px-5 py-2.5 rounded-xl hover:bg-blue-700 transition-colors font-semibold",children:"Create Coupon"})]})})()]})]}),"reviews"===en&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-reviews","aria-labelledby":"admin-tab-reviews",className:"bg-white rounded-xl shadow-lg border-2 border-gray-200",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 px-6 py-5 text-white rounded-t-xl",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-black text-white",children:"Review Management"}),(0,r.jsx)("p",{className:"text-sm text-amber-100 mt-1",children:(()=>{let e=tN.length;if(e1.trim()||"all"!==eD){let t=e1.toLowerCase();e=tN.filter(e=>{if("all"!==eD&&e.rating!==parseInt(eD))return!1;if(e1.trim()){var s,r,a;let l=(null===(s=e.user)||void 0===s?void 0:s.name)||"Anonymous",o=(null===(r=e.product)||void 0===r?void 0:r.name)||"",n=e.title||"",i=e.comment||"",d=(null===(a=e.user)||void 0===a?void 0:a.email)||"";return l.toLowerCase().includes(t)||o.toLowerCase().includes(t)||n.toLowerCase().includes(t)||i.toLowerCase().includes(t)||d.toLowerCase().includes(t)}return!0}).length}return"".concat(e," of ").concat(tN.length," reviews")})()})]}),eR.length>0&&(0,r.jsxs)("button",{onClick:()=>{0!==eR.length&&eH({isOpen:!0,type:"bulk_reviews",id:null,name:"".concat(eR.length," review(s)")})},className:"px-5 py-2.5 bg-red-600 text-white rounded-xl hover:bg-red-700 text-sm font-semibold transition-colors shadow-md hover:shadow-lg flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Selected (",eR.length,")"]})]})}),(0,r.jsx)("div",{className:"px-6 py-4 border-b-2 border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,r.jsx)("input",{type:"text",placeholder:"Search reviews by user, product, title, or comment...",value:e1,className:"w-full border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-medium focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",onChange:e=>e5(e.target.value)})}),(0,r.jsxs)("select",{value:eD,onChange:e=>eP(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-semibold focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"all",children:"All Ratings"}),(0,r.jsx)("option",{value:"5",children:"5 Stars"}),(0,r.jsx)("option",{value:"4",children:"4 Stars"}),(0,r.jsx)("option",{value:"3",children:"3 Stars"}),(0,r.jsx)("option",{value:"2",children:"2 Stars"}),(0,r.jsx)("option",{value:"1",children:"1 Star"})]}),(0,r.jsxs)("select",{value:eM,onChange:e=>eT(e.target.value),className:"border-2 border-gray-200 rounded-xl px-4 py-2.5 text-sm font-semibold focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all",children:[(0,r.jsx)("option",{value:"newest",children:"Newest First"}),(0,r.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,r.jsx)("option",{value:"highest",children:"Highest Rating"}),(0,r.jsx)("option",{value:"lowest",children:"Lowest Rating"})]})]})}),th?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(g.k,{})}):(()=>{let e=tN;if(e1.trim()){let t=e1.toLowerCase();e=e.filter(e=>{var s,r,a;let l=(null===(s=e.user)||void 0===s?void 0:s.name)||"Anonymous",o=(null===(r=e.product)||void 0===r?void 0:r.name)||"",n=e.title||"",i=e.comment||"",d=(null===(a=e.user)||void 0===a?void 0:a.email)||"";return l.toLowerCase().includes(t)||o.toLowerCase().includes(t)||n.toLowerCase().includes(t)||i.toLowerCase().includes(t)||d.toLowerCase().includes(t)})}return"all"!==eD&&(e=e.filter(e=>e.rating===parseInt(eD))),0===(e=[...e].sort((e,t)=>{switch(eM){case"oldest":return new Date(e.createdAt)-new Date(t.createdAt);case"highest":return t.rating-e.rating;case"lowest":return e.rating-t.rating;default:return new Date(t.createdAt)-new Date(e.createdAt)}})).length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"No reviews found"}),(0,r.jsx)("p",{className:"text-gray-600",children:"No reviews match your search criteria."})]}):(0,r.jsxs)("div",{className:"p-6",children:[e.length>0&&(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3 pb-3 border-b border-gray-200",children:[(0,r.jsx)("input",{type:"checkbox",checked:e.every(e=>eR.includes(e.id))&&e.length>0,onChange:t=>{if(t.target.checked)eO([...new Set([...eR,...e.map(e=>e.id)])]);else{let t=e.map(e=>e.id);eO(eR.filter(e=>!t.includes(e)))}},className:"rounded border-2 border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-2"}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-gray-700",children:["Select All (",e.length," reviews)"]}),eR.length>0&&(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[eR.length," selected"]})]}),(0,r.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t,s,a,l;return(0,r.jsx)("div",{className:"bg-white rounded-xl border-2 border-gray-200 p-5 hover:border-blue-300 hover:shadow-md transition-all cursor-pointer",onClick:()=>{eb(e)},children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[(0,r.jsx)("input",{type:"checkbox",checked:eR.includes(e.id),onChange:t=>{t.stopPropagation(),t.target.checked?eO([...eR,e.id]):eO(eR.filter(t=>t!==e.id))},className:"mt-1.5 rounded border-2 border-gray-300 text-blue-600 focus:ring-blue-500 focus:ring-2 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-0.5 bg-yellow-50 px-2 py-1 rounded-lg border border-yellow-200",children:[[void 0,void 0,void 0,void 0,void 0].map((t,s)=>(0,r.jsx)("svg",{className:"w-4 h-4 ".concat(s<(e.rating||0)?"text-yellow-500":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s)),(0,r.jsxs)("span",{className:"ml-1 text-xs font-bold text-gray-700",children:[e.rating||0,"/5"]})]}),(0,r.jsx)("span",{className:"text-sm font-bold text-gray-900",children:(null===(t=e.user)||void 0===t?void 0:t.name)||"Anonymous"}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,r.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:tM(e.createdAt)}),(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,r.jsx)(n(),{href:"/products/".concat((null===(s=e.product)||void 0===s?void 0:s.slug)||e.productId),onClick:e=>e.stopPropagation(),className:"text-sm text-blue-600 hover:text-blue-900 font-semibold truncate",children:(null===(a=e.product)||void 0===a?void 0:a.name)||"Product"})]}),e.title&&(0,r.jsx)("p",{className:"font-bold text-base text-gray-900 mb-2",children:e.title}),e.comment&&(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-3 leading-relaxed line-clamp-3",children:e.comment}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[(0,r.jsxs)("span",{className:"bg-gray-100 text-gray-600 px-2 py-1 rounded-lg font-mono font-medium",children:["ID: ",e.id.slice(0,8)]}),(null===(l=e.user)||void 0===l?void 0:l.email)&&(0,r.jsx)("a",{href:"mailto:".concat(e.user.email),onClick:e=>e.stopPropagation(),className:"text-blue-600 hover:text-blue-900 font-medium",children:e.user.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),eb(e)},className:"px-4 py-2 text-xs font-semibold text-blue-600 hover:bg-blue-50 rounded-lg transition-colors border-2 border-blue-200 hover:border-blue-300",children:"View"}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),tH(e.id)},className:"px-4 py-2 text-xs font-semibold text-red-600 hover:bg-red-50 rounded-lg transition-colors border-2 border-red-200 hover:border-red-300",children:"Delete"})]})]})},e.id)})})]})})()]}),"settings"===en&&(0,r.jsxs)("div",{role:"tabpanel",id:"admin-tabpanel-settings","aria-labelledby":"admin-tab-settings",className:"bg-white rounded-lg shadow-sm border",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Store Settings"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your store configuration and preferences"})]}),eL?(0,r.jsx)("div",{className:"p-12 text-center",children:(0,r.jsx)(g.k,{})}):(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData(e.target);t_({storeName:t.get("storeName"),storeEmail:t.get("storeEmail"),storePhone:t.get("storePhone"),storeAddress:t.get("storeAddress"),enableMpesa:"on"===t.get("enableMpesa"),enableCard:"on"===t.get("enableCard"),defaultShippingCost:parseFloat(t.get("defaultShippingCost")),freeShippingThreshold:parseFloat(t.get("freeShippingThreshold")),taxRate:parseFloat(t.get("taxRate")),currency:t.get("currency"),timezone:t.get("timezone")})},className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"General Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name *"}),(0,r.jsx)("input",{type:"text",name:"storeName",defaultValue:(null==ek?void 0:null===(k=ek.store)||void 0===k?void 0:k.storeName)||"Dilitech Solutions",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Email *"}),(0,r.jsx)("input",{type:"email",name:"storeEmail",defaultValue:(null==ek?void 0:null===(C=ek.store)||void 0===C?void 0:C.storeEmail)||"support@dilitechsolutions.com",required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Phone"}),(0,r.jsx)("input",{type:"tel",name:"storePhone",defaultValue:(null==ek?void 0:null===(L=ek.store)||void 0===L?void 0:L.storePhone)||"+254 700 000 000",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Address"}),(0,r.jsx)("input",{type:"text",name:"storeAddress",defaultValue:(null==ek?void 0:null===(S=ek.store)||void 0===S?void 0:S.storeAddress)||"Nairobi, Kenya",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Payment Settings"}),(0,r.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,r.jsx)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"enableMpesa",defaultChecked:(null==ek?void 0:null===(E=ek.store)||void 0===E?void 0:E.enableMpesa)!==!1,className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Enable M-Pesa Payments"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 ml-8 mt-1",children:"Allow customers to pay via M-Pesa mobile money"})]})}),(0,r.jsx)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"enableCard",defaultChecked:(null==ek?void 0:null===(A=ek.store)||void 0===A?void 0:A.enableCard)!==!1,className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Enable Card Payments"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 ml-8 mt-1",children:"Allow customers to pay with credit/debit cards"})]})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Shipping Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Shipping Cost (KES) *"}),(0,r.jsx)("input",{type:"number",name:"defaultShippingCost",step:"0.01",min:"0",defaultValue:(null==ek?void 0:null===(D=ek.store)||void 0===D?void 0:D.defaultShippingCost)||500,required:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Standard shipping fee for all orders"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Free Shipping Threshold (KES)"}),(0,r.jsx)("input",{type:"number",name:"freeShippingThreshold",step:"0.01",min:"0",defaultValue:(null==ek?void 0:null===(P=ek.store)||void 0===P?void 0:P.freeShippingThreshold)||5e3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Orders above this amount get free shipping"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Tax & Currency Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Rate (%)"}),(0,r.jsx)("input",{type:"number",name:"taxRate",step:"0.01",min:"0",max:"100",defaultValue:(null==ek?void 0:null===(M=ek.store)||void 0===M?void 0:M.taxRate)||0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,r.jsxs)("select",{name:"currency",defaultValue:(null==ek?void 0:null===(T=ek.store)||void 0===T?void 0:T.currency)||"KES",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"KES",children:"KES - Kenyan Shilling"}),(0,r.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,r.jsx)("option",{value:"EUR",children:"EUR - Euro"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),(0,r.jsxs)("select",{name:"timezone",defaultValue:(null==ek?void 0:null===(R=ek.store)||void 0===R?void 0:R.timezone)||"Africa/Nairobi",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,r.jsx)("option",{value:"Africa/Nairobi",children:"Africa/Nairobi (EAT)"}),(0,r.jsx)("option",{value:"UTC",children:"UTC"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-4 pb-2 border-b",children:"Email/SMTP Settings"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Configure SMTP settings for sending emails from contact forms and support requests"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Host *"}),(0,r.jsx)("input",{type:"text",name:"smtpHost",defaultValue:(null==ek?void 0:null===(O=ek.smtp)||void 0===O?void 0:O.host)||y.env.NEXT_PUBLIC_SMTP_HOST||"smtp.gmail.com",required:!0,placeholder:"smtp.gmail.com",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Port *"}),(0,r.jsx)("input",{type:"number",name:"smtpPort",defaultValue:(null==ek?void 0:null===(I=ek.smtp)||void 0===I?void 0:I.port)||y.env.NEXT_PUBLIC_SMTP_PORT||587,required:!0,min:"1",max:"65535",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"587 for TLS, 465 for SSL"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Username/Email *"}),(0,r.jsx)("input",{type:"email",name:"smtpUser",defaultValue:(null==ek?void 0:null===(U=ek.smtp)||void 0===U?void 0:U.user)||y.env.NEXT_PUBLIC_SMTP_USER||"",required:!0,placeholder:"your-email@gmail.com",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Password"}),(0,r.jsx)("input",{type:"password",name:"smtpPass",placeholder:(null==ek?void 0:null===(V=ek.smtp)||void 0===V?void 0:V.pass)?"***configured*** (leave blank to keep current)":"Enter password",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to keep current password"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Email Address *"}),(0,r.jsx)("input",{type:"email",name:"smtpFrom",defaultValue:(null==ek?void 0:null===(B=ek.smtp)||void 0===B?void 0:B.from)||(null==ek?void 0:null===(F=ek.smtp)||void 0===F?void 0:F.user)||y.env.NEXT_PUBLIC_SMTP_FROM||"",required:!0,placeholder:"noreply@yourdomain.com",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"flex items-center pt-6",children:[(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",name:"smtpSecure",defaultChecked:(null==ek?void 0:null===(z=ek.smtp)||void 0===z?void 0:z.secure)||(null==ek?void 0:null===(W=ek.smtp)||void 0===W?void 0:W.port)===465,className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),(0,r.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Use SSL/TLS (Secure)"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 ml-4",children:"Enable for port 465 (SSL), disable for port 587 (TLS)"})]})]}),(0,r.jsx)("div",{className:"flex justify-end space-x-3 pt-4",children:(0,r.jsx)("button",{type:"button",onClick:e=>{e.preventDefault();let t=document.getElementById("settings-form");if(!t)return;let s=new FormData(t),r={smtpHost:s.get("smtpHost"),smtpPort:parseInt(s.get("smtpPort")||"587"),smtpSecure:"on"===s.get("smtpSecure"),smtpUser:s.get("smtpUser"),smtpPass:s.get("smtpPass"),smtpFrom:s.get("smtpFrom")};r.smtpPass||delete r.smtpPass,t_(r,"smtp")},disabled:eE,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:eE?"Saving...":"Save SMTP Settings"})})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,r.jsx)("button",{type:"button",onClick:()=>window.location.reload(),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:eE,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:eE?"Saving...":"Save Store Settings"})]})]})})]}),(0,r.jsx)(i.A,{isOpen:ec,onClose:()=>ex(!1),onAddProduct:tT}),"        ",(0,r.jsx)(x.A,{isOpen:!!eI,onClose:()=>eU(null),coupon:eI,onUpdateCoupon:tJ}),(0,r.jsx)(c.A,{isOpen:eN,onClose:()=>ew(!1),onCreateCoupon:tF}),(0,r.jsx)(m.A,{isOpen:eW.isOpen,onClose:()=>eH({isOpen:!1,type:null,id:null,name:null}),onConfirm:tW,title:"coupon"===eW.type?"Delete Coupon":"review"===eW.type?"Delete Review":"bulk_reviews"===eW.type?"Delete Reviews":"Confirm Delete",message:"coupon"===eW.type?"Are you sure you want to delete this coupon? This action cannot be undone and will affect all future orders.":"review"===eW.type?"Are you sure you want to delete this review? This action cannot be undone.":"bulk_reviews"===eW.type?"Are you sure you want to delete ".concat(eW.name,"? This action cannot be undone."):"Are you sure you want to delete this item? This action cannot be undone.",itemName:eW.name,isLoading:eG}),(0,r.jsx)(d.A,{isOpen:!!ev,onClose:()=>ef(null),product:ev,onUpdateProduct:async e=>{await tI(ev.id,e),ef(null)}}),em&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-[1000] p-4",onClick:()=>eu(null),children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col border-2 border-gray-100",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 px-6 py-5 text-white flex-shrink-0 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),(0,r.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-2xl font-black tracking-tight",children:["Order ",em.orderNumber||"#".concat(em.id.slice(-8))]}),(0,r.jsx)("p",{className:"text-blue-100 text-sm mt-0.5 font-medium",children:tM(em.createdAt)})]})]})}),(0,r.jsx)("button",{onClick:()=>eu(null),className:"text-white/90 hover:text-white transition-all p-2 hover:bg-white/20 rounded-xl backdrop-blur-sm","aria-label":"Close",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-5 bg-gradient-to-br from-gray-50 to-white",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 rounded-xl p-4 border-2 border-blue-300 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Customer"})]}),(0,r.jsx)("p",{className:"font-black text-sm text-gray-900 truncate mb-1",children:(null===(H=em.user)||void 0===H?void 0:H.name)||"Unknown"}),(0,r.jsx)("a",{href:"mailto:".concat(null===(G=em.user)||void 0===G?void 0:G.email),className:"text-xs text-blue-600 hover:text-blue-800 truncate block font-semibold",children:(null===(_=em.user)||void 0===_?void 0:_.email)||"No email"}),(null===(q=em.user)||void 0===q?void 0:q.phone)&&(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1 font-medium",children:em.user.phone})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-purple-100 rounded-xl p-4 border-2 border-purple-300 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Status"})]}),(0,r.jsxs)("select",{value:em.status||"PENDING",onChange:e=>{tO(em.id,{status:e.target.value}),eu({...em,status:e.target.value})},className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2 text-sm font-bold focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 focus:outline-none transition-all bg-white shadow-sm",children:[(0,r.jsx)("option",{value:"PENDING",children:"PENDING"}),(0,r.jsx)("option",{value:"CONFIRMED",children:"CONFIRMED"}),(0,r.jsx)("option",{value:"PROCESSING",children:"PROCESSING"}),(0,r.jsx)("option",{value:"SHIPPED",children:"SHIPPED"}),(0,r.jsx)("option",{value:"DELIVERED",children:"DELIVERED"}),(0,r.jsx)("option",{value:"CANCELLED",children:"CANCELLED"})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-green-100 rounded-xl p-4 border-2 border-green-300 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Payment"})]}),(0,r.jsxs)("select",{value:em.paymentStatus||"PENDING",onChange:e=>{tO(em.id,{paymentStatus:e.target.value}),eu({...em,paymentStatus:e.target.value})},className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2 text-sm font-bold focus:border-green-500 focus:ring-2 focus:ring-green-500/20 focus:outline-none transition-all bg-white shadow-sm",children:[(0,r.jsx)("option",{value:"PENDING",children:"PENDING"}),(0,r.jsx)("option",{value:"COMPLETED",children:"COMPLETED"}),(0,r.jsx)("option",{value:"FAILED",children:"FAILED"}),(0,r.jsx)("option",{value:"REFUNDED",children:"REFUNDED"})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 via-orange-50 to-amber-100 rounded-xl p-4 border-2 border-amber-300 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-amber-500 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide",children:"Total"})]}),(0,r.jsx)("p",{className:"font-black text-xl text-amber-700",children:(0,v.L)(em.total||0)}),em.discount>0&&(0,r.jsxs)("p",{className:"text-xs text-red-600 font-bold mt-1",children:["-",(0,v.L)(em.discount)]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[em.shippingAddress&&(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Shipping Address"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("p",{className:"text-sm text-gray-900 font-bold",children:em.shippingAddress.fullName||em.shippingAddress.firstName||"—"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 leading-relaxed",children:[em.shippingAddress.street||em.shippingAddress.address1||"",em.shippingAddress.city?", ".concat(em.shippingAddress.city):"",em.shippingAddress.state?", ".concat(em.shippingAddress.state):"",em.shippingAddress.postalCode?" ".concat(em.shippingAddress.postalCode):""]}),em.shippingAddress.country&&(0,r.jsx)("p",{className:"text-sm text-gray-700 font-semibold",children:em.shippingAddress.country}),em.shippingAddress.phone&&(0,r.jsxs)("p",{className:"text-sm text-blue-600 font-semibold mt-2 flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),em.shippingAddress.phone]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm hover:shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Tracking Information"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5 uppercase tracking-wide",children:"Tracking Number"}),(0,r.jsx)("input",{type:"text",value:em.trackingNumber||"",onChange:e=>eu({...em,trackingNumber:e.target.value}),onBlur:()=>tO(em.id,{trackingNumber:em.trackingNumber||null}),placeholder:"Enter tracking number",className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2.5 text-sm font-medium focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all bg-white shadow-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5 uppercase tracking-wide",children:"Carrier"}),(0,r.jsx)("input",{type:"text",value:em.carrier||"",onChange:e=>eu({...em,carrier:e.target.value}),onBlur:()=>tO(em.id,{carrier:em.carrier||null}),placeholder:"Enter carrier name",className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2.5 text-sm font-medium focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all bg-white shadow-sm"})]}),em.deliveredAt&&(0,r.jsx)("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-2.5",children:(0,r.jsxs)("p",{className:"text-xs font-semibold text-green-700",children:["Delivered: ",tM(em.deliveredAt)]})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Order Items"}),(0,r.jsxs)("span",{className:"ml-auto px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-bold",children:[(null===(J=em.items)||void 0===J?void 0:J.length)||0," ",(null===(K=em.items)||void 0===K?void 0:K.length)===1?"Item":"Items"]})]}),(0,r.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto pr-2",children:(null===(X=em.items)||void 0===X?void 0:X.length)>0?em.items.map(e=>{var t,s,a,l,o;return(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border-2 border-gray-200 hover:border-purple-300 hover:shadow-md transition-all",children:[(null===(a=e.product)||void 0===a?void 0:null===(s=a.images)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.url)?(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(b.OptimizedImage,{src:e.product.images[0].url,alt:e.product.name,width:70,height:70,className:"rounded-xl object-cover border-2 border-gray-200 shadow-sm"})}):(0,r.jsx)("div",{className:"w-[70px] h-[70px] bg-gray-200 rounded-xl border-2 border-gray-300 flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-bold text-base text-gray-900 truncate mb-1",children:(null===(l=e.product)||void 0===l?void 0:l.name)||"Product removed"}),(null===(o=e.product)||void 0===o?void 0:o.sku)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 font-mono mb-1",children:["SKU: ",e.product.sku]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[(0,r.jsxs)("span",{className:"px-2.5 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-bold",children:["Qty: ",e.quantity]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 font-semibold",children:[(0,v.L)(e.price)," each"]})]})]}),(0,r.jsx)("div",{className:"text-right flex-shrink-0",children:(0,r.jsx)("p",{className:"font-black text-lg text-blue-600",children:(0,v.L)(Number(e.price)*e.quantity)})})]},e.id)}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,r.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"No items found"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border-2 border-blue-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Subtotal"}),(0,r.jsx)("p",{className:"font-black text-lg text-blue-700",children:(0,v.L)(em.subtotal||0)})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Shipping"}),(0,r.jsx)("p",{className:"font-black text-lg text-gray-900",children:(0,v.L)(em.shipping||0)})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Tax"}),(0,r.jsx)("p",{className:"font-black text-lg text-gray-900",children:(0,v.L)(em.tax||0)})]}),em.discount>0?(0,r.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border-2 border-red-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Discount"}),(0,r.jsxs)("p",{className:"font-black text-lg text-red-600",children:["-",(0,v.L)(em.discount)]})]}):(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border-2 border-gray-300 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide mb-2",children:"Discount"}),(0,r.jsx)("p",{className:"font-black text-lg text-gray-400",children:"—"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[em.paymentMethod&&(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Payment Method"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-base font-black text-gray-900 uppercase",children:em.paymentMethod}),em.mpesaReceiptNumber&&(0,r.jsxs)("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-2.5",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-green-700 mb-1",children:"M-Pesa Receipt"}),(0,r.jsx)("p",{className:"text-sm font-mono text-green-800 font-bold",children:em.mpesaReceiptNumber})]}),em.paymentReference&&(0,r.jsxs)("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-lg p-2.5",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Payment Reference"}),(0,r.jsx)("p",{className:"text-sm font-mono text-gray-800 font-bold",children:em.paymentReference})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-5 border-2 border-gray-200 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide",children:"Admin Notes"})]}),(0,r.jsx)("textarea",{value:em.notes||"",onChange:e=>eu({...em,notes:e.target.value}),onBlur:()=>tO(em.id,{notes:em.notes||null}),placeholder:"Add internal notes about this order...",rows:5,className:"w-full border-2 border-gray-300 rounded-lg px-3 py-2.5 text-sm font-medium focus:border-amber-500 focus:ring-2 focus:ring-amber-500/20 focus:outline-none transition-all resize-none bg-white shadow-sm"})]})]})]}),(0,r.jsxs)("div",{className:"px-6 py-5 border-t-2 border-gray-200 bg-gradient-to-r from-gray-50 via-white to-gray-50 flex flex-wrap items-center justify-between gap-3 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,r.jsxs)("button",{onClick:()=>{let e=window.open("/orders/".concat(em.id,"/invoice?download=true"),"_blank");setTimeout(()=>{e&&e.focus()},1e3)},className:"px-5 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all text-sm font-bold flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download Invoice"]}),"COMPLETED"===em.paymentStatus&&"CANCELLED"!==em.status&&(0,r.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to process a refund for this order?")&&tG(em.id)},className:"px-5 py-2.5 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-xl hover:from-red-700 hover:to-red-800 transition-all text-sm font-bold flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),"Process Refund"]}),"SHIPPED"===em.status&&(0,r.jsxs)("button",{onClick:()=>{let e=new Date().toISOString();tO(em.id,{status:"DELIVERED",deliveredAt:e}),eu({...em,status:"DELIVERED",deliveredAt:e})},className:"px-5 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all text-sm font-bold flex items-center gap-2 shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Mark Delivered"]})]}),(0,r.jsx)("button",{onClick:()=>eu(null),className:"px-5 py-2.5 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-all text-sm font-bold shadow-sm hover:shadow-md",children:"Close"})]})]})}),eh&&eh.id&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[1000] p-4",onClick:()=>ep(null),children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[85vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-5 py-4 text-white flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"User Details"}),(0,r.jsx)("p",{className:"text-indigo-100 text-xs mt-0.5",children:(null==eh?void 0:eh.email)||"No email"})]}),(0,r.jsx)("button",{onClick:()=>ep(null),className:"text-white/90 hover:text-white transition-colors p-1.5 hover:bg-white/10 rounded-lg","aria-label":"Close",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",value:(null==eh?void 0:eh.name)||"",onChange:e=>ep({...eh,name:e.target.value}),onBlur:()=>(null==eh?void 0:eh.id)&&tV(eh.id,{name:eh.name||null}),className:"w-full border border-gray-300 rounded-lg px-2.5 py-1.5 text-xs font-semibold focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",value:(null==eh?void 0:eh.email)||"",onChange:e=>ep({...eh,email:e.target.value}),onBlur:()=>(null==eh?void 0:eh.id)&&tV(eh.id,{email:eh.email}),className:"w-full border border-gray-300 rounded-lg px-2.5 py-1.5 text-xs font-semibold focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Phone"}),(0,r.jsx)("input",{type:"tel",value:(null==eh?void 0:eh.phone)||"",onChange:e=>ep({...eh,phone:e.target.value}),onBlur:()=>(null==eh?void 0:eh.id)&&tV(eh.id,{phone:eh.phone||null}),className:"w-full border border-gray-300 rounded-lg px-2.5 py-1.5 text-xs font-semibold focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Role"}),(0,r.jsxs)("select",{value:(null==eh?void 0:eh.role)||"USER",onChange:e=>{(null==eh?void 0:eh.id)&&(tV(eh.id,{role:e.target.value}),ep({...eh,role:e.target.value}))},className:"w-full border border-gray-300 rounded-lg px-2.5 py-1.5 text-xs font-semibold focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white",children:[(0,r.jsx)("option",{value:"USER",children:"USER"}),(0,r.jsx)("option",{value:"ADMIN",children:"ADMIN"}),(0,r.jsx)("option",{value:"MODERATOR",children:"MODERATOR"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Total Orders"}),(0,r.jsx)("p",{className:"font-bold text-base text-blue-600",children:(null==eh?void 0:null===(Y=eh._count)||void 0===Y?void 0:Y.orders)||(null==eh?void 0:eh.totalOrders)||0})]}),(0,r.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Total Spent"}),(0,r.jsx)("p",{className:"font-bold text-base text-green-600",children:(0,v.L)((null==eh?void 0:eh.totalSpent)||0)})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Reviews"}),(0,r.jsx)("p",{className:"font-bold text-base text-purple-600",children:(null==eh?void 0:null===(Q=eh._count)||void 0===Q?void 0:Q.reviews)||0})]}),(0,r.jsxs)("div",{className:"bg-orange-50 rounded-lg p-3 border border-orange-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Cart Items"}),(0,r.jsx)("p",{className:"font-bold text-base text-orange-600",children:(null==eh?void 0:null===($=eh._count)||void 0===$?void 0:$.cartItems)||0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-xs text-gray-600",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Joined Date"}),(0,r.jsx)("p",{className:"font-medium text-gray-900",children:eh.createdAt?tM(eh.createdAt):"—"})]}),eh.updatedAt&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Last Updated"}),(0,r.jsx)("p",{className:"font-medium text-gray-900",children:tM(eh.updatedAt)})]})]}),(null==eh?void 0:eh.avatar)&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Avatar"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(b.OptimizedImage,{src:eh.avatar,alt:(null==eh?void 0:eh.name)||"User",width:60,height:60,className:"rounded-full border-2 border-gray-200"}),(0,r.jsx)("input",{type:"url",value:eh.avatar||"",onChange:e=>ep({...eh,avatar:e.target.value}),onBlur:()=>(null==eh?void 0:eh.id)&&tV(eh.id,{avatar:eh.avatar||null}),placeholder:"Avatar URL",className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 text-xs font-medium focus:border-blue-500 focus:ring-1 focus:ring-blue-500/20 focus:outline-none transition-all bg-white"})]})]})]}),(0,r.jsxs)("div",{className:"px-5 py-4 border-t border-gray-200 bg-gray-50 flex flex-wrap items-center justify-between gap-3 flex-shrink-0",children:[(null==eh?void 0:eh.id)&&(0,r.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to delete this user? This action cannot be undone.")&&tB(eh.id)},className:"px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-xs font-semibold flex items-center gap-1.5",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete User"]}),(0,r.jsx)("button",{onClick:()=>ep(null),className:"px-4 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-xs font-semibold",children:"Close"})]})]})}),eg&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[1000] p-4",onClick:()=>eb(null),children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[85vh] overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 px-5 py-4 text-white flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Review Details"}),(0,r.jsxs)("p",{className:"text-amber-100 text-xs mt-0.5",children:["Review ID: ",eg.id.slice(0,8)]})]}),(0,r.jsx)("button",{onClick:()=>eb(null),className:"text-white/90 hover:text-white transition-colors p-1.5 hover:bg-white/10 rounded-lg","aria-label":"Close",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Rating"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)("svg",{className:"w-5 h-5 ".concat(t<(eg.rating||0)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t)),(0,r.jsxs)("span",{className:"ml-2 text-sm font-bold text-gray-900",children:[eg.rating||0," / 5"]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Date"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:tM(eg.createdAt)})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"User Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Name"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:(null===(Z=eg.user)||void 0===Z?void 0:Z.name)||"Anonymous"})]}),(null===(ee=eg.user)||void 0===ee?void 0:ee.email)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Email"}),(0,r.jsx)("a",{href:"mailto:".concat(eg.user.email),className:"text-sm font-medium text-blue-600 hover:text-blue-900",children:eg.user.email})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Product"}),(0,r.jsx)(n(),{href:"/products/".concat((null===(et=eg.product)||void 0===et?void 0:et.slug)||eg.productId),className:"text-sm font-bold text-blue-600 hover:text-blue-900",children:(null===(es=eg.product)||void 0===es?void 0:es.name)||"Product"}),(null===(er=eg.product)||void 0===er?void 0:er.sku)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["SKU: ",eg.product.sku]})]}),eg.title&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Title"}),(0,r.jsx)("p",{className:"text-sm font-bold text-gray-900",children:eg.title})]}),eg.comment&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Comment"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:eg.comment})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Review ID"}),(0,r.jsx)("p",{className:"text-xs font-mono text-gray-600",children:eg.id})]})]}),(0,r.jsxs)("div",{className:"px-5 py-4 border-t border-gray-200 bg-gray-50 flex flex-wrap items-center justify-between gap-3 flex-shrink-0",children:[(0,r.jsxs)("button",{onClick:()=>{eg&&tH(eg.id)},className:"px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-xs font-semibold flex items-center gap-1.5",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Review"]}),(0,r.jsx)("button",{onClick:()=>eb(null),className:"px-4 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors text-xs font-semibold",children:"Close"})]})]})})]})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 px-6",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl p-8 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-white mb-2",children:"Access restricted"}),(0,r.jsx)("p",{className:"text-slate-300",children:"You need admin privileges to view the dashboard."}),(0,r.jsx)(n(),{href:"/",className:"inline-block mt-6 text-sm font-medium text-sky-300 hover:text-sky-200",children:"Go back home →"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to be signed in as an admin to access this page."}),(0,r.jsx)(n(),{href:"/auth/signin",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 font-semibold",children:"Sign In"})]})})})}}}]);