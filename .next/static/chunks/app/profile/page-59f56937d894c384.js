(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{443:(e,s,t)=>{Promise.resolve().then(t.bind(t,554))},554:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(5155),l=t(2115),r=t(8173),i=t.n(r),d=t(2615),n=t(3619),o=t(7908),c=t(5747),x=t(9663);function m(){var e,s,t;let{data:r,status:m}=(0,d.useSession)(),{data:u,loading:h,removeFromWishlist:g}=(0,n.nU)(),{data:p,loading:b}=(0,n.h)(),[y,v]=(0,l.useState)("overview"),[j,N]=(0,l.useState)(!1),[f,w]=(0,l.useState)(!1),[A,C]=(0,l.useState)(""),[S,k]=(0,l.useState)(""),[E,D]=(0,l.useState)([]),[L,P]=(0,l.useState)(!1),[K,M]=(0,l.useState)(""),[B,I]=(0,l.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",country:"",zipCode:""}),R=Array.isArray(p)?p.length:0,O=Array.isArray(p)?p.reduce((e,s)=>"COMPLETED"===s.paymentStatus&&"number"==typeof s.total?e+s.total:e,0):0,F=Array.isArray(u)?u.length:0;(0,l.useEffect)(()=>{(async()=>{if(null==r?void 0:r.user){w(!0),C("");try{var e,s;let t=await fetch("/api/profile",{method:"GET",headers:{Accept:"application/json"},credentials:"include"}),a=await t.json().catch(()=>({}));if(!t.ok||!(null==a?void 0:a.success)){C((null==a?void 0:a.message)||"Failed to load profile");let e=(null===(s=r.user.name)||void 0===s?void 0:s.split(" "))||[];I({firstName:e[0]||"",lastName:e.slice(1).join(" ")||"",email:r.user.email||"",phone:r.user.phone||"",address:"",city:"",country:"",zipCode:""}),w(!1);return}let l=(null===(e=a.data)||void 0===e?void 0:e.user)||{},i=(l.name||r.user.name||"").split(" ").filter(Boolean);I({firstName:i[0]||"",lastName:i.slice(1).join(" ")||"",email:l.email||r.user.email||"",phone:l.phone||r.user.phone||"",address:"",city:"",country:"",zipCode:""})}catch(e){console.error("Failed to load profile",e),C("Failed to load profile")}finally{w(!1)}}})()},[r]),(0,l.useEffect)(()=>{if("reservations"!==y||!(null==r?void 0:r.user))return;let e=new AbortController;return(async()=>{try{var s;P(!0),M("");let t=await fetch("/api/reservations",{credentials:"include",signal:e.signal}),a=await t.json().catch(()=>({}));if(!t.ok||!(null==a?void 0:a.success)){D([]),M((null==a?void 0:a.message)||(null==a?void 0:a.error)||"Failed to load reservations");return}D((null===(s=a.data)||void 0===s?void 0:s.reservations)||[])}catch(e){if("AbortError"===e.name)return;console.error("Failed to load reservations",e),M("Failed to load reservations")}finally{P(!1)}})(),()=>e.abort()},[y,r]);let Q=e=>{I({...B,[e.target.name]:e.target.value})},H=async()=>{C(""),k(""),w(!0);try{var e;let s=[B.firstName,B.lastName].filter(Boolean).join(" ").trim(),t=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({name:s||void 0,phone:B.phone||null})}),a=await t.json().catch(()=>({}));if(!t.ok||!(null==a?void 0:a.success)){C((null==a?void 0:a.message)||"Failed to update profile");return}let l=(null===(e=a.data)||void 0===e?void 0:e.user)||{},r=(l.name||s).split(" ").filter(Boolean);I(e=>({...e,firstName:r[0]||"",lastName:r.slice(1).join(" ")||"",email:l.email||e.email,phone:l.phone||""})),k("Profile updated successfully"),N(!1)}catch(e){console.error("Failed to update profile",e),C("Failed to update profile")}finally{w(!1)}};return"loading"===m?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.k,{size:"lg"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})})}):r?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50 to-white",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-[36px] border-2 border-gray-200 bg-gradient-to-br from-blue-50 via-white to-blue-100 p-8 mb-8 shadow-lg",children:[(0,a.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,a.jsx)("div",{className:"absolute -top-24 left-10 h-72 w-72 rounded-full bg-blue-300/30 blur-3xl"}),(0,a.jsx)("div",{className:"absolute -bottom-32 right-0 h-80 w-80 rounded-full bg-indigo-300/25 blur-3xl"})]}),(0,a.jsxs)("div",{className:"relative z-10 flex items-center space-x-6",children:[(0,a.jsx)("div",{className:"w-24 h-24 bg-blue-900 rounded-full flex items-center justify-center border-4 border-white shadow-lg",children:(0,a.jsx)("span",{className:"text-3xl font-black text-white",children:(null===(e=B.firstName)||void 0===e?void 0:e[0])||(null===(t=r.user.email)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.toUpperCase())||"U"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-black mb-2 text-gray-900",children:B.firstName&&B.lastName?"".concat(B.firstName," ").concat(B.lastName):r.user.name||r.user.email}),(0,a.jsx)("p",{className:"text-gray-600 mb-1 font-medium",children:r.user.email}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsx)("span",{className:"bg-blue-900 text-white px-3 py-1 rounded-full font-bold",children:"ADMIN"===r.user.role?"\uD83D\uDC51 Admin":"\uD83D\uDC64 Customer"}),(0,a.jsx)("span",{className:"bg-gray-100 text-gray-900 px-3 py-1 rounded-full font-bold border-2 border-gray-200",children:"Member since 2024"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-lg border-2 border-gray-200 mb-8",children:[(0,a.jsx)("div",{className:"border-b-2 border-gray-100",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-8 px-6 overflow-x-auto",children:[{id:"overview",label:"Overview",icon:"\uD83D\uDCCA"},{id:"personal",label:"Personal Info",icon:"\uD83D\uDC64"},{id:"orders",label:"Order History",icon:"\uD83D\uDCE6"},{id:"reservations",label:"Reservations",icon:"\uD83D\uDCC5"},{id:"wishlist",label:"Wishlist",icon:"❤️"},{id:"settings",label:"Settings",icon:"⚙️"}].map(e=>(0,a.jsxs)("button",{onClick:()=>v(e.id),className:"py-4 px-1 border-b-2 font-bold text-sm flex items-center space-x-2 whitespace-nowrap transition-colors ".concat(y===e.id?"border-blue-900 text-blue-900 bg-blue-50":"border-transparent text-gray-600 hover:text-blue-900 hover:border-blue-300"),children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.label})]},e.id))})}),(0,a.jsxs)("div",{className:"p-6",children:[A&&(0,a.jsx)("div",{className:"mb-4 rounded-md bg-red-50 border border-red-200 px-4 py-3 text-sm text-red-700",children:A}),"reservations"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"My Reservations"})}),K&&(0,a.jsx)("div",{className:"rounded-md bg-red-50 border border-red-200 px-4 py-3 text-sm text-red-700",children:K}),L?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(o.k,{})}):E&&E.length>0?(0,a.jsx)("div",{className:"space-y-4",children:E.map(e=>{var s;let t=new Date(e.reservedFor),l=!(t.getTime()<Date.now())&&"CANCELLED"!==e.status&&"COMPLETED"!==e.status&&"NO_SHOW"!==e.status;return(0,a.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.guestName}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Party of ",e.partySize]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.toLocaleString("en-KE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:(null===(s=e.table)||void 0===s?void 0:s.name)?"Table ".concat(e.table.name):"No specific table assigned"}),e.notes&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Notes: ",e.notes]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 justify-between md:justify-end",children:[(0,a.jsx)("span",{className:"inline-flex px-3 py-1 rounded-full text-xs font-medium\n                                ".concat("CONFIRMED"===e.status?"bg-green-100 text-green-800":"","\n                                ").concat("PENDING"===e.status?"bg-yellow-100 text-yellow-800":"","\n                                ").concat("SEATED"===e.status?"bg-blue-100 text-blue-800":"","\n                                ").concat("COMPLETED"===e.status?"bg-gray-100 text-gray-800":"","\n                                ").concat("CANCELLED"===e.status?"bg-red-100 text-red-800":"","\n                                ").concat("NO_SHOW"===e.status?"bg-orange-100 text-orange-800":"","\n                              ").trim(),children:e.status}),l&&(0,a.jsx)("button",{onClick:()=>handleCancelReservation(e.id),className:"text-sm font-medium text-red-600 hover:text-red-700 border border-red-200 px-3 py-1.5 rounded-lg bg-white hover:bg-red-50 disabled:opacity-60 disabled:cursor-not-allowed",disabled:L,children:"Cancel"})]})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCC5"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reservations yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any upcoming reservations."})]})]}),S&&(0,a.jsx)("div",{className:"mb-4 rounded-md bg-green-50 border border-green-200 px-4 py-3 text-sm text-green-700",children:S}),"overview"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Account Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 font-bold mb-1",children:"Total Orders"}),(0,a.jsx)("p",{className:"text-3xl font-black text-blue-900",children:b?"–":R})]}),(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCE6"})]})}),(0,a.jsx)("div",{className:"bg-white border-2 border-emerald-200 rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 font-bold mb-1",children:"Total Spent"}),(0,a.jsx)("p",{className:"text-3xl font-black text-emerald-900",children:b?"–":(0,x.L)(O)})]}),(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCB0"})]})}),(0,a.jsx)("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600 font-bold mb-1",children:"Wishlist Items"}),(0,a.jsx)("p",{className:"text-3xl font-black text-blue-900",children:h?"–":F})]}),(0,a.jsx)("div",{className:"text-4xl",children:"❤️"})]})})]}),(0,a.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 shadow-md",children:[(0,a.jsx)("h3",{className:"text-lg font-black text-gray-900 mb-4",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-emerald-600 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-gray-900 font-medium",children:"Order #FH-2024-001 delivered successfully"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"2 days ago"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-900 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-gray-900 font-medium",children:"Added Smart Home Hub to wishlist"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"5 days ago"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-900 rounded-full"}),(0,a.jsx)("span",{className:"text-sm text-gray-900 font-medium",children:"Profile updated"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"1 week ago"})]})]})]})]}),"personal"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Personal Information"}),(0,a.jsx)("button",{onClick:()=>N(!j),className:"bg-blue-900 text-white px-4 py-2 rounded-xl hover:bg-blue-800 transition-colors font-bold shadow-md hover:shadow-lg",children:j?"Cancel":"Edit"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),j?(0,a.jsx)("input",{type:"text",name:"firstName",value:B.firstName,onChange:Q,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:B.firstName||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),j?(0,a.jsx)("input",{type:"text",name:"lastName",value:B.lastName,onChange:Q,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:B.lastName||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:B.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),j?(0,a.jsx)("input",{type:"tel",name:"phone",value:B.phone,onChange:Q,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:B.phone||"Not provided"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),j?(0,a.jsx)("input",{type:"text",name:"address",value:B.address,onChange:Q,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:B.address||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),j?(0,a.jsx)("input",{type:"text",name:"city",value:B.city,onChange:Q,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:B.city||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),j?(0,a.jsx)("input",{type:"text",name:"country",value:B.country,onChange:Q,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:ring-2 focus:ring-blue-900 focus:border-blue-900 transition-all"}):(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 px-4 py-3 rounded-lg",children:B.country||"Not provided"})]})]}),j&&(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:H,className:"bg-emerald-600 text-white px-6 py-3 rounded-xl hover:bg-emerald-700 transition-colors font-bold shadow-md hover:shadow-lg disabled:opacity-60 disabled:cursor-not-allowed",disabled:f,children:f?"Saving...":"Save Changes"}),(0,a.jsx)("button",{onClick:()=>N(!1),className:"bg-gray-100 text-gray-900 px-6 py-3 rounded-xl hover:bg-gray-200 transition-colors font-bold border-2 border-gray-300",children:"Cancel"})]})]}),"orders"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Order History"}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:b?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(o.k,{})}):p&&p.length>0?(0,a.jsx)("div",{className:"space-y-6",children:p.map(e=>{var s,t,l,r,d;return(0,a.jsxs)("div",{className:"border rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg text-gray-900",children:["Order #",e.id.slice(-8)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Placed on ",new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Payment: ","mpesa"===e.paymentMethod?"M-Pesa":e.paymentMethod||"N/A"]}),(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("COMPLETED"===e.paymentStatus?"bg-green-100 text-green-800":"PENDING"===e.paymentStatus?"bg-yellow-100 text-yellow-800":"FAILED"===e.paymentStatus?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.paymentStatus||"PENDING"}),e.mpesaReceiptNumber&&(0,a.jsxs)("span",{className:"text-xs text-green-600 font-mono",children:["Receipt: ",e.mpesaReceiptNumber]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-xl text-gray-900",children:["KSh ",(null===(s=e.total)||void 0===s?void 0:s.toLocaleString())||"0"]}),(0,a.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium ".concat("DELIVERED"===e.status?"bg-green-100 text-green-800":"SHIPPED"===e.status?"bg-blue-100 text-blue-800":"PROCESSING"===e.status?"bg-yellow-100 text-yellow-800":"PENDING"===e.status?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:e.status})]})]}),e.shippingAddress&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Shipping Address"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.shippingAddress.firstName," ",e.shippingAddress.lastName,(0,a.jsx)("br",{}),e.shippingAddress.address,(0,a.jsx)("br",{}),e.shippingAddress.city,", ",e.shippingAddress.state," ",e.shippingAddress.zipCode,(0,a.jsx)("br",{}),e.shippingAddress.country]})]}),(0,a.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900",children:["Items (",(null===(t=e.items)||void 0===t?void 0:t.length)||0,")"]}),null===(l=e.items)||void 0===l?void 0:l.map(e=>{var s,t,l,r,i,d,n,o,x,m;return(0,a.jsxs)("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-white rounded-lg overflow-hidden border",children:(0,a.jsx)(c.OptimizedImage,{src:(null===(l=e.product)||void 0===l?void 0:null===(t=l.images)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.url)||"/placeholder-product.jpg",alt:(null===(r=e.product)||void 0===r?void 0:r.name)||"Product",width:64,height:64,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:(null===(i=e.product)||void 0===i?void 0:i.name)||"Unknown Product"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[null===(n=e.product)||void 0===n?void 0:null===(d=n.brand)||void 0===d?void 0:d.name," • ",null===(x=e.product)||void 0===x?void 0:null===(o=x.category)||void 0===o?void 0:o.name]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantity: ",e.quantity," \xd7 KSh ",(null===(m=e.price)||void 0===m?void 0:m.toLocaleString())||"0"]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"font-semibold text-gray-900",children:["KSh ",((e.price||0)*e.quantity).toLocaleString()]})})]},e.id)})]}),(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["KSh ",((null===(r=e.items)||void 0===r?void 0:r.reduce((e,s)=>e+s.price*s.quantity,0))||0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Shipping"}),(0,a.jsx)("span",{className:"text-gray-900",children:"KSh 500"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Tax (16%)"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["KSh ",Math.round(.16*(e.total||0)/1.16).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold text-lg border-t pt-2",children:[(0,a.jsx)("span",{className:"text-gray-900",children:"Total"}),(0,a.jsxs)("span",{className:"text-gray-900",children:["KSh ",(null===(d=e.total)||void 0===d?void 0:d.toLocaleString())||"0"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(i(),{href:"/orders/".concat(e.id),className:"bg-blue-900 text-white px-4 py-2 rounded-xl hover:bg-blue-800 transition-colors text-sm font-bold shadow-md hover:shadow-lg",children:"Track Order"}),(0,a.jsx)("button",{className:"border-2 border-blue-900 text-blue-900 px-4 py-2 rounded-xl hover:bg-blue-50 transition-colors text-sm font-bold",children:"Reorder Items"})]}),"DELIVERED"===e.status&&(0,a.jsx)("button",{className:"text-blue-900 hover:text-blue-700 text-sm font-bold",children:"Leave Review"})]})]})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Start shopping to see your order history here"}),(0,a.jsx)(i(),{href:"/products",className:"bg-blue-900 text-white px-6 py-3 rounded-xl hover:bg-blue-800 transition-colors font-bold shadow-lg hover:shadow-xl",children:"Browse Products"})]})})]}),"wishlist"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"My Wishlist"}),h?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(o.k,{size:"lg"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading wishlist..."})]}):u&&u.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(e=>{var s,t,l,r,d,n,o,m,u,h,p,b,y,v;return(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,a.jsx)(c.OptimizedImage,{src:null===(l=e.product)||void 0===l?void 0:null===(t=l.images)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.url,alt:null===(r=e.product)||void 0===r?void 0:r.name,width:200,height:200,className:"w-full aspect-square object-cover rounded-lg mb-4"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:null===(d=e.product)||void 0===d?void 0:d.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:null===(o=e.product)||void 0===o?void 0:null===(n=o.brand)||void 0===n?void 0:n.name}),(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-4",children:(null===(m=e.product)||void 0===m?void 0:m.originalPrice)&&(null===(u=e.product)||void 0===u?void 0:u.originalPrice)>(null===(h=e.product)||void 0===h?void 0:h.price)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-lg font-black text-blue-900",children:(0,x.L)(null===(p=e.product)||void 0===p?void 0:p.price)}),(0,a.jsx)("span",{className:"text-sm text-gray-500 line-through",children:(0,x.L)(null===(b=e.product)||void 0===b?void 0:b.originalPrice)})]}):(0,a.jsx)("span",{className:"text-lg font-black text-blue-900",children:(0,x.L)(null===(y=e.product)||void 0===y?void 0:y.price)})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(i(),{href:"/products/".concat(null===(v=e.product)||void 0===v?void 0:v.slug),className:"flex-1 bg-blue-900 text-white py-2 px-4 rounded-xl hover:bg-blue-800 transition-colors text-sm text-center font-bold shadow-md hover:shadow-lg",children:"View Product"}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id)})}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Your wishlist is empty"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Start adding products you love to your wishlist."}),(0,a.jsx)(i(),{href:"/products",className:"mt-6 inline-block bg-blue-900 text-white px-6 py-3 rounded-xl hover:bg-blue-800 transition-all duration-200 font-bold shadow-lg hover:shadow-xl",children:"Browse Products"})]})]}),"settings"===y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Account Settings"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notifications"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Email Notifications"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Receive order updates and promotions"})]}),(0,a.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-900 focus:ring-blue-900",defaultChecked:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"SMS Notifications"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Receive shipping updates via SMS"})]}),(0,a.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Privacy"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Profile Visibility"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Make your profile visible to other users"})]}),(0,a.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Data Analytics"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Help improve our services with usage data"})]}),(0,a.jsx)("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-900 focus:ring-blue-900",defaultChecked:!0})]})]})]}),(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-4",children:"Danger Zone"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Delete Account"}),(0,a.jsx)("p",{className:"text-sm text-red-600",children:"This action cannot be undone. All your data will be permanently deleted."})]})]})]})]})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-white via-blue-50 to-white",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-3xl border-2 border-gray-200 shadow-xl",children:[(0,a.jsx)("h3",{className:"text-lg font-black text-gray-900 mb-2",children:"Please sign in"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4 font-medium",children:"You need to be signed in to view your profile."}),(0,a.jsx)(i(),{href:"/auth/signin",className:"bg-blue-900 text-white px-6 py-3 rounded-xl hover:bg-blue-800 transition-all duration-200 font-bold shadow-lg hover:shadow-xl",children:"Sign In"})]})})})}},5747:(e,s,t)=>{"use strict";t.d(s,{A:()=>d,OptimizedImage:()=>i});var a=t(5155),l=t(5565),r=t(2115);let i=e=>{let{src:s,alt:t,width:i,height:d,className:n="",priority:o=!1,placeholder:c="blur",...x}=e,[m,u]=(0,r.useState)(!0),[h,g]=(0,r.useState)(!1),p="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAABAAEDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==",b=()=>{u(!1)},y=()=>{g(!0),u(!1)};return h?(0,a.jsx)("div",{className:"bg-gray-200 flex items-center justify-center ".concat(n),style:{width:i||"100%",height:d||"auto",aspectRatio:i&&d?"".concat(i,"/").concat(d):void 0},children:(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Image unavailable"})}):i&&d?(0,a.jsxs)("div",{className:"relative ".concat(n),style:{width:"100%",aspectRatio:"".concat(i,"/").concat(d)},children:[(0,a.jsx)(l.default,{src:s,alt:t,fill:!0,priority:o,placeholder:c,blurDataURL:p,onLoad:b,onError:y,className:"transition-opacity duration-300 object-cover ".concat(m?"opacity-0":"opacity-100"),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...x}),m&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):i&&!d?(0,a.jsxs)("div",{className:"relative ".concat(n),style:{width:"100%",aspectRatio:"1"},children:[(0,a.jsx)(l.default,{src:s,alt:t,fill:!0,priority:o,placeholder:c,blurDataURL:p,onLoad:b,onError:y,className:"transition-opacity duration-300 object-cover ".concat(m?"opacity-0":"opacity-100"),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",...x}),m&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]}):(0,a.jsxs)("div",{className:"relative ".concat(n),children:[(0,a.jsx)(l.default,{src:s,alt:t,width:800,height:600,priority:o,placeholder:c,blurDataURL:p,onLoad:b,onError:y,className:"transition-opacity duration-300 w-full h-auto ".concat(m?"opacity-0":"opacity-100"),style:{width:"auto",height:"auto"},...x}),m&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"})})]})},d=i},9663:(e,s,t)=>{"use strict";t.d(s,{L:()=>a});let a=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(Number(e)||0)}},e=>{var s=s=>e(e.s=s);e.O(0,[3830,1097,2432,7979,4884,7098,9744,2033,2322,9592,7331,2652,5030,8392,7694,9173,9401,5484,7358],()=>s(443)),_N_E=e.O()}]);