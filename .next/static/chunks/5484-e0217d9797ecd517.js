"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5484],{7908:(e,t,a)=>{a.d(t,{A:()=>s,k:()=>c});var r=a(5155);let c=(0,a(2115).memo)(function(e){let{size:t="md",color:a="sky",text:c="Loading...",className:s=""}=e,i={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"},n={sky:"border-brand-sky",indigo:"border-brand-indigo",slate:"border-slate-600",white:"border-white"};return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat(s),role:"status","aria-live":"polite",children:[(0,r.jsx)("div",{className:"\n          ".concat(i[t]||i.md," \n          ").concat(n[a]||n.sky," \n          border-2 border-t-transparent rounded-full animate-spin\n        ")}),c&&(0,r.jsx)("p",{className:"mt-2 text-sm text-slate-400 animate-pulse",children:c})]})}),s=c},3619:(e,t,a)=>{a.d(t,{Ay:()=>i,Bj:()=>d,Ck:()=>f,Ek:()=>y,GR:()=>p,QT:()=>n,SC:()=>E,_$:()=>h,h:()=>g,hD:()=>m,kp:()=>w,nU:()=>u});var r=a(2115);class c{async fetchWithCache(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(e,"_").concat(JSON.stringify(t)),r=this.cache.get(a);if(r&&Date.now()-r.timestamp<this.cacheTimeout)return r.data;try{let r=await fetch("".concat(this.baseURL).concat(e),{credentials:"include",headers:{"Content-Type":"application/json",...t.headers},...t});if(!r.ok){if(401===r.status)throw Error("UNAUTHORIZED");throw Error("API Error: ".concat(r.status," ").concat(r.statusText))}let c=await r.json();return t.method&&"GET"!==t.method||this.cache.set(a,{data:c,timestamp:Date.now()}),c}catch(e){throw console.error("API Service Error:",e),e}}clearCache(){this.cache.clear()}async getProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&""!==r&&t.append(a,r)});let a=t.toString();return this.fetchWithCache("/api/products".concat(a?"?".concat(a):""))}async getProduct(e){return this.fetchWithCache("/api/products/".concat(e))}async createProduct(e){return this.clearCache(),this.fetchWithCache("/api/products",{method:"POST",body:JSON.stringify(e)})}async updateProduct(e,t){return this.clearCache(),this.fetchWithCache("/api/products/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteProduct(e){return this.clearCache(),this.fetchWithCache("/api/products/".concat(e),{method:"DELETE"})}async getCategories(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&""!==r&&t.append(a,r)});let a=t.toString();return this.fetchWithCache("/api/categories".concat(a?"?".concat(a):""))}async createCategory(e){return this.clearCache(),this.fetchWithCache("/api/categories",{method:"POST",body:JSON.stringify(e)})}async getBrands(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&""!==r&&t.append(a,r)});let a=t.toString();return this.fetchWithCache("/api/brands".concat(a?"?".concat(a):""))}async createBrand(e){return this.clearCache(),this.fetchWithCache("/api/brands",{method:"POST",body:JSON.stringify(e)})}async getOrders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&""!==r&&t.append(a,r)});let a=t.toString();return this.fetchWithCache("/api/orders".concat(a?"?".concat(a):""),{credentials:"include"})}async createOrder(e){return this.clearCache(),this.fetchWithCache("/api/orders",{method:"POST",credentials:"include",body:JSON.stringify(e)})}async getOrderDetail(e){let t=await fetch("/api/orders/".concat(e),{cache:"no-store",credentials:"include"});if(!t.ok){if(401===t.status)throw Error("UNAUTHORIZED");throw Error("Failed to fetch order")}return t.json()}async trackOrder(e){let t=await fetch("/api/orders/track?orderNumber=".concat(encodeURIComponent(e)),{cache:"no-store",credentials:"include"});if(!t.ok){if(401===t.status)throw Error("UNAUTHORIZED");throw Error("Failed to track order")}return t.json()}async updateOrder(e,t){return this.clearCache(),this.fetchWithCache("/api/orders/".concat(e),{method:"PUT",credentials:"include",body:JSON.stringify(t)})}async getUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&""!==r&&t.append(a,r)});let a=t.toString();return this.fetchWithCache("/api/users".concat(a?"?".concat(a):""),{credentials:"include"})}async getUser(e){return this.fetchWithCache("/api/users/".concat(e),{credentials:"include"})}async updateUser(e,t){return this.clearCache(),this.fetchWithCache("/api/users/".concat(e),{method:"PUT",credentials:"include",body:JSON.stringify(t)})}async deleteUser(e){return this.clearCache(),this.fetchWithCache("/api/users/".concat(e),{method:"DELETE",credentials:"include"})}async getAdminStats(){return this.fetchWithCache("/api/admin/stats",{credentials:"include"})}async getCoupons(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&""!==r&&t.append(a,r)});let a=t.toString();return this.fetchWithCache("/api/coupons".concat(a?"?".concat(a):""),{credentials:"include"})}async createCoupon(e){return this.clearCache(),this.fetchWithCache("/api/coupons",{method:"POST",credentials:"include",body:JSON.stringify(e)})}async updateCoupon(e,t){return this.clearCache(),this.fetchWithCache("/api/coupons/".concat(e),{method:"PUT",credentials:"include",body:JSON.stringify(t)})}async deleteCoupon(e){return this.clearCache(),this.fetchWithCache("/api/coupons/".concat(e),{method:"DELETE",credentials:"include"})}async getAllReviews(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&""!==r&&t.append(a,r)});let a=t.toString();return this.fetchWithCache("/api/reviews".concat(a?"?".concat(a):""),{credentials:"include"})}async deleteReview(e){return this.clearCache(),this.fetchWithCache("/api/reviews/".concat(e),{method:"DELETE",credentials:"include"})}async search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getProducts({search:e,...t})}async getFeaturedProducts(){return this.getProducts({featured:!0,limit:8})}async getFeaturedCategories(){return this.getCategories({featured:!0})}async getFeaturedBrands(){return this.getBrands({featured:!0})}async getCart(){let e=await fetch("/api/cart",{credentials:"include"});if(!e.ok){if(401===e.status)return{success:!0,data:[]};throw Error("Failed to fetch cart")}return e.json()}async addToCart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.clearCache();try{let a=await fetch("/api/cart",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e,quantity:t})});if(!a.ok){let e={};try{let t=await a.text();e=t?JSON.parse(t):{}}catch(e){console.error("Failed to parse error response:",e)}if(401===a.status)throw Error("UNAUTHORIZED");let t=(null==e?void 0:e.message)||(null==e?void 0:e.error)||"Failed to add to cart (".concat(a.status,")");throw Error(t)}return await a.json()}catch(e){if(e instanceof Error)throw e;throw Error((null==e?void 0:e.message)||"Failed to add to cart")}}async updateCartItem(e,t){this.clearCache();let a=await fetch("/api/cart/".concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({quantity:t})});if(!a.ok){if(401===a.status)throw Error("UNAUTHORIZED");throw Error("Failed to update cart item")}return a.json()}async removeFromCart(e){this.clearCache();let t=await fetch("/api/cart/".concat(e),{method:"DELETE",credentials:"include"});if(!t.ok){if(401===t.status)throw Error("UNAUTHORIZED");throw Error("Failed to remove from cart")}return t.json()}async clearCart(){this.clearCache();let e=await fetch("/api/cart",{method:"DELETE",credentials:"include"});if(!e.ok){if(401===e.status)throw Error("UNAUTHORIZED");throw Error("Failed to clear cart")}return e.json()}async getWishlist(){try{let e=await fetch("/api/wishlist",{credentials:"include"});if(!e.ok){if(401===e.status||500===e.status)return[];throw Error("Failed to fetch wishlist")}let t=await e.json();return Array.isArray(t)?t:(null==t?void 0:t.data)||[]}catch(e){return console.error("Error fetching wishlist:",e),[]}}async addToWishlist(e){this.clearCache();let t=await fetch("/api/wishlist",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e})});if(!t.ok){if(401===t.status)throw Error("UNAUTHORIZED");throw Error("Failed to add to wishlist")}return t.json()}async removeFromWishlist(e){this.clearCache();let t=await fetch("/api/wishlist/".concat(e),{method:"DELETE",credentials:"include"});if(!t.ok){if(401===t.status)throw Error("UNAUTHORIZED");throw Error("Failed to remove from wishlist")}return t.json()}async clearWishlist(){this.clearCache();let e=await fetch("/api/wishlist",{method:"DELETE",credentials:"include"});if(!e.ok){if(401===e.status)throw Error("UNAUTHORIZED");throw Error("Failed to clear wishlist")}return e.json()}async getReviews(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=new URLSearchParams;e&&r.append("productId",e),r.append("limit",t.toString()),r.append("offset",a.toString());let c=await fetch("/api/reviews?".concat(r.toString()),{credentials:"include"});if(!c.ok){if(401===c.status)throw Error("UNAUTHORIZED");throw Error("Failed to fetch reviews")}return c.json()}async createReview(e){this.clearCache();let t=await fetch("/api/reviews",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){if(401===t.status)throw Error("UNAUTHORIZED");throw Error("Failed to create review")}return t.json()}async updateReview(e,t){this.clearCache();let a=await fetch("/api/reviews/".concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){if(401===a.status)throw Error("UNAUTHORIZED");throw Error("Failed to update review")}return a.json()}async deleteReview(e){this.clearCache();let t=await fetch("/api/reviews/".concat(e),{method:"DELETE",credentials:"include"});if(!t.ok){if(401===t.status)throw Error("UNAUTHORIZED");throw Error("Failed to delete review")}return t.json()}constructor(){this.baseURL="",this.cache=new Map,this.cacheTimeout=3e5}}let s=new c,i=s,n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null),o=(0,r.useMemo)(()=>JSON.stringify(e),[e]);return(0,r.useEffect)(()=>{(async()=>{try{i(!0),l(null);let t=await s.getProducts(e);a(t)}catch(e){l(e.message)}finally{i(!1)}})()},[o]),{data:t,loading:c,error:n,refetch:async()=>{try{i(!0),l(null);let t=await s.getProducts(e);a(t)}catch(e){l(e.message)}finally{i(!1)}}}},l=null,o=0,h=()=>{let[e,t]=(0,r.useState)(l||[]),[a,c]=(0,r.useState)(!l),[i,n]=(0,r.useState)(null),h=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=Date.now();if(!e&&l&&a-o<5e3){t(l),c(!1);return}try{c(!0),n(null);let e=await s.getCart(),r=Array.isArray(e)?e:(null==e?void 0:e.data)||[];l=r,o=a,t(r)}catch(e){"UNAUTHORIZED"===e.message||e.message.includes("401")||e.message.includes("Failed to fetch cart")?(l=[],o=a,t([]),n(null)):n(e.message)}finally{c(!1)}},[]);(0,r.useEffect)(()=>{h()},[h]);let u=(0,r.useCallback)(async()=>{l=null,o=0,await h(!0)},[h]),d=(0,r.useCallback)(async(e,t)=>{try{await s.updateCartItem(e,t),l=null,o=0,await h(!0)}catch(e){throw n(e.message),e}},[h]),f=(0,r.useCallback)(async e=>{try{await s.removeFromCart(e),l=null,o=0,await h(!0)}catch(e){throw n(e.message),e}},[h]),y=(0,r.useCallback)(async()=>{try{await s.clearCart(),l=null,o=0,await h(!0)}catch(e){throw n(e.message),e}},[h]);return{data:Array.isArray(e)?e:[],loading:a,error:i,refetch:h,refreshCart:u,updateCartItem:d,removeFromCart:f,clearCart:y}},u=()=>{let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(!0),[i,n]=(0,r.useState)(null),l=async()=>{try{c(!0),n(null);let e=await s.getWishlist(),a=Array.isArray(e)?e:(null==e?void 0:e.data)||[];t(a)}catch(e){t([]),n(null),console.error("Wishlist fetch error:",e)}finally{c(!1)}};(0,r.useEffect)(()=>{l()},[]);let o=async e=>{try{await s.addToWishlist(e),await l()}catch(e){n(e.message)}},h=async e=>{try{await s.removeFromWishlist(e),await l()}catch(e){n(e.message)}},u=async()=>{try{await s.clearWishlist(),await l()}catch(e){n(e.message)}};return{data:e,loading:a,error:i,refetch:l,addToWishlist:o,removeFromWishlist:h,clearWishlist:u}},d=e=>{let[t,a]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{e&&(async()=>{try{i(!0),l(null);let t=await s.getProduct(e),r=(null==t?void 0:t.data)||t;a(r)}catch(e){l(e.message)}finally{i(!1)}})()},[e]),{data:t,loading:c,error:n}},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null),o=(0,r.useMemo)(()=>JSON.stringify(e),[e]);return(0,r.useEffect)(()=>{(async()=>{try{i(!0),l(null);let t=await s.getCategories(e),r=(null==t?void 0:t.data)||t;a(r)}catch(e){console.error("Error fetching categories:",e),l(e.message),a(null)}finally{i(!1)}})()},[o]),{data:t,loading:c,error:n}},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null),o=(0,r.useMemo)(()=>JSON.stringify(e),[e]);return(0,r.useEffect)(()=>{(async()=>{try{i(!0),l(null);let t=await s.getBrands(e),r=(null==t?void 0:t.data)||t;a(r)}catch(e){console.error("Error fetching brands:",e),l(e.message),a(null)}finally{i(!1)}})()},[o]),{data:t,loading:c,error:n}},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null);(0,r.useMemo)(()=>JSON.stringify(e),[e]);let o=(0,r.useCallback)(async()=>{try{i(!0),l(null);let t=await s.getOrders(e),r=(null==t?void 0:t.data)||t;a(r)}catch(e){var t,r;(null===(t=e.message)||void 0===t?void 0:t.includes("404"))||(null===(r=e.message)||void 0===r?void 0:r.includes("Not Found"))?(a({orders:[],pagination:{page:1,limit:10,total:0,totalPages:0}}),l(null)):l(e.message)}finally{i(!1)}},[e]);return(0,r.useEffect)(()=>{o()},[o]),{data:t,loading:c,error:n}},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null);(0,r.useMemo)(()=>JSON.stringify(e),[e]);let o=(0,r.useCallback)(async()=>{try{i(!0),l(null);let t=await s.getUsers(e);a(t)}catch(e){l(e.message)}finally{i(!1)}},[e]);return(0,r.useEffect)(()=>{o()},[o]),{data:t,loading:c,error:n,refetch:o}},p=()=>{let[e,t]=(0,r.useState)(null),[a,c]=(0,r.useState)(!0),[i,n]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{try{c(!0),n(null);let e=await s.getAdminStats();t(e)}catch(e){n(e.message)}finally{c(!1)}},[]);return(0,r.useEffect)(()=>{l()},[l]),{data:e,loading:a,error:i,refetch:l}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null),o=(0,r.useMemo)(()=>JSON.stringify(e),[e]),h=(0,r.useCallback)(async()=>{try{i(!0),l(null);let t=await s.getCoupons(e),r=(null==t?void 0:t.data)||t;a(r)}catch(e){console.error("Error fetching coupons:",e),l(e.message),a(null)}finally{i(!1)}},[o]);return(0,r.useEffect)(()=>{h()},[h]),{data:t,loading:c,error:n,refetch:h}},E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,a]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null);(0,r.useMemo)(()=>JSON.stringify(e),[e]);let o=(0,r.useCallback)(async()=>{try{i(!0),l(null);let t=await s.getAllReviews(e);a(t)}catch(e){l(e.message)}finally{i(!1)}},[e]);return(0,r.useEffect)(()=>{o()},[o]),{data:t,loading:c,error:n,refetch:o}}}}]);